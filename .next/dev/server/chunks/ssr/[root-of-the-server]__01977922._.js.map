{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/auth/page.tsx"],"sourcesContent":["\"use client\";\n\nimport type React from \"react\";\nimport { useState } from \"react\";\nimport { useSearchParams, useRouter } from \"next/navigation\";\nimport { Heart } from \"lucide-react\";\nimport Link from \"next/link\";\n\ntype UserType = \"hospital\" | \"donor\" | \"recipient\";\n\nexport default function Auth() {\n  const searchParams = useSearchParams();\n  const router = useRouter();\n\n  const [userType, setUserType] = useState<UserType>(\n    (searchParams.get(\"type\") as UserType) || \"donor\"\n  );\n\n  const [isLogin, setIsLogin] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const [formData, setFormData] = useState({\n    fullName: \"\",\n    hospitalName: \"\",\n    recipientName: \"\",\n    email: \"\",\n    password: \"\",\n    phone: \"\",\n    bloodType: \"O+\",\n    licenseNumber: \"\",\n    urgency: \"low\",\n  });\n\n  // -------------------------------\n  // HANDLE INPUT\n  // -------------------------------\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n  };\n\n  // -------------------------------\n  // FORM SUBMIT (REGISTER / LOGIN)\n  // -------------------------------\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n\n    const backend = \"http://localhost:5000\";\n\n    const url = isLogin ? `${backend}/auth/login` : `${backend}/auth/register`;\n\n    // Convert frontend fields ‚Üí backend fields\n    const body = {\n      fullName:\n        userType === \"hospital\"\n          ? formData.hospitalName\n          : userType === \"recipient\"\n          ? formData.recipientName\n          : formData.fullName,\n      email: formData.email,\n      password: formData.password,\n      phone: formData.phone,\n      bloodType: userType === \"donor\" ? formData.bloodType : undefined,\n      role: userType,\n    };\n\n    try {\n      const res = await fetch(url, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(body),\n      });\n\n      const data = await res.json();\n\n      if (!data.success) {\n        alert(data.message || \"Something went wrong.\");\n        setLoading(false);\n        return;\n      }\n\n      // -------------------------------\n      // SAVE TOKEN + USER DETAILS\n      // -------------------------------\n      if (data.token) {\n        localStorage.setItem(\"token\", data.token);\n        localStorage.setItem(\"userId\", data.user.id || data.user._id);\n        localStorage.setItem(\"role\", data.user.role);\n      }\n\n      // -------------------------------\n      // REDIRECT BASED ON ROLE\n      // -------------------------------\n      const role = data.user.role;\n\n      if (role === \"donor\") router.push(\"/donor/dashboard\");\n      if (role === \"hospital\") router.push(\"/hospital/dashboard\");\n      if (role === \"recipient\") router.push(\"/recipient/dashboard\");\n\n    } catch (err) {\n      console.error(err);\n      alert(\"Network or server error.\");\n    }\n\n    setLoading(false);\n  };\n\n  // -------------------------------\n  // UI CONFIG\n  // -------------------------------\n  const userTypeConfig = {\n    hospital: {\n      title: \"Hospital Registration\",\n      icon: \"üè•\",\n      color: \"from-red-600 to-red-700\",\n      nameField: \"hospitalName\",\n      placeholder: \"Hospital Name\",\n    },\n    donor: {\n      title: \"Become a Life Saver\",\n      icon: \"‚ù§Ô∏è\",\n      color: \"from-red-500 to-red-600\",\n      nameField: \"fullName\",\n      placeholder: \"Full Name\",\n    },\n    recipient: {\n      title: \"Request Blood\",\n      icon: \"ü©∏\",\n      color: \"from-red-600 to-red-800\",\n      nameField: \"recipientName\",\n      placeholder: \"Recipient Name\",\n    },\n  };\n\n  const config = userTypeConfig[userType];\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-red-100 flex items-center justify-center p-4\">\n\n      {/* Back Button */}\n      <Link\n        href=\"/\"\n        className=\"absolute top-4 left-4 flex items-center gap-2 text-red-600 hover:text-red-700 font-semibold\"\n      >\n        <Heart className=\"w-5 h-5\" />\n        Pulse Bank\n      </Link>\n\n      <div className=\"w-full max-w-4xl\">\n\n        {/* USER TYPE SELECTION */}\n        <div className=\"grid md:grid-cols-3 gap-4 mb-8\">\n          {([\"hospital\", \"donor\", \"recipient\"] as UserType[]).map((type) => (\n            <button\n              key={type}\n              onClick={() => setUserType(type)}\n              className={`p-6 rounded-xl border-2 transition transform hover:scale-105 ${\n                userType === type\n                  ? \"bg-red-600 text-white border-red-700 shadow-lg\"\n                  : \"bg-white text-gray-700 border-gray-200 hover:border-red-400\"\n              }`}\n            >\n              <div className=\"text-4xl mb-3\">\n                {type === \"hospital\" ? \"üè•\" : type === \"donor\" ? \"‚ù§Ô∏è\" : \"ü©∏\"}\n              </div>\n              <div className=\"font-semibold capitalize\">{type}</div>\n            </button>\n          ))}\n        </div>\n\n        {/* FORM CARD */}\n        <div className=\"bg-white rounded-2xl shadow-2xl overflow-hidden\">\n\n          {/* HEADER */}\n          <div className={`bg-gradient-to-r ${config.color} text-white p-8 text-center`}>\n            <div className=\"text-5xl mb-4\">{config.icon}</div>\n            <h1 className=\"text-3xl font-bold mb-2\">{config.title}</h1>\n            <p className=\"opacity-90\">\n              {isLogin ? \"Welcome back! Sign in to continue\" : \"Join our community and save lives\"}\n            </p>\n          </div>\n\n          {/* FORM */}\n          <form onSubmit={handleSubmit} className=\"p-8 space-y-6\">\n\n            {/* NAME */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                {config.placeholder}\n              </label>\n              <input\n                type=\"text\"\n                name={config.nameField}\n                value={(formData as any)[config.nameField]}\n                onChange={handleInputChange}\n                required\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500\"\n                placeholder={config.placeholder}\n              />\n            </div>\n\n            {/* EMAIL + PHONE */}\n            <div className=\"grid md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Email\n                </label>\n                <input\n                  type=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleInputChange}\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Phone\n                </label>\n                <input\n                  type=\"tel\"\n                  name=\"phone\"\n                  value={formData.phone}\n                  onChange={handleInputChange}\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500\"\n                />\n              </div>\n            </div>\n\n            {/* BLOOD TYPE (DONOR ONLY) */}\n            {userType === \"donor\" && (\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  Blood Type\n                </label>\n                <select\n                  name=\"bloodType\"\n                  value={formData.bloodType}\n                  onChange={handleInputChange}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg\"\n                >\n                  {[\"O+\", \"O-\", \"A+\", \"A-\", \"B+\", \"B-\", \"AB+\", \"AB-\"].map((b) => (\n                    <option key={b} value={b}>\n                      {b}\n                    </option>\n                  ))}\n                </select>\n              </div>\n            )}\n\n            {/* PASSWORD */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                Password\n              </label>\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleInputChange}\n                required\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500\"\n              />\n            </div>\n\n            {/* LOGIN / REGISTER TOGGLE */}\n            <button\n              type=\"button\"\n              onClick={() => setIsLogin(!isLogin)}\n              className=\"text-red-600 hover:text-red-700 font-semibold text-sm\"\n            >\n              {isLogin ? \"Create new account\" : \"Already have an account? Login\"}\n            </button>\n\n            {/* SUBMIT */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-gradient-to-r from-red-600 to-red-700 text-white font-bold py-3 rounded-lg hover:from-red-700 hover:to-red-800 disabled:opacity-50\"\n            >\n              {loading ? \"Processing...\" : isLogin ? \"Sign In\" : \"Create Account\"}\n            </button>\n\n          </form>\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}