{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/donor/dashboard/page.tsx"],"sourcesContent":["// \"use client\";\r\n\r\n// import Link from \"next/link\";\r\n// import { useEffect, useState, useRef } from \"react\";\r\n// import { jwtDecode } from \"jwt-decode\";\r\n// import {\r\n//   Heart,\r\n//   Droplet,\r\n//   MapPin,\r\n//   CheckCircle,\r\n//   Play,\r\n// } from \"lucide-react\";\r\n// import { io } from \"socket.io-client\";\r\n\r\n// export default function DonorDashboard() {\r\n//   const [history, setHistory] = useState<any[]>([]);\r\n//   const [requests, setRequests] = useState<any[]>([]);\r\n//   const [donorId, setDonorId] = useState<string | null>(null);\r\n//   const [loading, setLoading] = useState(true);\r\n//   const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n//   const [available, setAvailable] = useState<boolean>(false);\r\n//   const [showVideo, setShowVideo] = useState(false);\r\n\r\n//   const socketRef = useRef<any>(null);\r\n\r\n//   // Load donorId from token\r\n//   useEffect(() => {\r\n//     const token = localStorage.getItem(\"token\");\r\n//     if (token) {\r\n//       const decoded: any = jwtDecode(token);\r\n//       setDonorId(decoded.userId);\r\n//     }\r\n//   }, []);\r\n\r\n//   // Socket.io live request notifications\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     const socket = io(\"http://localhost:5000\");\r\n//     socketRef.current = socket;\r\n\r\n//     socket.on(\"connect\", () => {\r\n//       socket.emit(\"register\", donorId);\r\n//     });\r\n\r\n//     socket.on(\"new_request\", (req) => {\r\n//       alert(`üîî NEW REQUEST: ${req.bloodType} ‚Üí ${req.unitsNeeded} units needed`);\r\n//       setRequests((prev) => [req, ...prev]);\r\n//     });\r\n\r\n//     return () => socket.disconnect();\r\n//   }, [donorId]);\r\n\r\n//   // Fetch history\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n//       .then((res) => res.json())\r\n//       .then((data) => {\r\n//         setHistory(data.donations || []);\r\n//         setLoading(false);\r\n//       });\r\n//   }, [donorId]);\r\n\r\n//   // Fetch urgent requests\r\n//   useEffect(() => {\r\n//     fetch(\"http://localhost:5000/donor/requests\")\r\n//       .then((res) => res.json())\r\n//       .then((data) => setRequests(data.requests || []));\r\n//   }, []);\r\n\r\n//   // Location handler\r\n//   const getLocation = () => {\r\n//     navigator.geolocation.getCurrentPosition(\r\n//       (pos) => {\r\n//         setLocation({\r\n//           lat: pos.coords.latitude,\r\n//           lng: pos.coords.longitude,\r\n//         });\r\n//         alert(\"üìç Location Captured Successfully\");\r\n//       },\r\n//       () => alert(\"‚ùå Location access denied\")\r\n//     );\r\n//   };\r\n\r\n//   // Mark availability\r\n//   const markAvailable = async () => {\r\n//     if (!location) return alert(\"Please share your location first\");\r\n\r\n//     await fetch(\"http://localhost:5000/donor/availability\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({\r\n//         donorId,\r\n//         available: true,\r\n//         latitude: location.lat,\r\n//         longitude: location.lng,\r\n//       }),\r\n//     });\r\n\r\n//     setAvailable(true);\r\n//   };\r\n\r\n//   const markUnavailable = async () => {\r\n//     await fetch(\"http://localhost:5000/donor/availability\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ donorId, available: false }),\r\n//     });\r\n\r\n//     setAvailable(false);\r\n//   };\r\n\r\n//   return (\r\n//     <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n//       {/* HEADER */}\r\n//       <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n//         <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n//           <Heart className=\"w-7 h-7 fill-white\" />\r\n//           Pulse Bank\r\n//         </div>\r\n\r\n//         <div className=\"flex items-center gap-4\">\r\n//           {location && (\r\n//             <div className=\"flex items-center gap-2 bg-red-500 px-4 py-2 rounded-lg\">\r\n//               <MapPin className=\"w-5 h-5\" /> Location Active\r\n//             </div>\r\n//           )}\r\n\r\n//           <button\r\n//             onClick={() => {\r\n//               localStorage.removeItem(\"token\");\r\n//               window.location.href = \"/\";\r\n//             }}\r\n//             className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n//           >\r\n//             Logout\r\n//           </button>\r\n//         </div>\r\n//       </header>\r\n\r\n//       {/* MAIN SECTION */}\r\n//       <div className=\"max-w-7xl mx-auto p-6\">\r\n//         {/* HERO CARD */}\r\n//         <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n//           <div className=\"p-10\">\r\n//             <h2 className=\"text-3xl font-bold text-red-700\">\r\n//               Welcome Back, Life Saver!\r\n//             </h2>\r\n\r\n//             <p className=\"text-gray-700 mt-2\">\r\n//               Thank you for helping save lives ‚ù§Ô∏è\r\n//             </p>\r\n\r\n//             <div className=\"mt-4 space-y-1\">\r\n//               <p>\r\n//                 <b>{history.length}</b> total donations\r\n//               </p>\r\n//               <p>\r\n//                 <b>{history.length * 400}</b> ml contributed\r\n//               </p>\r\n//             </div>\r\n\r\n//             <div className=\"mt-6 flex gap-4 flex-wrap\">\r\n//               <button\r\n//                 onClick={getLocation}\r\n//                 className=\"flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-lg shadow\"\r\n//               >\r\n//                 <MapPin /> Share Location\r\n//               </button>\r\n\r\n//               {!available ? (\r\n//                 <button\r\n//                   onClick={markAvailable}\r\n//                   className=\"flex items-center gap-2 bg-green-600 text-white px-5 py-3 rounded-lg shadow\"\r\n//                 >\r\n//                   <CheckCircle /> Mark Available\r\n//                 </button>\r\n//               ) : (\r\n//                 <button\r\n//                   onClick={markUnavailable}\r\n//                   className=\"flex items-center gap-2 bg-gray-600 text-white px-5 py-3 rounded-lg shadow\"\r\n//                 >\r\n//                   Disable Availability\r\n//                 </button>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n\r\n//           <div className=\"bg-gray-900 flex items-center justify-center\">\r\n//             <Heart className=\"text-gray-400 w-20 h-20\" />\r\n//           </div>\r\n//         </div>\r\n\r\n//         {/* VIDEO */}\r\n//         {!showVideo ? (\r\n//           <div className=\"bg-red-50 mt-8 p-6 rounded-xl flex items-center justify-between border\">\r\n//             <div>\r\n//               <h3 className=\"text-2xl font-bold text-red-700\">Feel Inspired?</h3>\r\n//               <p className=\"text-gray-600\">\r\n//                 Watch stories of lives changed through donation.\r\n//               </p>\r\n//             </div>\r\n\r\n//             <button\r\n//               onClick={() => setShowVideo(true)}\r\n//               className=\"bg-red-600 text-white px-6 py-3 rounded-lg flex items-center gap-2\"\r\n//             >\r\n//               <Play className=\"w-5\" /> Watch Video\r\n//             </button>\r\n//           </div>\r\n//         ) : (\r\n//           <div className=\"mt-8 shadow-lg rounded-xl overflow-hidden border\">\r\n//             <iframe\r\n//               className=\"w-full aspect-video\"\r\n//               src=\"https://www.youtube.com/embed/_JlmwDqaYA0\"\r\n//             ></iframe>\r\n//             <button\r\n//               onClick={() => setShowVideo(false)}\r\n//               className=\"bg-red-600 w-full text-white py-2 font-semibold\"\r\n//             >\r\n//               Close Video\r\n//             </button>\r\n//           </div>\r\n//         )}\r\n\r\n//         {/* SPECIAL SECTIONS */}\r\n//         <BloodDonationGuide />\r\n//         <CompatibilityChart />\r\n//         <ImpactStories />\r\n\r\n//         {/* URGENT REQUESTS */}\r\n//         <UrgentRequests requests={requests} />\r\n//       </div>\r\n//     </main>\r\n//   );\r\n// }\r\n\r\n// /* ---------------------------------------\r\n//   REUSABLE COMPONENTS\r\n// ----------------------------------------*/\r\n\r\n// function BloodDonationGuide() {\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n//         Blood Donation Frequency Guide\r\n//       </h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {[\r\n//           { type: \"Whole Blood\", wait: 56, year: 6 },\r\n//           { type: \"Plasma\", wait: 2, year: 24 },\r\n//           { type: \"Platelets\", wait: 2, year: 24 },\r\n//           { type: \"Red Cells\", wait: 112, year: 3 },\r\n//         ].map((item, i) => (\r\n//           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n//             <h3 className=\"text-xl font-bold text-red-700\">{item.type}</h3>\r\n//             <p>Can donate every {item.wait} days</p>\r\n//             <p className=\"text-sm text-gray-600\">\r\n//               Yearly limit: {item.year} times\r\n//             </p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function CompatibilityChart() {\r\n//   const types = [\r\n//     { type: \"O-\", donate: [\"O-\", \"O+\", \"A-\", \"A+\", \"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n//     { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n//     { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n//     { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n//     { type: \"AB+\", donate: [\"AB+\"] },\r\n//   ];\r\n\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n//         Blood Compatibility Chart\r\n//       </h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {types.map((b, i) => (\r\n//           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n//             <h3 className=\"text-xl font-bold text-red-700 mb-2\">{b.type}</h3>\r\n\r\n//             <p className=\"text-gray-700\">Donates to:</p>\r\n\r\n//             <div className=\"flex flex-wrap gap-2 mt-1\">\r\n//               {b.donate.map((d, j) => (\r\n//                 <span\r\n//                   key={j}\r\n//                   className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\"\r\n//                 >\r\n//                   {d}\r\n//                 </span>\r\n//               ))}\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function ImpactStories() {\r\n//   const stories = [\r\n//     { title: \"Sarah's Second Chance\", img: \"/story1.jpg\" },\r\n//     { title: \"Newborn Battle Survivor\", img: \"/story2.jpg\" },\r\n//     { title: \"Accident Hero Recovery\", img: \"/story3.jpg\" },\r\n//   ];\r\n\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {stories.map((story, i) => (\r\n//           <div key={i} className=\"rounded-xl overflow-hidden shadow\">\r\n//             <div className=\"h-40 bg-gray-200\"></div>\r\n//             <div className=\"p-4 bg-red-50\">\r\n//               <h3 className=\"font-bold text-red-700\">{story.title}</h3>\r\n//               <p className=\"text-gray-600 text-sm\">\r\n//                 Your donation made a real difference\r\n//               </p>\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function UrgentRequests({ requests }: any) {\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">\r\n//         Nearby Hospitals Requesting Blood\r\n//       </h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {requests.map((req: any, i: number) => (\r\n//           <div\r\n//             key={i}\r\n//             className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\"\r\n//           >\r\n//             <h3 className=\"text-xl font-bold text-red-700\">\r\n//               {req.hospital || req.hospitalName || \"Unknown Hospital\"}\r\n//             </h3>\r\n\r\n//             <p className=\"text-gray-600 mt-1\">\r\n//               {req.locationKm ? `${req.locationKm} km away` : \"\"}\r\n//             </p>\r\n\r\n//             <div className=\"flex justify-between mt-3\">\r\n//               <span className=\"font-bold text-red-700\">{req.bloodType}</span>\r\n//               <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n//             </div>\r\n\r\n//             <p className=\"text-sm text-gray-600 mt-2\">\r\n//               Urgency: {req.urgency || \"Moderate\"}\r\n//             </p>\r\n\r\n//             {/* FIXED SCHEDULE DONATION LINK */}\r\n//             <Link\r\n//               href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n//                 req.hospital || req.hospitalName || \"\"\r\n//               )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n//               className=\"w-full\"\r\n//             >\r\n//               <button className=\"w-full mt-4 bg-gradient-to-r from-red-600 to-red-700 text-white py-3 rounded-lg\">\r\n//                 Schedule Donation\r\n//               </button>\r\n//             </Link>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// \"use client\";\r\n\r\n// import Link from \"next/link\";\r\n// import { useEffect, useState, useRef } from \"react\";\r\n// import { jwtDecode } from \"jwt-decode\";\r\n// import {\r\n//   Heart,\r\n//   Droplet,\r\n//   MapPin,\r\n//   CheckCircle,\r\n//   Play,\r\n//   Calendar,\r\n//   Clock,\r\n//   AlertCircle,\r\n// } from \"lucide-react\";\r\n// import { io } from \"socket.io-client\";\r\n\r\n// export default function DonorDashboard() {\r\n//   const [history, setHistory] = useState<any[]>([]);\r\n//   const [requests, setRequests] = useState<any[]>([]);\r\n//   const [schedules, setSchedules] = useState<any[]>([]);\r\n//   const [donorId, setDonorId] = useState<string | null>(null);\r\n//   const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n//   const [available, setAvailable] = useState<boolean>(false);\r\n//   const [showVideo, setShowVideo] = useState(false);\r\n\r\n//   const socketRef = useRef<any>(null);\r\n\r\n//   /* ----------------------------------------------------------\r\n//       LOAD DONOR ID FROM TOKEN\r\n//   ----------------------------------------------------------*/\r\n//   useEffect(() => {\r\n//     const token = localStorage.getItem(\"token\");\r\n//     if (token) {\r\n//       const decoded: any = jwtDecode(token);\r\n//       setDonorId(decoded.userId);\r\n//     }\r\n//   }, []);\r\n\r\n//   /* ----------------------------------------------------------\r\n//       SOCKET.IO ‚Äì LISTEN FOR HOSPITAL RESPONSE\r\n//   ----------------------------------------------------------*/\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     const socket = io(\"http://localhost:5000\");\r\n//     socketRef.current = socket;\r\n\r\n//     socket.emit(\"register\", donorId);\r\n\r\n//     socket.on(\"schedule_status_updated\", (data) => {\r\n//       setSchedules((prev) =>\r\n//         prev.map((s) =>\r\n//           s._id === data.scheduleId ? { ...s, status: data.status } : s\r\n//         )\r\n//       );\r\n//        alert(`Your donation schedule was ${data.status.toUpperCase()}`);\r\n//     });\r\n\r\n//     return () => socket.disconnect();\r\n//   }, [donorId]);\r\n\r\n//   /* ----------------------------------------------------------\r\n//       FETCH DONATION HISTORY\r\n//   ----------------------------------------------------------*/\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n//       .then((res) => res.json())\r\n//       .then((data) => setHistory(data.donations || []));\r\n//   }, [donorId]);\r\n\r\n//   /* ----------------------------------------------------------\r\n//       FETCH DONOR SCHEDULES\r\n//   ----------------------------------------------------------*/\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     fetch(`http://localhost:5000/schedule/donor/${donorId}`)\r\n//       .then((res) => res.json())\r\n//       .then((data) => setSchedules(data.schedules || []));\r\n//   }, [donorId]);\r\n\r\n//   /* ----------------------------------------------------------\r\n//       FETCH URGENT REQUESTS\r\n//   ----------------------------------------------------------*/\r\n//   useEffect(() => {\r\n//     fetch(\"http://localhost:5000/donor/requests\")\r\n//       .then((res) => res.json())\r\n//       .then((data) => setRequests(data.requests || []));\r\n//   }, []);\r\n\r\n//   /* ----------------------------------------------------------\r\n//       LOCATION\r\n//   ----------------------------------------------------------*/\r\n//   const getLocation = () => {\r\n//     navigator.geolocation.getCurrentPosition(\r\n//       (pos) => {\r\n//         setLocation({\r\n//           lat: pos.coords.latitude,\r\n//           lng: pos.coords.longitude,\r\n//         });\r\n//         alert(\"üìç Location Captured Successfully\");\r\n//       },\r\n//       () => alert(\"‚ùå Please allow location access\")\r\n//     );\r\n//   };\r\n\r\n//   /* ----------------------------------------------------------\r\n//       AVAILABILITY\r\n//   ----------------------------------------------------------*/\r\n//   const markAvailable = async () => {\r\n//     if (!location) return alert(\"Please share your location first\");\r\n\r\n//     await fetch(\"http://localhost:5000/donor/availability\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({\r\n//         donorId,\r\n//         available: true,\r\n//         latitude: location.lat,\r\n//         longitude: location.lng,\r\n//       }),\r\n//     });\r\n\r\n//     setAvailable(true);\r\n//   };\r\n\r\n//   const markUnavailable = async () => {\r\n//     await fetch(\"http://localhost:5000/donor/availability\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ donorId, available: false }),\r\n//     });\r\n\r\n//     setAvailable(false);\r\n//   };\r\n\r\n//   /* ----------------------------------------------------------\r\n//       UI SECTION\r\n//   ----------------------------------------------------------*/\r\n//   return (\r\n//     <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n//       {/* HEADER */}\r\n//       <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n//         <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n//           <Heart className=\"w-7 h-7 fill-white\" />\r\n//           Pulse Bank\r\n//         </div>\r\n\r\n//         <button\r\n//           onClick={() => {\r\n//             localStorage.removeItem(\"token\");\r\n//             window.location.href = \"/\";\r\n//           }}\r\n//           className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n//         >\r\n//           Logout\r\n//         </button>\r\n//       </header>\r\n\r\n//       {/* MAIN CONTENT */}\r\n//       <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\r\n//         {/* HERO */}\r\n//         <HeroCard\r\n//           history={history}\r\n//           location={location}\r\n//           getLocation={getLocation}\r\n//           available={available}\r\n//           markAvailable={markAvailable}\r\n//           markUnavailable={markUnavailable}\r\n//         />\r\n\r\n//         {/* VIDEO */}\r\n//         <VideoSection showVideo={showVideo} setShowVideo={setShowVideo} />\r\n\r\n//         {/* DONATION GUIDE */}\r\n//         <BloodDonationGuide />\r\n\r\n//         {/* COMPATIBILITY */}\r\n//         <CompatibilityChart />\r\n\r\n//         {/* IMPACT STORIES */}\r\n//         <ImpactStories />\r\n\r\n//         {/* ACTIVE REQUESTS */}\r\n//         <UrgentRequests requests={requests} />\r\n\r\n//         {/* SCHEDULED DONATIONS */}\r\n//         <ScheduledRequests schedules={schedules} />\r\n\r\n//         {/* DONATION HISTORY */}\r\n//         <DonationHistory history={history} />\r\n//       </div>\r\n//     </main>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     COMPONENTS\r\n// ----------------------------------------------------------*/\r\n\r\n// function HeroCard({ history, location, getLocation, available, markAvailable, markUnavailable }: any) {\r\n//   return (\r\n//     <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n//       <div className=\"p-10\">\r\n//         <h2 className=\"text-3xl font-bold text-red-700\">Welcome Back, Life Saver!</h2>\r\n//         <p className=\"text-gray-700 mt-2\">Thank you for helping save lives ‚ù§Ô∏è</p>\r\n\r\n//         <div className=\"mt-4 space-y-1\">\r\n//           <p><b>{history.length}</b> total donations</p>\r\n//           <p><b>{history.length * 400}</b> ml contributed</p>\r\n//         </div>\r\n\r\n//         <div className=\"mt-6 flex gap-4 flex-wrap\">\r\n//           <button onClick={getLocation} className=\"bg-blue-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n//             <MapPin /> Share Location\r\n//           </button>\r\n\r\n//           {!available ? (\r\n//             <button onClick={markAvailable} className=\"bg-green-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n//               <CheckCircle /> Mark Available\r\n//             </button>\r\n//           ) : (\r\n//             <button onClick={markUnavailable} className=\"bg-gray-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n//               Disable Availability\r\n//             </button>\r\n//           )}\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className=\"bg-gray-900 flex items-center justify-center\">\r\n//         <Heart className=\"text-gray-400 w-20 h-20\" />\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     VIDEO SECTION\r\n// ----------------------------------------------------------*/\r\n// function VideoSection({ showVideo, setShowVideo }: any) {\r\n//   return !showVideo ? (\r\n//     <div className=\"bg-red-50 mt-8 p-6 rounded-xl flex items-center justify-between border\">\r\n//       <div>\r\n//         <h3 className=\"text-2xl font-bold text-red-700\">Feel Inspired?</h3>\r\n//         <p className=\"text-gray-600\">Watch stories of lives changed through donation.</p>\r\n//       </div>\r\n\r\n//       <button\r\n//         onClick={() => setShowVideo(true)}\r\n//         className=\"bg-red-600 text-white px-6 py-3 rounded-lg flex items-center gap-2\"\r\n//       >\r\n//         <Play className=\"w-5\" /> Watch Video\r\n//       </button>\r\n//     </div>\r\n//   ) : (\r\n//     <div className=\"mt-8 shadow-lg rounded-xl overflow-hidden border\">\r\n//       <iframe className=\"w-full aspect-video\" src=\"https://www.youtube.com/embed/_JlmwDqaYA0\"></iframe>\r\n//       <button\r\n//         onClick={() => setShowVideo(false)}\r\n//         className=\"bg-red-600 w-full text-white py-2 font-semibold\"\r\n//       >\r\n//         Close Video\r\n//       </button>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     SCHEDULED DONATIONS\r\n// ----------------------------------------------------------*/\r\n// function ScheduledRequests({ schedules }: any) {\r\n//   if (!schedules.length) return null;\r\n\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Scheduled Donations</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {schedules.map((s: any, i: number) => (\r\n//           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500\">\r\n//             <h3 className=\"text-xl font-bold text-red-700\">Hospital: {s.requestId?.hospital || \"N/A\"}</h3>\r\n\r\n//             <p className=\"text-gray-700 mt-2 flex items-center gap-2\">\r\n//               <Calendar className=\"w-5\" /> {s.date}\r\n//             </p>\r\n//             <p className=\"text-gray-700 flex items-center gap-2\">\r\n//               <Clock className=\"w-5\" /> {s.time}\r\n//             </p>\r\n\r\n//             <p className=\"mt-3\">\r\n//               Status:{\" \"}\r\n//               <span className=\"px-3 py-1 rounded-lg bg-red-100 text-red-700 font-semibold\">\r\n//                 {s.status.toUpperCase()}\r\n//               </span>\r\n//             </p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     DONATION HISTORY\r\n// ----------------------------------------------------------*/\r\n// function DonationHistory({ history }: any) {\r\n//   if (!history.length) return null;\r\n\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Donation History</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {history.map((h: any, i: number) => (\r\n//           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-green-600\">\r\n//             <p className=\"text-xl font-bold\">+ {h.units} units</p>\r\n//             <p className=\"text-gray-700 mt-1\">{new Date(h.date).toLocaleDateString()}</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     OTHER SECTIONS (GUIDE, COMPATIBILITY, IMPACT)\r\n// ----------------------------------------------------------*/\r\n\r\n// function BloodDonationGuide() {\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Donation Frequency Guide</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {[\r\n//           { type: \"Whole Blood\", wait: 56, year: 6 },\r\n//           { type: \"Plasma\", wait: 2, year: 24 },\r\n//           { type: \"Platelets\", wait: 2, year: 24 },\r\n//           { type: \"Red Cells\", wait: 112, year: 3 },\r\n//         ].map((item, i) => (\r\n//           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n//             <h3 className=\"text-xl font-bold text-red-700\">{item.type}</h3>\r\n//             <p>Can donate every {item.wait} days</p>\r\n//             <p className=\"text-sm text-gray-600\">Yearly limit: {item.year} times</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function CompatibilityChart() {\r\n//   const types = [\r\n//     { type: \"O-\", donate: [\"O-\", \"O+\", \"A-\", \"A+\", \"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n//     { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n//     { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n//     { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n//     { type: \"AB+\", donate: [\"AB+\"] },\r\n//   ];\r\n\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Compatibility Chart</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {types.map((b, i) => (\r\n//           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n//             <h3 className=\"text-xl font-bold text-red-700 mb-2\">{b.type}</h3>\r\n\r\n//             <p className=\"text-gray-700\">Donates to:</p>\r\n\r\n//             <div className=\"flex flex-wrap gap-2 mt-1\">\r\n//               {b.donate.map((d, j) => (\r\n//                 <span key={j} className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\">\r\n//                   {d}\r\n//                 </span>\r\n//               ))}\r\n//             </div>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function ImpactStories() {\r\n//   const stories = [\r\n//     { title: \"Sarah's Second Chance\" },\r\n//     { title: \"Newborn Battle Survivor\" },\r\n//     { title: \"Accident Hero Recovery\" },\r\n//   ];\r\n\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {stories.map((story, i) => (\r\n//           <div key={i} className=\"rounded-xl overflow-hidden shadow bg-red-50 p-4\">\r\n//             <h3 className=\"font-bold text-red-700\">{story.title}</h3>\r\n//             <p className=\"text-gray-600 text-sm mt-1\">Your donation made a real difference</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function UrgentRequests({ requests }: any) {\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">Nearby Hospitals Requesting Blood</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {requests.map((req: any, i: number) => (\r\n//           <div\r\n//             key={i}\r\n//             className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\"\r\n//           >\r\n//             <h3 className=\"text-xl font-bold text-red-700\">{req.hospital}</h3>\r\n\r\n//             <p className=\"text-gray-600 mt-1\">{req.locationKm} km away</p>\r\n\r\n//             <div className=\"flex justify-between mt-3\">\r\n//               <span className=\"font-bold text-red-700\">{req.bloodType}</span>\r\n//               <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n//             </div>\r\n\r\n//             <p className=\"text-sm text-gray-600 mt-2\">Urgency: {req.urgency}</p>\r\n\r\n//             <Link\r\n//               href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n//                 req.hospital\r\n//               )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n//               className=\"w-full\"\r\n//             >\r\n//               <button className=\"w-full mt-4 bg-gradient-to-r from-red-600 to-red-700 text-white py-3 rounded-lg\">\r\n//                 Schedule Donation\r\n//               </button>\r\n//             </Link>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport {\r\n  Heart,\r\n  Droplet,\r\n  MapPin,\r\n  CheckCircle,\r\n  Play,\r\n  Calendar,\r\n  Clock,\r\n  AlertCircle,\r\n} from \"lucide-react\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nexport default function DonorDashboard() {\r\n  const [history, setHistory] = useState<any[]>([]);\r\n  const [requests, setRequests] = useState<any[]>([]);\r\n  const [schedules, setSchedules] = useState<any[]>([]);\r\n  const [donorId, setDonorId] = useState<string | null>(null);\r\n  const [location, setLocation] = useState<{ lat: number; lng: number } | null>(\r\n    null\r\n  );\r\n  const [available, setAvailable] = useState<boolean>(false);\r\n  const [showVideo, setShowVideo] = useState(true); // AUTO-PLAY VIDEO\r\n\r\n  const socketRef = useRef<any>(null);\r\n\r\n  /* ----------------------------------------------------------\r\n      LOAD DONOR ID FROM TOKEN\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      const decoded: any = jwtDecode(token);\r\n      setDonorId(decoded.userId);\r\n    }\r\n  }, []);\r\n\r\n  /* ----------------------------------------------------------\r\n      AUTO-LOCATION & AUTO-AVAILABILITY\r\n  ----------------------------------------------------------*/\r\n  // useEffect(() => {\r\n  //   if (!donorId) return;\r\n\r\n  //   navigator.geolocation.getCurrentPosition(\r\n  //     async (pos) => {\r\n  //       const loc = {\r\n  //         lat: pos.coords.latitude,\r\n  //         lng: pos.coords.longitude,\r\n  //       };\r\n\r\n  //       setLocation(loc);\r\n\r\n  //       await fetch(\"http://localhost:5000/donor/availability\", {\r\n  //         method: \"POST\",\r\n  //         headers: { \"Content-Type\": \"application/json\" },\r\n  //         body: JSON.stringify({\r\n  //           donorId,\r\n  //           available: true,\r\n  //           latitude: loc.lat,\r\n  //           longitude: loc.lng,\r\n  //         }),\r\n  //       });\r\n\r\n  //       setAvailable(true);\r\n  //     },\r\n  //     () => console.log(\"Location denied\")\r\n  //   );\r\n  // }, [donorId]);\r\n\r\n  // /* ----------------------------------------------------------\r\n  //     SOCKET.IO ‚Äì LISTEN FOR HOSPITAL RESPONSE\r\n  // ----------------------------------------------------------*/\r\n  // useEffect(() => {\r\n  //   if (!donorId) return;\r\n\r\n  //   const socket = io(\"http://localhost:5000\");\r\n  //   socketRef.current = socket;\r\n\r\n  //   socket.emit(\"register\", donorId);\r\n\r\n  //   socket.on(\"schedule_status_updated\", (data) => {\r\n  //     setSchedules((prev) =>\r\n  //       prev.map((s) =>\r\n  //         s._id === data.scheduleId ? { ...s, status: data.status } : s\r\n  //       )\r\n  //     );\r\n  //     alert(`Your donation schedule was ${data.status.toUpperCase()}`);\r\n  //   });\r\n\r\n  //   return () => socket.disconnect();\r\n  // }, [donorId]);\r\n  const getLocation = () => {\r\n  if (!navigator.geolocation) {\r\n    alert(\"‚ùå Your browser does not support location\");\r\n    return;\r\n  }\r\n\r\n  navigator.geolocation.getCurrentPosition(\r\n    (pos) => {\r\n      setLocation({\r\n        lat: pos.coords.latitude,\r\n        lng: pos.coords.longitude,\r\n      });\r\n      alert(\"üìç Location captured successfully!\");\r\n    },\r\n    (err) => {\r\n      if (err.code === 1) {\r\n        alert(\"‚ö† Please allow location access in browser popup.\");\r\n      } else {\r\n        alert(\"‚ùå Unable to fetch location\");\r\n      }\r\n    },\r\n    {\r\n      enableHighAccuracy: true,   // forces browser to show permission popup\r\n      timeout: 5000,\r\n      maximumAge: 0,\r\n    }\r\n  );\r\n};\r\n\r\n\r\n  /* ----------------------------------------------------------\r\n      FETCH DONATION HISTORY\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    if (!donorId) return;\r\n\r\n    fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => setHistory(data.donations || []));\r\n  }, [donorId]);\r\n\r\n  /* ----------------------------------------------------------\r\n      FETCH SCHEDULES\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    if (!donorId) return;\r\n\r\n    fetch(`http://localhost:5000/schedule/donor/${donorId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => setSchedules(data.schedules || []));\r\n  }, [donorId]);\r\n\r\n  /* ----------------------------------------------------------\r\n      FETCH URGENT REQUESTS\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/donor/requests\")\r\n      .then((res) => res.json())\r\n      .then((data) => setRequests(data.requests || []));\r\n  }, []);\r\n\r\n  /* ----------------------------------------------------------\r\n      UI SECTION\r\n  ----------------------------------------------------------*/\r\n  return (\r\n    <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n      {/* HEADER */}\r\n      <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n        <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n          <Heart className=\"w-7 h-7 fill-white\" />\r\n          Pulse Bank\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => {\r\n            localStorage.removeItem(\"token\");\r\n            window.location.href = \"/\";\r\n          }}\r\n          className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </header>\r\n\r\n      {/* MAIN CONTENT */}\r\n      <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\r\n        <HeroCard history={history} available={available} />\r\n\r\n        <VideoSection showVideo={showVideo} setShowVideo={setShowVideo} />\r\n\r\n        <BloodDonationGuide />\r\n\r\n        <CompatibilityChart />\r\n\r\n        <ImpactStories />\r\n\r\n        <UrgentRequests requests={requests} />\r\n\r\n        <ScheduledRequests schedules={schedules} />\r\n\r\n        <DonationHistory history={history} />\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    HERO CARD (UI SAME)\r\n----------------------------------------------------------*/\r\nfunction HeroCard({ history, available }: any) {\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n      <div className=\"p-10\">\r\n        <h2 className=\"text-3xl font-bold text-red-700\">\r\n          Welcome Back, Life Saver!\r\n        </h2>\r\n        <p className=\"text-gray-700 mt-2\">Thank you for helping save lives ‚ù§Ô∏è</p>\r\n\r\n        <div className=\"mt-4 space-y-1\">\r\n          <p>\r\n            <b>{history.length}</b> total donations\r\n          </p>\r\n          <p>\r\n            <b>{history.length * 400}</b> ml contributed\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-6 flex gap-4 flex-wrap\">\r\n          <button className=\"bg-green-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n            <CheckCircle /> {available ? \"Available\" : \"Not Available\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-gray-900 flex items-center justify-center\">\r\n        <Heart className=\"text-gray-400 w-20 h-20\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    VIDEO SECTION (FIXED) ‚Äî AUTO PLAY\r\n----------------------------------------------------------*/\r\nfunction VideoSection({ showVideo, setShowVideo }: any) {\r\n  useEffect(() => {\r\n    setShowVideo(true);\r\n  }, []);\r\n\r\n  if (!showVideo) return null;\r\n\r\n  return (\r\n    <div className=\"mt-8 shadow-lg rounded-xl overflow-hidden border\">\r\n      <iframe\r\n        className=\"w-full aspect-video\"\r\n        src=\"https://www.youtube.com/embed/_JlmwDqaYA0?autoplay=1\"\r\n      ></iframe>\r\n\r\n      <button\r\n        onClick={() => setShowVideo(false)}\r\n        className=\"bg-red-600 w-full text-white py-2 font-semibold\"\r\n      >\r\n        Close Video\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    SCHEDULED DONATIONS\r\n----------------------------------------------------------*/\r\nfunction ScheduledRequests({ schedules }: any) {\r\n  if (!schedules.length) return null;\r\n\r\n  return (\r\n    <div className=\"mt-12\">\r\n      <h2 className=\"text-3xl font-bold text-red-700 mb-4\">\r\n        My Scheduled Donations\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {schedules.map((s: any, i: number) => (\r\n          <div\r\n            key={i}\r\n            className=\"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500\"\r\n          >\r\n            <h3 className=\"text-xl font-bold text-red-700\">\r\n              Hospital: {s.requestId?.hospital || \"N/A\"}\r\n            </h3>\r\n\r\n            <p className=\"text-gray-700 mt-2 flex items-center gap-2\">\r\n              <Calendar className=\"w-5\" /> {s.date}\r\n            </p>\r\n            <p className=\"text-gray-700 flex items-center gap-2\">\r\n              <Clock className=\"w-5\" /> {s.time}\r\n            </p>\r\n\r\n            <p className=\"mt-3\">\r\n              Status:{\" \"}\r\n              <span className=\"px-3 py-1 rounded-lg bg-red-100 text-red-700 font-semibold\">\r\n                {s.status.toUpperCase()}\r\n              </span>\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    DONATION HISTORY\r\n----------------------------------------------------------*/\r\nfunction DonationHistory({ history }: any) {\r\n  if (!history.length) return null;\r\n\r\n  return (\r\n    <div className=\"mt-12\">\r\n      <h2 className=\"text-3xl font-bold text-red-700 mb-4\">\r\n        My Donation History\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-3 gap-6\">\r\n        {history.map((h: any, i: number) => (\r\n          <div\r\n            key={i}\r\n            className=\"bg-white p-5 rounded-xl shadow border-l-4 border-green-600\"\r\n          >\r\n            <p className=\"text-xl font-bold\">+ {h.units} units</p>\r\n            <p className=\"text-gray-700 mt-1\">\r\n              {new Date(h.date).toLocaleDateString()}\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    DONATION GUIDE - SAME UI\r\n----------------------------------------------------------*/\r\nfunction BloodDonationGuide() {\r\n  return (\r\n    <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n      <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n        Blood Donation Frequency Guide\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {[\r\n          { type: \"Whole Blood\", wait: 56, year: 6 },\r\n          { type: \"Plasma\", wait: 2, year: 24 },\r\n          { type: \"Platelets\", wait: 2, year: 24 },\r\n          { type: \"Red Cells\", wait: 112, year: 3 },\r\n        ].map((item, i) => (\r\n          <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n            <h3 className=\"text-xl font-bold text-red-700\">{item.type}</h3>\r\n            <p>Can donate every {item.wait} days</p>\r\n            <p className=\"text-sm text-gray-600\">Yearly limit: {item.year} times</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    COMPATIBILITY CHART\r\n----------------------------------------------------------*/\r\nfunction CompatibilityChart() {\r\n  const types = [\r\n    { type: \"O-\", donate: [\"O-\", \"O+\", \"A-\", \"A+\", \"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n    { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n    { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n    { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n    { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n    { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n    { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n    { type: \"AB+\", donate: [\"AB+\"] },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n      <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n        Blood Compatibility Chart\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {types.map((b, i) => (\r\n          <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n            <h3 className=\"text-xl font-bold text-red-700 mb-2\">{b.type}</h3>\r\n\r\n            <p className=\"text-gray-700\">Donates to:</p>\r\n\r\n            <div className=\"flex flex-wrap gap-2 mt-1\">\r\n              {b.donate.map((d, j) => (\r\n                <span\r\n                  key={j}\r\n                  className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\"\r\n                >\r\n                  {d}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    IMPACT STORIES\r\n----------------------------------------------------------*/\r\nfunction ImpactStories() {\r\n  const stories = [\r\n    { title: \"Sarah's Second Chance\" },\r\n    { title: \"Newborn Battle Survivor\" },\r\n    { title: \"Accident Hero Recovery\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n      <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n        Stories of Impact\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-3 gap-6\">\r\n        {stories.map((story, i) => (\r\n          <div\r\n            key={i}\r\n            className=\"rounded-xl overflow-hidden shadow bg-red-50 p-4\"\r\n          >\r\n            <h3 className=\"font-bold text-red-700\">{story.title}</h3>\r\n            <p className=\"text-gray-600 text-sm mt-1\">\r\n              Your donation made a real difference\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n    URGENT REQUESTS\r\n----------------------------------------------------------*/\r\nfunction UrgentRequests({ requests }: any) {\r\n  return (\r\n    <div className=\"mt-12\">\r\n      <h2 className=\"text-3xl font-bold text-red-700 mb-4\">\r\n        Nearby Hospitals Requesting Blood\r\n      </h2>\r\n\r\n      <div className=\"grid md:grid-cols-3 gap-6\">\r\n        {requests.map((req: any, i: number) => (\r\n          <div\r\n            key={i}\r\n            className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\"\r\n          >\r\n            <h3 className=\"text-xl font-bold text-red-700\">{req.hospital}</h3>\r\n\r\n            <p className=\"text-gray-600 mt-1\">{req.locationKm} km away</p>\r\n\r\n            <div className=\"flex justify-between mt-3\">\r\n              <span className=\"font-bold text-red-700\">{req.bloodType}</span>\r\n              <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n            </div>\r\n\r\n            <p className=\"text-sm text-gray-600 mt-2\">Urgency: {req.urgency}</p>\r\n\r\n            <Link\r\n              href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n                req.hospital\r\n              )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n              className=\"w-full\"\r\n            >\r\n              <button className=\"w-full mt-4 bg-gradient-to-r from-red-600 to-red-700 text-white py-3 rounded-lg\">\r\n                Schedule Donation\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}