{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/lib/api-endpoints.ts"],"sourcesContent":["// Change this URL to your deployed backend later\nexport const API_BASE_URL = \"http://localhost:5000\";\n\n// =============================\n// AUTH ENDPOINTS\n// =============================\nexport const AUTH = {\n  register: `${API_BASE_URL}/auth/register`,\n  login: `${API_BASE_URL}/auth/login`,\n  me: `${API_BASE_URL}/auth/me`,  // optional\n};\n\n// =============================\n// DONOR ENDPOINTS\n// =============================\nexport const DONOR = {\n  donationHistory: (donorId: string) =>\n    `${API_BASE_URL}/donor/history/${donorId}`,\n\n  urgentRequests: `${API_BASE_URL}/donor/requests`,\n\n  addDonation: `${API_BASE_URL}/donor/add`,\n};\n\n// =============================\n// HOSPITAL ENDPOINTS\n// =============================\nexport const HOSPITAL = {\n  createRequest: `${API_BASE_URL}/request/add`,\n  getRequests: `${API_BASE_URL}/request/all`,\n};\n\n// =============================\n// RECIPIENT ENDPOINTS\n// =============================\nexport const RECIPIENT = {\n  getRequests: (recipientId: string) =>\n    `${API_BASE_URL}/recipient/requests/${recipientId}`,\n\n  requestStatus: (recipientId: string, requestId: string) =>\n    `${API_BASE_URL}/recipient/requests/${recipientId}/${requestId}`,\n};\n\n// =============================\n// REQUEST (General) ENDPOINTS\n// =============================\nexport const REQUEST = {\n  addRequest: `${API_BASE_URL}/request/add`,\n  getAllRequests: `${API_BASE_URL}/request/all`,\n};\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;;;;;;;;;;;AAC1C,MAAM,eAAe;AAKrB,MAAM,OAAO;IAClB,UAAU,GAAG,aAAa,cAAc,CAAC;IACzC,OAAO,GAAG,aAAa,WAAW,CAAC;IACnC,IAAI,GAAG,aAAa,QAAQ,CAAC;AAC/B;AAKO,MAAM,QAAQ;IACnB,iBAAiB,CAAC,UAChB,GAAG,aAAa,eAAe,EAAE,SAAS;IAE5C,gBAAgB,GAAG,aAAa,eAAe,CAAC;IAEhD,aAAa,GAAG,aAAa,UAAU,CAAC;AAC1C;AAKO,MAAM,WAAW;IACtB,eAAe,GAAG,aAAa,YAAY,CAAC;IAC5C,aAAa,GAAG,aAAa,YAAY,CAAC;AAC5C;AAKO,MAAM,YAAY;IACvB,aAAa,CAAC,cACZ,GAAG,aAAa,oBAAoB,EAAE,aAAa;IAErD,eAAe,CAAC,aAAqB,YACnC,GAAG,aAAa,oBAAoB,EAAE,YAAY,CAAC,EAAE,WAAW;AACpE;AAKO,MAAM,UAAU;IACrB,YAAY,GAAG,aAAa,YAAY,CAAC;IACzC,gBAAgB,GAAG,aAAa,YAAY,CAAC;AAC/C","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/recipient/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Heart, Clock, CheckCircle, AlertCircle, MapPin, Settings, LogOut } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { jwtDecode } from \"jwt-decode\";\nimport { REQUEST } from \"@/lib/api-endpoints\";\n\nexport default function RecipientDashboard() {\n  const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\n  const [recipientId, setRecipientId] = useState<string | null>(null);\n  const [requests, setRequests] = useState([]);\n\n  // ------------------------------\n  // STEP 1: Decode JWT â†’ get recipientId\n  // ------------------------------\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      try {\n        const decoded: any = jwtDecode(token);\n        if (decoded.role === \"recipient\") {\n          setRecipientId(decoded.userId);\n        }\n      } catch (err) {\n        console.error(\"Invalid token:\", err);\n      }\n    }\n  }, []);\n\n  // ------------------------------\n  // STEP 2: Get user location for nearby match features\n  // ------------------------------\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition((pos) => {\n        setLocation({\n          lat: pos.coords.latitude,\n          lng: pos.coords.longitude,\n        });\n      });\n    }\n  }, []);\n\n  // ------------------------------\n  // STEP 3: Fetch Blood Requests From Backend\n  // ------------------------------\n  useEffect(() => {\n    if (!recipientId) return;\n\n    fetch(REQUEST.getAllRequests)\n      .then((res) => res.json())\n      .then((data) => {\n        const allRequests = data.requests || [];\n\n        // Filter only requests made by THIS recipient\n        const myRequests = allRequests.filter(\n          (req: any) => req.requestedBy === recipientId\n        );\n\n        setRequests(myRequests);\n      })\n      .catch((err) => console.error(\"Request fetch error:\", err));\n  }, [recipientId]);\n\n  // --------------------------------\n  // Helpers for status design\n  // --------------------------------\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"Fulfilled\":\n        return \"text-green-600\";\n      case \"Pending\":\n        return \"text-orange-600\";\n      case \"Cancelled\":\n        return \"text-red-600\";\n      default:\n        return \"text-gray-600\";\n    }\n  };\n\n  const getStatusBgColor = (status: string) => {\n    switch (status) {\n      case \"Fulfilled\":\n        return \"bg-green-100\";\n      case \"Pending\":\n        return \"bg-orange-100\";\n      case \"Cancelled\":\n        return \"bg-red-100\";\n      default:\n        return \"bg-gray-100\";\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\n      {/* Header */}\n      <header className=\"bg-gradient-to-r from-red-600 to-red-700 text-white p-6\">\n        <div className=\"max-w-7xl mx-auto flex justify-between items-center\">\n          <div className=\"flex items-center gap-3\">\n            <Heart className=\"w-8 h-8 fill-white\" />\n            <h1 className=\"text-3xl font-bold\">Pulse Bank - Recipient</h1>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            {location && (\n              <div className=\"flex items-center gap-2 bg-red-500 px-4 py-2 rounded-lg\">\n                <MapPin className=\"w-5 h-5\" />\n                <span className=\"text-sm\">Location Active</span>\n              </div>\n            )}\n            <button className=\"p-2 hover:bg-red-500 rounded-lg transition\">\n              <Settings className=\"w-6 h-6\" />\n            </button>\n            <Link href=\"/\" className=\"p-2 hover:bg-red-500 rounded-lg transition\">\n              <LogOut className=\"w-6 h-6\" />\n            </Link>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto p-6 space-y-8\">\n        {/* Welcome Section */}\n        <div className=\"bg-white rounded-xl shadow-lg p-8 border-l-4 border-red-600\">\n          <h2 className=\"text-3xl font-bold mb-2\">Your Blood Request Status</h2>\n          <p className=\"text-gray-600\">\n            Our AI system is finding the best matches for you. Stay updated on your request progress below.\n          </p>\n        </div>\n\n        {/* Button: New Request */}\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-2xl font-bold\">Your Blood Requests</h2>\n          <Link\n            href=\"/recipient/create-request\"\n            className=\"px-6 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition\"\n          >\n            + New Request\n          </Link>\n        </div>\n\n        {/* Request Cards */}\n        <div className=\"space-y-6\">\n          {requests.length === 0 && (\n            <p className=\"text-gray-600\">You have not created any requests yet.</p>\n          )}\n\n          {requests.map((req: any, i: number) => (\n            <div\n              key={i}\n              className={`bg-white rounded-xl shadow-lg p-8 border-l-4 ${\n                req.status === \"Fulfilled\"\n                  ? \"border-green-500\"\n                  : req.status === \"Pending\"\n                  ? \"border-orange-500\"\n                  : \"border-red-500\"\n              }`}\n            >\n              <div className=\"grid md:grid-cols-3 gap-8\">\n                {/* Blood Info */}\n                <div>\n                  <h3 className=\"text-sm text-gray-600 font-semibold mb-2\">\n                    BLOOD TYPE NEEDED\n                  </h3>\n                  <div className=\"flex items-start gap-4\">\n                    <div className=\"text-5xl font-bold text-red-600\">{req.bloodType}</div>\n                    <div>\n                      <p className=\"text-2xl font-bold\">{req.unitsNeeded}</p>\n                      <p className=\"text-sm text-gray-600\">units</p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Status */}\n                <div>\n                  <h3 className=\"text-sm text-gray-600 font-semibold mb-2\">STATUS</h3>\n                  <div\n                    className={`inline-flex items-center gap-2 px-4 py-2 rounded-lg ${getStatusBgColor(\n                      req.status\n                    )}`}\n                  >\n                    {req.status === \"Fulfilled\" ? (\n                      <>\n                        <CheckCircle className=\"w-5 h-5 text-green-600\" />\n                        <span className=\"font-bold text-green-600\">Fulfilled</span>\n                      </>\n                    ) : (\n                      <>\n                        <Clock className=\"w-5 h-5 text-orange-600\" />\n                        <span className=\"font-bold text-orange-600\">Pending</span>\n                      </>\n                    )}\n                  </div>\n                </div>\n\n                {/* Actions */}\n                <div className=\"flex flex-col gap-3 justify-center\">\n                  <button className=\"px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition\">\n                    View Details\n                  </button>\n                  <button className=\"px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition\">\n                    Track Progress\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        {/* How It Works */}\n        <div className=\"bg-gradient-to-r from-red-50 to-red-100 rounded-xl p-8 border-2 border-red-200\">\n          <h2 className=\"text-2xl font-bold mb-6\">How AI Matching Works</h2>\n          <div className=\"grid md:grid-cols-4 gap-6\">\n            {[\n              { step: 1, title: \"Request Submitted\", desc: \"Your blood request is registered.\" },\n              { step: 2, title: \"AI Analysis\", desc: \"System analyzes compatibility & proximity.\" },\n              { step: 3, title: \"Donor Match\", desc: \"Compatible donors identified.\" },\n              { step: 4, title: \"Delivery\", desc: \"Blood prepared & delivered.\" },\n            ].map((item) => (\n              <div key={item.step} className=\"bg-white rounded-lg p-4\">\n                <div className=\"w-10 h-10 bg-red-600 text-white rounded-full flex items-center justify-center font-bold mb-3\">\n                  {item.step}\n                </div>\n                <h3 className=\"font-bold text-gray-900 mb-1\">{item.title}</h3>\n                <p className=\"text-sm text-gray-600\">{item.desc}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}