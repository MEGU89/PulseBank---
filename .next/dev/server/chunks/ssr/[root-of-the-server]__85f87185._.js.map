{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/lib/api-endpoints.ts"],"sourcesContent":["// Change this URL to your deployed backend later\nexport const API_BASE_URL = \"http://localhost:5000\";\n\n// =============================\n// AUTH ENDPOINTS\n// =============================\nexport const AUTH = {\n  register: `${API_BASE_URL}/auth/register`,\n  login: `${API_BASE_URL}/auth/login`,\n  me: `${API_BASE_URL}/auth/me`,  // optional\n};\n\n// =============================\n// DONOR ENDPOINTS\n// =============================\nexport const DONOR = {\n  donationHistory: (donorId: string) =>\n    `${API_BASE_URL}/donor/history/${donorId}`,\n\n  urgentRequests: `${API_BASE_URL}/donor/requests`,\n\n  addDonation: `${API_BASE_URL}/donor/add`,\n};\n\n// =============================\n// HOSPITAL ENDPOINTS\n// =============================\nexport const HOSPITAL = {\n  createRequest: `${API_BASE_URL}/request/add`,\n  getRequests: `${API_BASE_URL}/request/all`,\n};\n\n// =============================\n// RECIPIENT ENDPOINTS\n// =============================\nexport const RECIPIENT = {\n  getRequests: (recipientId: string) =>\n    `${API_BASE_URL}/recipient/requests/${recipientId}`,\n\n  requestStatus: (recipientId: string, requestId: string) =>\n    `${API_BASE_URL}/recipient/requests/${recipientId}/${requestId}`,\n};\n\n// =============================\n// REQUEST (General) ENDPOINTS\n// =============================\nexport const REQUEST = {\n  addRequest: `${API_BASE_URL}/request/add`,\n  getAllRequests: `${API_BASE_URL}/request/all`,\n};\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;;;;;;;;;;;AAC1C,MAAM,eAAe;AAKrB,MAAM,OAAO;IAClB,UAAU,GAAG,aAAa,cAAc,CAAC;IACzC,OAAO,GAAG,aAAa,WAAW,CAAC;IACnC,IAAI,GAAG,aAAa,QAAQ,CAAC;AAC/B;AAKO,MAAM,QAAQ;IACnB,iBAAiB,CAAC,UAChB,GAAG,aAAa,eAAe,EAAE,SAAS;IAE5C,gBAAgB,GAAG,aAAa,eAAe,CAAC;IAEhD,aAAa,GAAG,aAAa,UAAU,CAAC;AAC1C;AAKO,MAAM,WAAW;IACtB,eAAe,GAAG,aAAa,YAAY,CAAC;IAC5C,aAAa,GAAG,aAAa,YAAY,CAAC;AAC5C;AAKO,MAAM,YAAY;IACvB,aAAa,CAAC,cACZ,GAAG,aAAa,oBAAoB,EAAE,aAAa;IAErD,eAAe,CAAC,aAAqB,YACnC,GAAG,aAAa,oBAAoB,EAAE,YAAY,CAAC,EAAE,WAAW;AACpE;AAKO,MAAM,UAAU;IACrB,YAAY,GAAG,aAAa,YAAY,CAAC;IACzC,gBAAgB,GAAG,aAAa,YAAY,CAAC;AAC/C","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/donor/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { DONOR } from \"@/lib/api-endpoints\";\r\n\r\nexport default function DonorDashboard() {\r\n  const [history, setHistory] = useState([]);\r\n  const [requests, setRequests] = useState([]);\r\n  const [donorId, setDonorId] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // ------------------------------\r\n  // STEP 1: Decode JWT â†’ get donorId\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n\r\n    if (token) {\r\n      try {\r\n        const decoded: any = jwtDecode(token);\r\n        setDonorId(decoded.userId); // matches backend token payload\r\n      } catch (err) {\r\n        console.error(\"Invalid token:\", err);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // ------------------------------\r\n  // STEP 2: Fetch donation history\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    if (!donorId) return;\r\n\r\n    const url = DONOR.donationHistory(donorId);\r\n\r\n    fetch(url)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        setHistory(data.donations || []);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => console.error(\"History fetch error:\", err));\r\n  }, [donorId]);\r\n\r\n  // ------------------------------\r\n  // STEP 3: Fetch urgent requests\r\n  // ------------------------------\r\n  useEffect(() => {\r\n    fetch(DONOR.urgentRequests)\r\n      .then((res) => res.json())\r\n      .then((data) => setRequests(data.requests || []))\r\n      .catch((err) => console.error(\"Urgent requests error:\", err));\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-3xl font-bold mb-6\">Donor Dashboard</h2>\r\n\r\n      {/* Donation History */}\r\n      <h3 className=\"text-2xl font-semibold mb-4\">Donation History</h3>\r\n\r\n      {loading && <p className=\"text-gray-500\">Loading your donation history...</p>}\r\n\r\n      {!loading && history.length === 0 && (\r\n        <p className=\"text-gray-600\">No donation records found.</p>\r\n      )}\r\n\r\n      {!loading && history.length > 0 && (\r\n        <table className=\"border w-full mb-8\">\r\n          <thead className=\"bg-gray-100\">\r\n            <tr>\r\n              <th className=\"p-2 border\">Date</th>\r\n              <th className=\"p-2 border\">Hospital</th>\r\n              <th className=\"p-2 border\">Units</th>\r\n              <th className=\"p-2 border\">Status</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {history.map((item: any, index) => (\r\n              <tr key={index}>\r\n                <td className=\"p-2 border\">{item.date?.slice(0, 10)}</td>\r\n                <td className=\"p-2 border\">{item.hospital}</td>\r\n                <td className=\"p-2 border\">{item.units}</td>\r\n                <td className=\"p-2 border\">{item.status}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n\r\n      {/* Urgent Requests */}\r\n      <h3 className=\"text-2xl font-semibold mb-4\">Urgent Blood Requests</h3>\r\n\r\n      {requests.length === 0 && <p className=\"text-gray-600\">No urgent requests available.</p>}\r\n\r\n      {requests.map((req: any, index) => (\r\n        <div key={index} className=\"border p-4 shadow-sm rounded mb-4 bg-white\">\r\n          <p><strong>Blood Needed:</strong> {req.bloodType}</p>\r\n          <p><strong>Units:</strong> {req.unitsNeeded}</p>\r\n          <p><strong>Hospital:</strong> {req.hospital}</p>\r\n          <p><strong>Urgency:</strong> {req.urgency}</p>\r\n          <p><strong>Distance:</strong> {req.locationKm} km</p>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/node_modules/jwt-decode/build/esm/index.js"],"sourcesContent":["export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,0BAA0B;AACvC;AACA,kBAAkB,SAAS,CAAC,IAAI,GAAG;AACnC,SAAS,iBAAiB,GAAG;IACzB,OAAO,mBAAmB,KAAK,KAAK,OAAO,CAAC,QAAQ,CAAC,GAAG;QACpD,IAAI,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,IAAI,WAAW;QACnD,IAAI,KAAK,MAAM,GAAG,GAAG;YACjB,OAAO,MAAM;QACjB;QACA,OAAO,MAAM;IACjB;AACJ;AACA,SAAS,gBAAgB,GAAG;IACxB,IAAI,SAAS,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM;IAClD,OAAQ,OAAO,MAAM,GAAG;QACpB,KAAK;YACD;QACJ,KAAK;YACD,UAAU;YACV;QACJ,KAAK;YACD,UAAU;YACV;QACJ;YACI,MAAM,IAAI,MAAM;IACxB;IACA,IAAI;QACA,OAAO,iBAAiB;IAC5B,EACA,OAAO,KAAK;QACR,OAAO,KAAK;IAChB;AACJ;AACO,SAAS,UAAU,KAAK,EAAE,OAAO;IACpC,IAAI,OAAO,UAAU,UAAU;QAC3B,MAAM,IAAI,kBAAkB;IAChC;IACA,WAAW,CAAC,UAAU,CAAC,CAAC;IACxB,MAAM,MAAM,QAAQ,MAAM,KAAK,OAAO,IAAI;IAC1C,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI;IAClC,IAAI,OAAO,SAAS,UAAU;QAC1B,MAAM,IAAI,kBAAkB,CAAC,uCAAuC,EAAE,MAAM,GAAG;IACnF;IACA,IAAI;IACJ,IAAI;QACA,UAAU,gBAAgB;IAC9B,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,kDAAkD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC7G;IACA,IAAI;QACA,OAAO,KAAK,KAAK,CAAC;IACtB,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,gDAAgD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC3G;AACJ","ignoreList":[0],"debugId":null}}]
}