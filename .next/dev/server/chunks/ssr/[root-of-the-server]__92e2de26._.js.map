{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/hooks/useLocationDetection.ts"],"sourcesContent":["import { useState, useCallback } from \"react\";\r\n\r\nexport interface LocationData {\r\n  latitude: number;\r\n  longitude: number;\r\n  address?: string;\r\n}\r\n\r\ninterface UseLocationDetectionReturn {\r\n  location: LocationData | null;\r\n  isLoading: boolean;\r\n  error: string | null;\r\n  detectedAddress: string | null;\r\n  requestLocation: () => void;\r\n  clearError: () => void;\r\n}\r\n\r\nexport const useLocationDetection = (): UseLocationDetectionReturn => {\r\n  const [location, setLocation] = useState<LocationData | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [detectedAddress, setDetectedAddress] = useState<string | null>(null);\r\n\r\n  const getAddressFromCoordinates = async (\r\n    latitude: number,\r\n    longitude: number\r\n  ): Promise<string> => {\r\n    try {\r\n      const response = await fetch(\r\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`\r\n      );\r\n      const data = await response.json();\r\n\r\n      if (data.address) {\r\n        const addr = data.address;\r\n        const parts = [];\r\n\r\n        // Add house number and street if available\r\n        if (addr.house_number) parts.push(addr.house_number);\r\n        if (addr.road) parts.push(addr.road);\r\n\r\n        // Add suburb/neighbourhood/village (sector/area) - try multiple fields\r\n        if (addr.suburb) parts.push(addr.suburb);\r\n        else if (addr.neighbourhood) parts.push(addr.neighbourhood);\r\n        else if (addr.village) parts.push(addr.village);\r\n        else if (addr.hamlet) parts.push(addr.hamlet);\r\n\r\n        // Add city/town\r\n        if (addr.city) parts.push(addr.city);\r\n        else if (addr.town) parts.push(addr.town);\r\n\r\n        // Add postcode/pincode\r\n        if (addr.postcode) parts.push(`Pin Code ${addr.postcode}`);\r\n\r\n        // Add state\r\n        if (addr.state) parts.push(addr.state);\r\n\r\n        // Add country\r\n        if (addr.country) parts.push(addr.country);\r\n\r\n        const fullAddress = parts.filter(Boolean).join(\", \");\r\n        return fullAddress || \"Location detected\";\r\n      }\r\n\r\n      return \"Location detected\";\r\n    } catch (err) {\r\n      console.error(\"Error fetching address:\", err);\r\n      return \"Location detected\";\r\n    }\r\n  };\r\n\r\n  const requestLocation = useCallback(() => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    if (!navigator.geolocation) {\r\n      setError(\"Geolocation not supported on this device\");\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (position) => {\r\n        try {\r\n          const { latitude, longitude } = position.coords;\r\n          \r\n          // Get address from coordinates\r\n          const address = await getAddressFromCoordinates(latitude, longitude);\r\n          \r\n          setLocation({ latitude, longitude, address });\r\n          setDetectedAddress(address);\r\n          setError(null);\r\n        } catch (err) {\r\n          console.error(\"Error processing location:\", err);\r\n          setError(\"Failed to process location\");\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      },\r\n      (geoError) => {\r\n        let errorMessage = \"Failed to get location\";\r\n        \r\n        if (geoError.code === geoError.PERMISSION_DENIED) {\r\n          errorMessage = \"Location permission denied. Enable it in settings.\";\r\n        } else if (geoError.code === geoError.POSITION_UNAVAILABLE) {\r\n          errorMessage = \"Location unavailable. Try again later.\";\r\n        } else if (geoError.code === geoError.TIMEOUT) {\r\n          errorMessage = \"Location request timed out. Try again.\";\r\n        }\r\n        \r\n        setError(errorMessage);\r\n        setLocation(null);\r\n        setIsLoading(false);\r\n      },\r\n      { timeout: 10000, enableHighAccuracy: true }\r\n    );\r\n  }, []);\r\n\r\n  const clearError = useCallback(() => {\r\n    setError(null);\r\n  }, []);\r\n\r\n  return {\r\n    location,\r\n    isLoading,\r\n    error,\r\n    detectedAddress,\r\n    requestLocation,\r\n    clearError,\r\n  };\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/components/location-detector.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { MapPin, Loader, AlertCircle, CheckCircle } from \"lucide-react\";\r\nimport { useLocationDetection } from \"@/hooks/useLocationDetection\";\r\n\r\ninterface LocationDetectorProps {\r\n  onLocationDetected: (lat: number, lng: number) => void;\r\n  label?: string;\r\n  showMap?: boolean;\r\n}\r\n\r\nexport const LocationDetector = ({\r\n  onLocationDetected,\r\n  label = \"Your Location\",\r\n  showMap = false,\r\n}: LocationDetectorProps) => {\r\n  const { location, isLoading, error, detectedAddress, requestLocation, clearError } = useLocationDetection();\r\n  const [showFullMap, setShowFullMap] = useState(false);\r\n\r\n  const handleLocationConfirm = () => {\r\n    if (location) {\r\n      onLocationDetected(location.latitude, location.longitude);\r\n      setShowFullMap(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <label className=\"block text-sm font-bold text-gray-700 mb-2\">\r\n        {label} <span className=\"text-red-500\">*</span>\r\n      </label>\r\n\r\n      {/* Location Input Display */}\r\n      <div className=\"relative\">\r\n        <div className=\"flex items-center gap-2 w-full p-3 border border-gray-300 rounded-lg bg-white\">\r\n          <MapPin className=\"w-5 h-5 text-gray-400\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Click 'Detect Location' to enable location services\"\r\n            value={detectedAddress || \"\"}\r\n            readOnly\r\n            className=\"flex-1 outline-none bg-transparent text-gray-700 placeholder-gray-400\"\r\n          />\r\n          <button\r\n            onClick={requestLocation}\r\n            disabled={isLoading}\r\n            className=\"px-4 py-1 bg-blue-600 text-white rounded-lg text-sm font-semibold hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2\"\r\n          >\r\n            {isLoading ? (\r\n              <>\r\n                <Loader className=\"w-4 h-4 animate-spin\" />\r\n                Detecting...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <MapPin className=\"w-4 h-4\" />\r\n                Detect Location\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Error Message */}\r\n      {error && (\r\n        <div className=\"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2\">\r\n          <AlertCircle className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" />\r\n          <div className=\"flex-1\">\r\n            <p className=\"text-red-800 font-semibold text-sm\">Error</p>\r\n            <p className=\"text-red-700 text-sm\">{error}</p>\r\n          </div>\r\n          <button\r\n            onClick={clearError}\r\n            className=\"ml-2 text-red-600 hover:text-red-700 font-semibold text-sm\"\r\n          >\r\n            Dismiss\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Map Display (Optional) */}\r\n      {showFullMap && location && (\r\n        <div className=\"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200\">\r\n          <div className=\"mb-3\">\r\n            <p className=\"text-sm font-semibold text-gray-700 mb-2\">\r\n              Confirm Location:\r\n            </p>\r\n            <p className=\"text-sm text-gray-600\">\r\n              {detectedAddress || `${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}`}\r\n            </p>\r\n          </div>\r\n          \r\n          {/* Map Embed */}\r\n          <div className=\"w-full h-64 rounded-lg overflow-hidden mb-3\">\r\n            <iframe\r\n              width=\"100%\"\r\n              height=\"100%\"\r\n              frameBorder=\"0\"\r\n              src={`https://www.openstreetmap.org/export/embed.html?bbox=${location.longitude - 0.01},${location.latitude - 0.01},${location.longitude + 0.01},${location.latitude + 0.01}&layer=mapnik&marker=${location.latitude},${location.longitude}`}\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleLocationConfirm}\r\n            className=\"w-full bg-blue-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-700\"\r\n          >\r\n            Use This Location\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Location Coordinates (for reference) */}\r\n      {location && !showFullMap && (\r\n        <div className=\"mt-2 text-xs text-gray-500 ml-2\">\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAYO,MAAM,mBAAmB,CAAC,EAC/B,kBAAkB,EAClB,QAAQ,eAAe,EACvB,UAAU,KAAK,EACO;IACtB,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE,eAAe,EAAE,eAAe,EAAE,UAAU,EAAE,GAAG,IAAA,qJAAoB;IACzG,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,wBAAwB;QAC5B,IAAI,UAAU;YACZ,mBAAmB,SAAS,QAAQ,EAAE,SAAS,SAAS;YACxD,eAAe;QACjB;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAM,WAAU;;oBACd;oBAAM;kCAAC,8OAAC;wBAAK,WAAU;kCAAe;;;;;;;;;;;;0BAIzC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,oNAAM;4BAAC,WAAU;;;;;;sCAClB,8OAAC;4BACC,MAAK;4BACL,aAAY;4BACZ,OAAO,mBAAmB;4BAC1B,QAAQ;4BACR,WAAU;;;;;;sCAEZ,8OAAC;4BACC,SAAS;4BACT,UAAU;4BACV,WAAU;sCAET,0BACC;;kDACE,8OAAC,gNAAM;wCAAC,WAAU;;;;;;oCAAyB;;6DAI7C;;kDACE,8OAAC,oNAAM;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;;YASvC,uBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,mOAAW;wBAAC,WAAU;;;;;;kCACvB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAAqC;;;;;;0CAClD,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAEvC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAOJ,eAAe,0BACd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;0CAA2C;;;;;;0CAGxD,8OAAC;gCAAE,WAAU;0CACV,mBAAmB,GAAG,SAAS,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,SAAS,SAAS,CAAC,OAAO,CAAC,IAAI;;;;;;;;;;;;kCAK3F,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BACC,OAAM;4BACN,QAAO;4BACP,aAAY;4BACZ,KAAK,CAAC,qDAAqD,EAAE,SAAS,SAAS,GAAG,KAAK,CAAC,EAAE,SAAS,QAAQ,GAAG,KAAK,CAAC,EAAE,SAAS,SAAS,GAAG,KAAK,CAAC,EAAE,SAAS,QAAQ,GAAG,KAAK,qBAAqB,EAAE,SAAS,QAAQ,CAAC,CAAC,EAAE,SAAS,SAAS,EAAE;;;;;;;;;;;kCAIhP,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;YAOJ,YAAY,CAAC,6BACZ,8OAAC;gBAAI,WAAU;;;;;;;;;;;;AAKvB","debugId":null}}]
}