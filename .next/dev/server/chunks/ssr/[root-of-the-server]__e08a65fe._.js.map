{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/components/profile-menu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { User } from \"lucide-react\";\r\n\r\nexport default function ProfileMenu() {\r\n  const [open, setOpen] = useState(false);\r\n  const [user, setUser] = useState<any | null>(null);\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(\"user\");\r\n      if (raw) setUser(JSON.parse(raw));\r\n    } catch (e) {\r\n      setUser(null);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const onDoc = (e: MouseEvent) => {\r\n      if (!ref.current) return;\r\n      if (!ref.current.contains(e.target as Node)) setOpen(false);\r\n    };\r\n    document.addEventListener(\"click\", onDoc);\r\n    return () => document.removeEventListener(\"click\", onDoc);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n    // navigate to home using Next router\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative inline-block\">\r\n      <button\r\n        onClick={() => setOpen((s) => !s)}\r\n        className=\"flex items-center gap-2 p-2 rounded-full hover:bg-gray-100\"\r\n        aria-label=\"Profile\"\r\n      >\r\n        <div className=\"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center\">\r\n          {user?.fullName ? user.fullName.charAt(0).toUpperCase() : <User className=\"w-5 h-5\" />}\r\n        </div>\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border z-50\">\r\n          <div className=\"p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 rounded-full bg-red-600 text-white flex items-center justify-center text-lg font-semibold\">\r\n                {user?.fullName ? user.fullName.charAt(0).toUpperCase() : \"U\"}\r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold\">{user?.fullName || \"Unknown\"}</div>\r\n                <div className=\"text-sm text-gray-500\">{user?.email || \"No email\"}</div>\r\n                <div className=\"text-xs text-gray-400\">{user?.role || \"guest\"}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-3 text-sm text-gray-700\">\r\n              {user?.phone && <div>Phone: {user.phone}</div>}\r\n              {user?.hospitalName && <div>Hospital: {user.hospitalName}</div>}\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={() => { setOpen(false); router.push('/profile'); }}\r\n                className=\"flex-1 bg-gray-100 py-2 rounded-md text-sm\"\r\n              >\r\n                View Profile\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"flex-1 bg-red-600 text-white py-2 rounded-md text-sm\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAa;IAC7C,MAAM,MAAM,IAAA,+MAAM,EAAwB;IAC1C,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,IAAI;YACF,MAAM,MAAM,aAAa,OAAO,CAAC;YACjC,IAAI,KAAK,QAAQ,KAAK,KAAK,CAAC;QAC9B,EAAE,OAAO,GAAG;YACV,QAAQ;QACV;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,MAAM,QAAQ,CAAC;YACb,IAAI,CAAC,IAAI,OAAO,EAAE;YAClB,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW,QAAQ;QACvD;QACA,SAAS,gBAAgB,CAAC,SAAS;QACnC,OAAO,IAAM,SAAS,mBAAmB,CAAC,SAAS;IACrD,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,qCAAqC;QACrC,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,8OAAC;QAAI,KAAK;QAAK,WAAU;;0BACvB,8OAAC;gBACC,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;gBAC/B,WAAU;gBACV,cAAW;0BAEX,cAAA,8OAAC;oBAAI,WAAU;8BACZ,MAAM,WAAW,KAAK,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW,mBAAK,8OAAC,0MAAI;wBAAC,WAAU;;;;;;;;;;;;;;;;YAI7E,sBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACZ,MAAM,WAAW,KAAK,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK;;;;;;8CAE5D,8OAAC;;sDACC,8OAAC;4CAAI,WAAU;sDAAiB,MAAM,YAAY;;;;;;sDAClD,8OAAC;4CAAI,WAAU;sDAAyB,MAAM,SAAS;;;;;;sDACvD,8OAAC;4CAAI,WAAU;sDAAyB,MAAM,QAAQ;;;;;;;;;;;;;;;;;;sCAI1D,8OAAC;4BAAI,WAAU;;gCACZ,MAAM,uBAAS,8OAAC;;wCAAI;wCAAQ,KAAK,KAAK;;;;;;;gCACtC,MAAM,8BAAgB,8OAAC;;wCAAI;wCAAW,KAAK,YAAY;;;;;;;;;;;;;sCAG1D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;wCAAQ,QAAQ;wCAAQ,OAAO,IAAI,CAAC;oCAAa;oCAC1D,WAAU;8CACX;;;;;;8CAID,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf","debugId":null}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/hooks/useSocket.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef } from \"react\"\r\nimport { io, Socket } from \"socket.io-client\"\r\n\r\nlet globalSocket: Socket | null = null\r\n\r\nexport function useSocket() {\r\n  const socketRef = useRef<Socket | null>(null)\r\n\r\n  useEffect(() => {\r\n    // Reuse global socket instance to avoid multiple connections\r\n    if (!globalSocket) {\r\n      globalSocket = io(\"http://localhost:5000\", {\r\n        reconnection: true,\r\n        reconnectionDelay: 1000,\r\n        reconnectionDelayMax: 5000,\r\n        reconnectionAttempts: 5,\r\n      })\r\n\r\n      globalSocket.on(\"connect\", () => {\r\n        console.log(\"✅ Socket connected:\", globalSocket?.id)\r\n      })\r\n\r\n      globalSocket.on(\"disconnect\", () => {\r\n        console.log(\"❌ Socket disconnected\")\r\n      })\r\n\r\n      globalSocket.on(\"error\", (error) => {\r\n        console.error(\"Socket error:\", error)\r\n      })\r\n    }\r\n\r\n    socketRef.current = globalSocket\r\n\r\n    return () => {\r\n      // Don't disconnect here; keep the socket alive for reuse\r\n    }\r\n  }, [])\r\n\r\n  return socketRef\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKA,IAAI,eAA8B;AAE3B,SAAS;IACd,MAAM,YAAY,IAAA,+MAAM,EAAgB;IAExC,IAAA,kNAAS,EAAC;QACR,6DAA6D;QAC7D,IAAI,CAAC,cAAc;YACjB,eAAe,IAAA,8LAAE,EAAC,yBAAyB;gBACzC,cAAc;gBACd,mBAAmB;gBACnB,sBAAsB;gBACtB,sBAAsB;YACxB;YAEA,aAAa,EAAE,CAAC,WAAW;gBACzB,QAAQ,GAAG,CAAC,uBAAuB,cAAc;YACnD;YAEA,aAAa,EAAE,CAAC,cAAc;gBAC5B,QAAQ,GAAG,CAAC;YACd;YAEA,aAAa,EAAE,CAAC,SAAS,CAAC;gBACxB,QAAQ,KAAK,CAAC,iBAAiB;YACjC;QACF;QAEA,UAAU,OAAO,GAAG;QAEpB,OAAO;QACL,yDAAyD;QAC3D;IACF,GAAG,EAAE;IAEL,OAAO;AACT","debugId":null}}]
}