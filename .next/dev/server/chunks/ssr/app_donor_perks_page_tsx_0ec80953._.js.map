{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/donor/perks/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { Heart, ArrowLeft } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function DonorPerks() {\r\n  const [perks, setPerks] = useState<any[]>([]);\r\n  const [totalDonations, setTotalDonations] = useState(0);\r\n  const [lastCheckupDate, setLastCheckupDate] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    const stored = localStorage.getItem(\"user\");\r\n    if (stored) {\r\n      const user = JSON.parse(stored);\r\n      setPerks(user.perks || []);\r\n      setTotalDonations(user.totalDonations || 0);\r\n      setLastCheckupDate(user.lastHealthCheckupDate ? new Date(user.lastHealthCheckupDate).toLocaleDateString() : null);\r\n    }\r\n\r\n    // Listen for updates\r\n    const handleUserUpdate = (event: any) => {\r\n      const updatedUser = event.detail;\r\n      setPerks(updatedUser.perks || []);\r\n      setTotalDonations(updatedUser.totalDonations || 0);\r\n      setLastCheckupDate(updatedUser.lastHealthCheckupDate ? new Date(updatedUser.lastHealthCheckupDate).toLocaleDateString() : null);\r\n    };\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      window.addEventListener(\"user-updated\", handleUserUpdate);\r\n      return () => window.removeEventListener(\"user-updated\", handleUserUpdate);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <main className=\"min-h-screen bg-linear-to-br from-white via-red-50 to-white\">\r\n      <header className=\"bg-red-600 text-white p-6 shadow-lg sticky top-0 z-20\">\r\n        <div className=\"max-w-2xl mx-auto flex items-center gap-4\">\r\n          <Link href=\"/donor/dashboard\" className=\"hover:opacity-80 transition\">\r\n            <ArrowLeft className=\"w-6 h-6\" />\r\n          </Link>\r\n          <Heart className=\"w-8 h-8 fill-white\" />\r\n          <h1 className=\"text-2xl font-bold\">My Donor Rewards</h1>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"max-w-2xl mx-auto p-6\">\r\n        <div className=\"bg-white rounded-2xl shadow-xl p-8 space-y-8\">\r\n\r\n          {/* Rewards Overview */}\r\n          <div className=\"grid md:grid-cols-2 gap-4\">\r\n            <div className=\"bg-gradient-to-br from-purple-100 to-purple-200 p-5 rounded-xl border-2 border-purple-400 shadow-lg\">\r\n              <p className=\"text-sm text-purple-700 font-semibold\">Total Donations</p>\r\n              <p className=\"text-3xl font-bold text-purple-900 mt-2\">{totalDonations}</p>\r\n              <p className=\"text-xs text-purple-600 mt-1\">üèÜ Keep donating for more rewards</p>\r\n            </div>\r\n            \r\n            <div className=\"bg-gradient-to-br from-blue-100 to-blue-200 p-5 rounded-xl border-2 border-blue-400 shadow-lg\">\r\n              <p className=\"text-sm text-blue-700 font-semibold\">Last Checkup</p>\r\n              <p className=\"text-lg font-bold text-blue-900 mt-2\">{lastCheckupDate || \"No checkups yet\"}</p>\r\n              <p className=\"text-xs text-blue-600 mt-1\">üìÖ Available every 90 days</p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Available Perks */}\r\n          {perks && perks.length > 0 ? (\r\n            <div className=\"space-y-3\">\r\n              <h3 className=\"font-bold text-gray-800 text-lg\">üìã Your Health Perks</h3>\r\n              {perks.map((perk: any, idx: number) => {\r\n                const expiryDate = new Date(perk.expiryDate);\r\n                const daysLeft = Math.ceil((expiryDate.getTime() - new Date().getTime()) / (1000 * 60 * 60 * 24));\r\n                const isExpired = perk.status === \"expired\" || daysLeft < 0;\r\n                const isUsed = perk.status === \"used\";\r\n                const isAvailable = perk.status === \"available\" && !isExpired;\r\n\r\n                return (\r\n                  <div\r\n                    key={idx}\r\n                    className={`p-5 rounded-xl border-2 shadow-md transition-all ${\r\n                      isAvailable\r\n                        ? \"bg-gradient-to-r from-green-50 to-emerald-50 border-green-400\"\r\n                        : isUsed\r\n                        ? \"bg-gradient-to-r from-gray-50 to-gray-100 border-gray-300\"\r\n                        : \"bg-gradient-to-r from-red-50 to-orange-50 border-red-300\"\r\n                    }`}\r\n                  >\r\n                    <div className=\"flex items-start justify-between\">\r\n                      <div className=\"flex-1\">\r\n                        <div className=\"flex items-center gap-2 mb-2\">\r\n                          <span className=\"text-2xl\">üè•</span>\r\n                          <h4 className=\"font-bold text-gray-800 text-lg\">{perk.title}</h4>\r\n                          <span\r\n                            className={`px-3 py-1 rounded-full text-xs font-bold ${\r\n                              isAvailable\r\n                                ? \"bg-green-200 text-green-800\"\r\n                                : isUsed\r\n                                ? \"bg-gray-300 text-gray-800\"\r\n                                : \"bg-red-200 text-red-800\"\r\n                            }`}\r\n                          >\r\n                            {isAvailable ? \"Available\" : isUsed ? \"Used\" : \"Expired\"}\r\n                          </span>\r\n                        </div>\r\n                        <p className=\"text-gray-700 text-sm mb-3\">{perk.description}</p>\r\n                        \r\n                        <div className=\"space-y-2 text-sm\">\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 font-semibold\">üíâ Includes:</span>\r\n                            <span className=\"text-gray-800 font-bold\">Blood Test, BP/Sugar Test</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 font-semibold\">üìÖ Valid Until:</span>\r\n                            <span className=\"text-gray-800 font-bold\">{new Date(perk.expiryDate).toLocaleDateString()}</span>\r\n                          </div>\r\n                          <div className=\"flex justify-between\">\r\n                            <span className=\"text-gray-600 font-semibold\">‚è∞ Time Left:</span>\r\n                            <span className={`font-bold ${isAvailable ? \"text-green-700\" : \"text-red-700\"}`}>\r\n                              {isAvailable ? `${daysLeft} days` : \"Expired\"}\r\n                            </span>\r\n                          </div>\r\n                          {isUsed && perk.claimedAt && (\r\n                            <div className=\"flex justify-between\">\r\n                              <span className=\"text-gray-600 font-semibold\">‚úÖ Used At:</span>\r\n                              <span className=\"text-gray-800 font-bold\">{perk.claimedAt}</span>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {isAvailable && (\r\n                      <div className=\"mt-4 p-3 bg-white rounded-lg border-2 border-green-300\">\r\n                        <p className=\"text-xs text-green-700 font-semibold\">\r\n                          ‚ú® Visit any hospital partner to claim your free health checkup within 7 days!\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ) : (\r\n            <div className=\"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-300 text-center\">\r\n              <p className=\"text-blue-800 font-semibold mb-2\">üíù No perks yet</p>\r\n              <p className=\"text-blue-700 text-sm\">\r\n                Complete a blood donation to unlock your first free health checkup perk! \r\n                Every 90 days you're eligible for another checkup.\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* Program Details */}\r\n          <div className=\"bg-gradient-to-r from-orange-50 to-yellow-50 rounded-xl p-5 border-2 border-orange-400\">\r\n            <h3 className=\"font-bold text-orange-800 mb-3 flex items-center gap-2\">\r\n              ‚ÑπÔ∏è How Our Donor Rewards Work\r\n            </h3>\r\n            <ul className=\"space-y-2 text-sm text-orange-900\">\r\n              <li className=\"flex gap-2\">\r\n                <span className=\"font-bold\">1Ô∏è‚É£</span>\r\n                <span>Every successful blood donation earns you a <strong>FREE HEALTH CHECKUP</strong></span>\r\n              </li>\r\n              <li className=\"flex gap-2\">\r\n                <span className=\"font-bold\">2Ô∏è‚É£</span>\r\n                <span>Valid for <strong>7 days</strong> after your donation is completed</span>\r\n              </li>\r\n              <li className=\"flex gap-2\">\r\n                <span className=\"font-bold\">3Ô∏è‚É£</span>\r\n                <span>Includes: Blood Test, BP Test, Sugar Test</span>\r\n              </li>\r\n              <li className=\"flex gap-2\">\r\n                <span className=\"font-bold\">4Ô∏è‚É£</span>\r\n                <span>You can claim one checkup every <strong>90 days</strong></span>\r\n              </li>\r\n              <li className=\"flex gap-2\">\r\n                <span className=\"font-bold\">5Ô∏è‚É£</span>\r\n                <span>Visit any hospital partner to redeem your perk</span>\r\n              </li>\r\n            </ul>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}