{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/components/profile-menu.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { User } from \"lucide-react\";\r\n\r\nexport default function ProfileMenu() {\r\n  const [open, setOpen] = useState(false);\r\n  const [user, setUser] = useState<any | null>(null);\r\n  const ref = useRef<HTMLDivElement | null>(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const raw = localStorage.getItem(\"user\");\r\n      if (raw) setUser(JSON.parse(raw));\r\n    } catch (e) {\r\n      setUser(null);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const onDoc = (e: MouseEvent) => {\r\n      if (!ref.current) return;\r\n      if (!ref.current.contains(e.target as Node)) setOpen(false);\r\n    };\r\n    document.addEventListener(\"click\", onDoc);\r\n    return () => document.removeEventListener(\"click\", onDoc);\r\n  }, []);\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"user\");\r\n    // navigate to home using Next router\r\n    router.push(\"/\");\r\n  };\r\n\r\n  return (\r\n    <div ref={ref} className=\"relative inline-block\">\r\n      <button\r\n        onClick={() => setOpen((s) => !s)}\r\n        className=\"flex items-center gap-2 p-2 rounded-full hover:bg-gray-100\"\r\n        aria-label=\"Profile\"\r\n      >\r\n        <div className=\"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center\">\r\n          {user?.fullName ? user.fullName.charAt(0).toUpperCase() : <User className=\"w-5 h-5\" />}\r\n        </div>\r\n      </button>\r\n\r\n      {open && (\r\n        <div className=\"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border z-50\">\r\n          <div className=\"p-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"w-12 h-12 rounded-full bg-red-600 text-white flex items-center justify-center text-lg font-semibold\">\r\n                {user?.fullName ? user.fullName.charAt(0).toUpperCase() : \"U\"}\r\n              </div>\r\n              <div>\r\n                <div className=\"font-semibold\">{user?.fullName || \"Unknown\"}</div>\r\n                <div className=\"text-sm text-gray-500\">{user?.email || \"No email\"}</div>\r\n                <div className=\"text-xs text-gray-400\">{user?.role || \"guest\"}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-3 text-sm text-gray-700\">\r\n              {user?.phone && <div>Phone: {user.phone}</div>}\r\n              {user?.hospitalName && <div>Hospital: {user.hospitalName}</div>}\r\n            </div>\r\n\r\n            <div className=\"mt-4 flex gap-2\">\r\n              <button\r\n                onClick={() => { setOpen(false); router.push('/profile'); }}\r\n                className=\"flex-1 bg-gray-100 py-2 rounded-md text-sm\"\r\n              >\r\n                View Profile\r\n              </button>\r\n\r\n              <button\r\n                onClick={handleLogout}\r\n                className=\"flex-1 bg-red-600 text-white py-2 rounded-md text-sm\"\r\n              >\r\n                Logout\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAa;IAC7C,MAAM,MAAM,IAAA,uKAAM,EAAwB;IAC1C,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;iCAAC;YACR,IAAI;gBACF,MAAM,MAAM,aAAa,OAAO,CAAC;gBACjC,IAAI,KAAK,QAAQ,KAAK,KAAK,CAAC;YAC9B,EAAE,OAAO,GAAG;gBACV,QAAQ;YACV;QACF;gCAAG,EAAE;IAEL,IAAA,0KAAS;iCAAC;YACR,MAAM;+CAAQ,CAAC;oBACb,IAAI,CAAC,IAAI,OAAO,EAAE;oBAClB,IAAI,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE,MAAM,GAAW,QAAQ;gBACvD;;YACA,SAAS,gBAAgB,CAAC,SAAS;YACnC;yCAAO,IAAM,SAAS,mBAAmB,CAAC,SAAS;;QACrD;gCAAG,EAAE;IAEL,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,qCAAqC;QACrC,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,6LAAC;QAAI,KAAK;QAAK,WAAU;;0BACvB,6LAAC;gBACC,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;gBAC/B,WAAU;gBACV,cAAW;0BAEX,cAAA,6LAAC;oBAAI,WAAU;8BACZ,MAAM,WAAW,KAAK,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW,mBAAK,6LAAC,6MAAI;wBAAC,WAAU;;;;;;;;;;;;;;;;YAI7E,sBACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACZ,MAAM,WAAW,KAAK,QAAQ,CAAC,MAAM,CAAC,GAAG,WAAW,KAAK;;;;;;8CAE5D,6LAAC;;sDACC,6LAAC;4CAAI,WAAU;sDAAiB,MAAM,YAAY;;;;;;sDAClD,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,SAAS;;;;;;sDACvD,6LAAC;4CAAI,WAAU;sDAAyB,MAAM,QAAQ;;;;;;;;;;;;;;;;;;sCAI1D,6LAAC;4BAAI,WAAU;;gCACZ,MAAM,uBAAS,6LAAC;;wCAAI;wCAAQ,KAAK,KAAK;;;;;;;gCACtC,MAAM,8BAAgB,6LAAC;;wCAAI;wCAAW,KAAK,YAAY;;;;;;;;;;;;;sCAG1D,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS;wCAAQ,QAAQ;wCAAQ,OAAO,IAAI,CAAC;oCAAa;oCAC1D,WAAU;8CACX;;;;;;8CAID,6LAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GAlFwB;;QAIP,kJAAS;;;KAJF","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/hooks/useSocket.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef } from \"react\"\r\nimport { io, Socket } from \"socket.io-client\"\r\n\r\nlet globalSocket: Socket | null = null\r\n\r\nexport function useSocket() {\r\n  const socketRef = useRef<Socket | null>(null)\r\n\r\n  useEffect(() => {\r\n    // Reuse global socket instance to avoid multiple connections\r\n    if (!globalSocket) {\r\n      globalSocket = io(\"http://localhost:5000\", {\r\n        reconnection: true,\r\n        reconnectionDelay: 1000,\r\n        reconnectionDelayMax: 5000,\r\n        reconnectionAttempts: 5,\r\n      })\r\n\r\n      globalSocket.on(\"connect\", () => {\r\n        console.log(\"✅ Socket connected:\", globalSocket?.id)\r\n      })\r\n\r\n      globalSocket.on(\"disconnect\", () => {\r\n        console.log(\"❌ Socket disconnected\")\r\n      })\r\n\r\n      globalSocket.on(\"error\", (error) => {\r\n        console.error(\"Socket error:\", error)\r\n      })\r\n    }\r\n\r\n    socketRef.current = globalSocket\r\n\r\n    return () => {\r\n      // Don't disconnect here; keep the socket alive for reuse\r\n    }\r\n  }, [])\r\n\r\n  return socketRef\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAKA,IAAI,eAA8B;AAE3B,SAAS;;IACd,MAAM,YAAY,IAAA,uKAAM,EAAgB;IAExC,IAAA,0KAAS;+BAAC;YACR,6DAA6D;YAC7D,IAAI,CAAC,cAAc;gBACjB,eAAe,IAAA,wLAAE,EAAC,yBAAyB;oBACzC,cAAc;oBACd,mBAAmB;oBACnB,sBAAsB;oBACtB,sBAAsB;gBACxB;gBAEA,aAAa,EAAE,CAAC;2CAAW;wBACzB,QAAQ,GAAG,CAAC,uBAAuB,cAAc;oBACnD;;gBAEA,aAAa,EAAE,CAAC;2CAAc;wBAC5B,QAAQ,GAAG,CAAC;oBACd;;gBAEA,aAAa,EAAE,CAAC;2CAAS,CAAC;wBACxB,QAAQ,KAAK,CAAC,iBAAiB;oBACjC;;YACF;YAEA,UAAU,OAAO,GAAG;YAEpB;uCAAO;gBACL,yDAAyD;gBAC3D;;QACF;8BAAG,EAAE;IAEL,OAAO;AACT;GAlCgB","debugId":null}}]
}