{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/hooks/useSocket.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useRef } from \"react\"\r\nimport { io, Socket } from \"socket.io-client\"\r\n\r\nlet globalSocket: Socket | null = null\r\n\r\nexport function useSocket() {\r\n  const socketRef = useRef<Socket | null>(null)\r\n\r\n  useEffect(() => {\r\n    // Reuse global socket instance to avoid multiple connections\r\n    if (!globalSocket) {\r\n      globalSocket = io(\"http://localhost:5000\", {\r\n        reconnection: true,\r\n        reconnectionDelay: 1000,\r\n        reconnectionDelayMax: 5000,\r\n        reconnectionAttempts: 5,\r\n      })\r\n\r\n      globalSocket.on(\"connect\", () => {\r\n        console.log(\"‚úÖ Socket connected:\", globalSocket?.id)\r\n      })\r\n\r\n      globalSocket.on(\"disconnect\", () => {\r\n        console.log(\"‚ùå Socket disconnected\")\r\n      })\r\n\r\n      globalSocket.on(\"error\", (error) => {\r\n        console.error(\"Socket error:\", error)\r\n      })\r\n    }\r\n\r\n    socketRef.current = globalSocket\r\n\r\n    return () => {\r\n      // Don't disconnect here; keep the socket alive for reuse\r\n    }\r\n  }, [])\r\n\r\n  return socketRef\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAKA,IAAI,eAA8B;AAE3B,SAAS;;IACd,MAAM,YAAY,IAAA,uKAAM,EAAgB;IAExC,IAAA,0KAAS;+BAAC;YACR,6DAA6D;YAC7D,IAAI,CAAC,cAAc;gBACjB,eAAe,IAAA,wLAAE,EAAC,yBAAyB;oBACzC,cAAc;oBACd,mBAAmB;oBACnB,sBAAsB;oBACtB,sBAAsB;gBACxB;gBAEA,aAAa,EAAE,CAAC;2CAAW;wBACzB,QAAQ,GAAG,CAAC,uBAAuB,cAAc;oBACnD;;gBAEA,aAAa,EAAE,CAAC;2CAAc;wBAC5B,QAAQ,GAAG,CAAC;oBACd;;gBAEA,aAAa,EAAE,CAAC;2CAAS,CAAC;wBACxB,QAAQ,KAAK,CAAC,iBAAiB;oBACjC;;YACF;YAEA,UAAU,OAAO,GAAG;YAEpB;uCAAO;gBACL,yDAAyD;gBAC3D;;QACF;8BAAG,EAAE;IAEL,OAAO;AACT;GAlCgB","debugId":null}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/donor/dashboard/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { DonationConfirmationModal } from \"@/components/donation-confirmation-modal\";\r\n\r\n// // \"use client\";\r\n\r\n// // import Link from \"next/link\";\r\n// // import { useEffect, useState, useRef } from \"react\";\r\n// // import { jwtDecode } from \"jwt-decode\";\r\nimport dynamic from \"next/dynamic\";\r\nconst LeafletMap = dynamic(() => import(\"@/components/LeafletMap\"), { ssr: false });\r\n// // import {\r\n// //   Heart,\r\n// //   Droplet,\r\n// //   MapPin,\r\n// //   CheckCircle,\r\n// //   Play,\r\n// // } from \"lucide-react\";\r\n// // import { io } from \"socket.io-client\";\r\n\r\n// // export default function DonorDashboard() {\r\n// //   const [history, setHistory] = useState<any[]>([]);\r\n// //   const [requests, setRequests] = useState<any[]>([]);\r\n// //   const [donorId, setDonorId] = useState<string | null>(null);\r\n// //   const [loading, setLoading] = useState(true);\r\n// //   const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n// //   const [available, setAvailable] = useState<boolean>(false);\r\n// //   const [showVideo, setShowVideo] = useState(false);\r\n\r\n// //   const socketRef = useRef<any>(null);\r\n\r\n// //   // Load donorId from token\r\n// //   useEffect(() => {\r\n// //     const token = localStorage.getItem(\"token\");\r\n// //     if (token) {\r\n// //       const decoded: any = jwtDecode(token);\r\n// //       setDonorId(decoded.userId);\r\n// //     }\r\n// //   }, []);\r\n\r\n// //   // Socket.io live request notifications\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n\r\n// //     const socket = io(\"http://localhost:5000\");\r\n// //     socketRef.current = socket;\r\n\r\n// //     socket.on(\"connect\", () => {\r\n// //       socket.emit(\"register\", donorId);\r\n// //     });\r\n\r\n// //     socket.on(\"new_request\", (req) => {\r\n// //       alert(`üîî NEW REQUEST: ${req.bloodType} ‚Üí ${req.unitsNeeded} units needed`);\r\n// //       setRequests((prev) => [req, ...prev]);\r\n// //     });\r\n\r\n// //     return () => socket.disconnect();\r\n// //   }, [donorId]);\r\n\r\n// //   // Fetch history\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n\r\n// //     fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => {\r\n// //         setHistory(data.donations || []);\r\n// //         setLoading(false);\r\n// //       });\r\n// //   }, [donorId]);\r\n\r\n// //   // Fetch urgent requests\r\n// //   useEffect(() => {\r\n// //     fetch(\"http://localhost:5000/donor/requests\")\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setRequests(data.requests || []));\r\n// //   }, []);\r\n\r\n// //   // Location handler\r\n// //   const getLocation = () => {\r\n// //     navigator.geolocation.getCurrentPosition(\r\n// //       (pos) => {\r\n// //         setLocation({\r\n// //           lat: pos.coords.latitude,\r\n// //           lng: pos.coords.longitude,\r\n// //         });\r\n// //         alert(\"üìç Location Captured Successfully\");\r\n// //       },\r\n// //       () => alert(\"‚ùå Location access denied\")\r\n// //     );\r\n// //   };\r\n\r\n// //   // Mark availability\r\n// //   const markAvailable = async () => {\r\n// //     if (!location) return alert(\"Please share your location first\");\r\n\r\n// //     await fetch(\"http://localhost:5000/donor/availability\", {\r\n// //       method: \"POST\",\r\n// //       headers: { \"Content-Type\": \"application/json\" },\r\n// //       body: JSON.stringify({\r\n// //         donorId,\r\n// //         available: true,\r\n// //         latitude: location.lat,\r\n// //         longitude: location.lng,\r\n// //       }),\r\n// //     });\r\n\r\n// //     setAvailable(true);\r\n// //   };\r\n\r\n// //   const markUnavailable = async () => {\r\n// //     await fetch(\"http://localhost:5000/donor/availability\", {\r\n// //       method: \"POST\",\r\n// //       headers: { \"Content-Type\": \"application/json\" },\r\n// //       body: JSON.stringify({ donorId, available: false }),\r\n// //     });\r\n\r\n// //     setAvailable(false);\r\n// //   };\r\n\r\n// //   return (\r\n// //     <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n// //       {/* HEADER */}\r\n// //       <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n// //         <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n// //           <Heart className=\"w-7 h-7 fill-white\" />\r\n// //           Pulse Bank\r\n// //         </div>\r\n\r\n// //         <div className=\"flex items-center gap-4\">\r\n// //           {location && (\r\n// //             <div className=\"flex items-center gap-2 bg-red-500 px-4 py-2 rounded-lg\">\r\n// //               <MapPin className=\"w-5 h-5\" /> Location Active\r\n// //             </div>\r\n// //           )}\r\n\r\n// //           <button\r\n// //             onClick={() => {\r\n// //               localStorage.removeItem(\"token\");\r\n// //               window.location.href = \"/\";\r\n// //             }}\r\n// //             className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n// //           >\r\n// //             Logout\r\n// //           </button>\r\n// //         </div>\r\n// //       </header>\r\n\r\n// //       {/* MAIN SECTION */}\r\n// //       <div className=\"max-w-7xl mx-auto p-6\">\r\n// //         {/* HERO CARD */}\r\n// //         <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n// //           <div className=\"p-10\">\r\n// //             <h2 className=\"text-3xl font-bold text-red-700\">\r\n// //               Welcome Back, Life Saver!\r\n// //             </h2>\r\n\r\n// //             <p className=\"text-gray-700 mt-2\">\r\n// //               Thank you for helping save lives ‚ù§Ô∏è\r\n// //             </p>\r\n\r\n// //             <div className=\"mt-4 space-y-1\">\r\n// //               <p>\r\n// //                 <b>{history.length}</b> total donations\r\n// //               </p>\r\n// //               <p>\r\n// //                 <b>{history.length * 400}</b> ml contributed\r\n// //               </p>\r\n// //             </div>\r\n\r\n// //             <div className=\"mt-6 flex gap-4 flex-wrap\">\r\n// //               <button\r\n// //                 onClick={getLocation}\r\n// //                 className=\"flex items-center gap-2 bg-blue-600 text-white px-5 py-3 rounded-lg shadow\"\r\n// //               >\r\n// //                 <MapPin /> Share Location\r\n// //               </button>\r\n\r\n// //               {!available ? (\r\n// //                 <button\r\n// //                   onClick={markAvailable}\r\n// //                   className=\"flex items-center gap-2 bg-green-600 text-white px-5 py-3 rounded-lg shadow\"\r\n// //                 >\r\n// //                   <CheckCircle /> Mark Available\r\n// //                 </button>\r\n// //               ) : (\r\n// //                 <button\r\n// //                   onClick={markUnavailable}\r\n// //                   className=\"flex items-center gap-2 bg-gray-600 text-white px-5 py-3 rounded-lg shadow\"\r\n// //                 >\r\n// //                   Disable Availability\r\n// //                 </button>\r\n// //               )}\r\n// //             </div>\r\n// //           </div>\r\n\r\n// //           <div className=\"bg-gray-900 flex items-center justify-center\">\r\n// //             <Heart className=\"text-gray-400 w-20 h-20\" />\r\n// //           </div>\r\n// //         </div>\r\n\r\n// //         {/* VIDEO */}\r\n// //         {!showVideo ? (\r\n// //           <div className=\"bg-red-50 mt-8 p-6 rounded-xl flex items-center justify-between border\">\r\n// //             <div>\r\n// //               <h3 className=\"text-2xl font-bold text-red-700\">Feel Inspired?</h3>\r\n// //               <p className=\"text-gray-600\">\r\n// //                 Watch stories of lives changed through donation.\r\n// //               </p>\r\n// //             </div>\r\n\r\n// //             <button\r\n// //               onClick={() => setShowVideo(true)}\r\n// //               className=\"bg-red-600 text-white px-6 py-3 rounded-lg flex items-center gap-2\"\r\n// //             >\r\n// //               <Play className=\"w-5\" /> Watch Video\r\n// //             </button>\r\n// //           </div>\r\n// //         ) : (\r\n// //           <div className=\"mt-8 shadow-lg rounded-xl overflow-hidden border\">\r\n// //             <iframe\r\n// //               className=\"w-full aspect-video\"\r\n// //               src=\"https://www.youtube.com/embed/_JlmwDqaYA0\"\r\n// //             ></iframe>\r\n// //             <button\r\n// //               onClick={() => setShowVideo(false)}\r\n// //               className=\"bg-red-600 w-full text-white py-2 font-semibold\"\r\n// //             >\r\n// //               Close Video\r\n// //             </button>\r\n// //           </div>\r\n// //         )}\r\n\r\n// //         {/* SPECIAL SECTIONS */}\r\n// //         <BloodDonationGuide />\r\n// //         <CompatibilityChart />\r\n// //         <ImpactStories />\r\n\r\n// //         {/* URGENT REQUESTS */}\r\n// //         <UrgentRequests requests={requests} />\r\n// //       </div>\r\n// //     </main>\r\n// //   );\r\n// // }\r\n\r\n// // /* ---------------------------------------\r\n// //   REUSABLE COMPONENTS\r\n// // ----------------------------------------*/\r\n\r\n// // function BloodDonationGuide() {\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n// //         Blood Donation Frequency Guide\r\n// //       </h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {[\r\n// //           { type: \"Whole Blood\", wait: 56, year: 6 },\r\n// //           { type: \"Plasma\", wait: 2, year: 24 },\r\n// //           { type: \"Platelets\", wait: 2, year: 24 },\r\n// //           { type: \"Red Cells\", wait: 112, year: 3 },\r\n// //         ].map((item, i) => (\r\n// //           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">{item.type}</h3>\r\n// //             <p>Can donate every {item.wait} days</p>\r\n// //             <p className=\"text-sm text-gray-600\">\r\n// //               Yearly limit: {item.year} times\r\n// //             </p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function CompatibilityChart() {\r\n// //   const types = [\r\n// //     { type: \"O-\", donate: [\"O-\", \"O+\", \"A-\", \"A+\", \"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n// //     { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n// //     { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n// //     { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n// //     { type: \"AB+\", donate: [\"AB+\"] },\r\n// //   ];\r\n\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">\r\n// //         Blood Compatibility Chart\r\n// //       </h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {types.map((b, i) => (\r\n// //           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700 mb-2\">{b.type}</h3>\r\n\r\n// //             <p className=\"text-gray-700\">Donates to:</p>\r\n\r\n// //             <div className=\"flex flex-wrap gap-2 mt-1\">\r\n// //               {b.donate.map((d, j) => (\r\n// //                 <span\r\n// //                   key={j}\r\n// //                   className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\"\r\n// //                 >\r\n// //                   {d}\r\n// //                 </span>\r\n// //               ))}\r\n// //             </div>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function ImpactStories() {\r\n// //   const stories = [\r\n// //     { title: \"Sarah's Second Chance\", img: \"/story1.jpg\" },\r\n// //     { title: \"Newborn Battle Survivor\", img: \"/story2.jpg\" },\r\n// //     { title: \"Accident Hero Recovery\", img: \"/story3.jpg\" },\r\n// //   ];\r\n\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {stories.map((story, i) => (\r\n// //           <div key={i} className=\"rounded-xl overflow-hidden shadow\">\r\n// //             <div className=\"h-40 bg-gray-200\"></div>\r\n// //             <div className=\"p-4 bg-red-50\">\r\n// //               <h3 className=\"font-bold text-red-700\">{story.title}</h3>\r\n// //               <p className=\"text-gray-600 text-sm\">\r\n// //                 Your donation made a real difference\r\n// //               </p>\r\n// //             </div>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function UrgentRequests({ requests }: any) {\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">\r\n// //         Nearby Hospitals Requesting Blood\r\n// //       </h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {requests.map((req: any, i: number) => (\r\n// //           <div\r\n// //             key={i}\r\n// //             className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\"\r\n// //           >\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">\r\n// //               {req.hospital || req.hospitalName || \"Unknown Hospital\"}\r\n// //             </h3>\r\n\r\n// //             <p className=\"text-gray-600 mt-1\">\r\n// //               {req.locationKm ? `${req.locationKm} km away` : \"\"}\r\n// //             </p>\r\n\r\n// //             <div className=\"flex justify-between mt-3\">\r\n// //               <span className=\"font-bold text-red-700\">{req.bloodType}</span>\r\n// //               <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n// //             </div>\r\n\r\n// //             <p className=\"text-sm text-gray-600 mt-2\">\r\n// //               Urgency: {req.urgency || \"Moderate\"}\r\n// //             </p>\r\n\r\n// //             {/* FIXED SCHEDULE DONATION LINK */}\r\n// //             <Link\r\n// //               href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n// //                 req.hospital || req.hospitalName || \"\"\r\n// //               )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n// //               className=\"w-full\"\r\n// //             >\r\n// //               <button className=\"w-full mt-4 bg-gradient-to-r from-red-600 to-red-700 text-white py-3 rounded-lg\">\r\n// //                 Schedule Donation\r\n// //               </button>\r\n// //             </Link>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // \"use client\";\r\n\r\n// // import Link from \"next/link\";\r\n// // import { useEffect, useState, useRef } from \"react\";\r\n// // import { jwtDecode } from \"jwt-decode\";\r\n// // import {\r\n// //   Heart,\r\n// //   Droplet,\r\n// //   MapPin,\r\n// //   CheckCircle,\r\n// //   Play,\r\n// //   Calendar,\r\n// //   Clock,\r\n// //   AlertCircle,\r\n// // } from \"lucide-react\";\r\n// // import { io } from \"socket.io-client\";\r\n\r\n// // export default function DonorDashboard() {\r\n// //   const [history, setHistory] = useState<any[]>([]);\r\n// //   const [requests, setRequests] = useState<any[]>([]);\r\n// //   const [schedules, setSchedules] = useState<any[]>([]);\r\n// //   const [donorId, setDonorId] = useState<string | null>(null);\r\n// //   const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n// //   const [available, setAvailable] = useState<boolean>(false);\r\n// //   const [showVideo, setShowVideo] = useState(false);\r\n\r\n// //   const socketRef = useRef<any>(null);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       LOAD DONOR ID FROM TOKEN\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     const token = localStorage.getItem(\"token\");\r\n// //     if (token) {\r\n// //       const decoded: any = jwtDecode(token);\r\n// //       setDonorId(decoded.userId);\r\n// //     }\r\n// //   }, []);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       SOCKET.IO ‚Äì LISTEN FOR HOSPITAL RESPONSE\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n\r\n// //     const socket = io(\"http://localhost:5000\");\r\n// //     socketRef.current = socket;\r\n\r\n// //     socket.emit(\"register\", donorId);\r\n\r\n// //     socket.on(\"schedule_status_updated\", (data) => {\r\n// //       setSchedules((prev) =>\r\n// //         prev.map((s) =>\r\n// //           s._id === data.scheduleId ? { ...s, status: data.status } : s\r\n// //         )\r\n// //       );\r\n// //        alert(`Your donation schedule was ${data.status.toUpperCase()}`);\r\n// //     });\r\n\r\n// //     return () => socket.disconnect();\r\n// //   }, [donorId]);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FETCH DONATION HISTORY\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n\r\n// //     fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setHistory(data.donations || []));\r\n// //   }, [donorId]);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FETCH DONOR SCHEDULES\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n\r\n// //     fetch(`http://localhost:5000/schedule/donor/${donorId}`)\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setSchedules(data.schedules || []));\r\n// //   }, [donorId]);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FETCH URGENT REQUESTS\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     fetch(\"http://localhost:5000/donor/requests\")\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setRequests(data.requests || []));\r\n// //   }, []);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       LOCATION\r\n// //   ----------------------------------------------------------*/\r\n// //   const getLocation = () => {\r\n// //     navigator.geolocation.getCurrentPosition(\r\n// //       (pos) => {\r\n// //         setLocation({\r\n// //           lat: pos.coords.latitude,\r\n// //           lng: pos.coords.longitude,\r\n// //         });\r\n// //         alert(\"üìç Location Captured Successfully\");\r\n// //       },\r\n// //       () => alert(\"‚ùå Please allow location access\")\r\n// //     );\r\n// //   };\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       AVAILABILITY\r\n// //   ----------------------------------------------------------*/\r\n// //   const markAvailable = async () => {\r\n// //     if (!location) return alert(\"Please share your location first\");\r\n\r\n// //     await fetch(\"http://localhost:5000/donor/availability\", {\r\n// //       method: \"POST\",\r\n// //       headers: { \"Content-Type\": \"application/json\" },\r\n// //       body: JSON.stringify({\r\n// //         donorId,\r\n// //         available: true,\r\n// //         latitude: location.lat,\r\n// //         longitude: location.lng,\r\n// //       }),\r\n// //     });\r\n\r\n// //     setAvailable(true);\r\n// //   };\r\n\r\n// //   const markUnavailable = async () => {\r\n// //     await fetch(\"http://localhost:5000/donor/availability\", {\r\n// //       method: \"POST\",\r\n// //       headers: { \"Content-Type\": \"application/json\" },\r\n// //       body: JSON.stringify({ donorId, available: false }),\r\n// //     });\r\n\r\n// //     setAvailable(false);\r\n// //   };\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       UI SECTION\r\n// //   ----------------------------------------------------------*/\r\n// //   return (\r\n// //     <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n// //       {/* HEADER */}\r\n// //       <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n// //         <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n// //           <Heart className=\"w-7 h-7 fill-white\" />\r\n// //           Pulse Bank\r\n// //         </div>\r\n\r\n// //         <button\r\n// //           onClick={() => {\r\n// //             localStorage.removeItem(\"token\");\r\n// //             window.location.href = \"/\";\r\n// //           }}\r\n// //           className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n// //         >\r\n// //           Logout\r\n// //         </button>\r\n// //       </header>\r\n\r\n// //       {/* MAIN CONTENT */}\r\n// //       <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\r\n// //         {/* HERO */}\r\n// //         <HeroCard\r\n// //           history={history}\r\n// //           location={location}\r\n// //           getLocation={getLocation}\r\n// //           available={available}\r\n// //           markAvailable={markAvailable}\r\n// //           markUnavailable={markUnavailable}\r\n// //         />\r\n\r\n// //         {/* VIDEO */}\r\n// //         <VideoSection showVideo={showVideo} setShowVideo={setShowVideo} />\r\n\r\n// //         {/* DONATION GUIDE */}\r\n// //         <BloodDonationGuide />\r\n\r\n// //         {/* COMPATIBILITY */}\r\n// //         <CompatibilityChart />\r\n\r\n// //         {/* IMPACT STORIES */}\r\n// //         <ImpactStories />\r\n\r\n// //         {/* ACTIVE REQUESTS */}\r\n// //         <UrgentRequests requests={requests} />\r\n\r\n// //         {/* SCHEDULED DONATIONS */}\r\n// //         <ScheduledRequests schedules={schedules} />\r\n\r\n// //         {/* DONATION HISTORY */}\r\n// //         <DonationHistory history={history} />\r\n// //       </div>\r\n// //     </main>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     COMPONENTS\r\n// // ----------------------------------------------------------*/\r\n\r\n// // function HeroCard({ history, location, getLocation, available, markAvailable, markUnavailable }: any) {\r\n// //   return (\r\n// //     <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n// //       <div className=\"p-10\">\r\n// //         <h2 className=\"text-3xl font-bold text-red-700\">Welcome Back, Life Saver!</h2>\r\n// //         <p className=\"text-gray-700 mt-2\">Thank you for helping save lives ‚ù§Ô∏è</p>\r\n\r\n// //         <div className=\"mt-4 space-y-1\">\r\n// //           <p><b>{history.length}</b> total donations</p>\r\n// //           <p><b>{history.length * 400}</b> ml contributed</p>\r\n// //         </div>\r\n\r\n// //         <div className=\"mt-6 flex gap-4 flex-wrap\">\r\n// //           <button onClick={getLocation} className=\"bg-blue-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n// //             <MapPin /> Share Location\r\n// //           </button>\r\n\r\n// //           {!available ? (\r\n// //             <button onClick={markAvailable} className=\"bg-green-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n// //               <CheckCircle /> Mark Available\r\n// //             </button>\r\n// //           ) : (\r\n// //             <button onClick={markUnavailable} className=\"bg-gray-600 text-white px-5 py-3 rounded-lg shadow flex gap-2 items-center\">\r\n// //               Disable Availability\r\n// //             </button>\r\n// //           )}\r\n// //         </div>\r\n// //       </div>\r\n\r\n// //       <div className=\"bg-gray-900 flex items-center justify-center\">\r\n// //         <Heart className=\"text-gray-400 w-20 h-20\" />\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     VIDEO SECTION\r\n// // ----------------------------------------------------------*/\r\n// // function VideoSection({ showVideo, setShowVideo }: any) {\r\n// //   return !showVideo ? (\r\n// //     <div className=\"bg-red-50 mt-8 p-6 rounded-xl flex items-center justify-between border\">\r\n// //       <div>\r\n// //         <h3 className=\"text-2xl font-bold text-red-700\">Feel Inspired?</h3>\r\n// //         <p className=\"text-gray-600\">Watch stories of lives changed through donation.</p>\r\n// //       </div>\r\n\r\n// //       <button\r\n// //         onClick={() => setShowVideo(true)}\r\n// //         className=\"bg-red-600 text-white px-6 py-3 rounded-lg flex items-center gap-2\"\r\n// //       >\r\n// //         <Play className=\"w-5\" /> Watch Video\r\n// //       </button>\r\n// //     </div>\r\n// //   ) : (\r\n// //     <div className=\"mt-8 shadow-lg rounded-xl overflow-hidden border\">\r\n// //       <iframe className=\"w-full aspect-video\" src=\"https://www.youtube.com/embed/_JlmwDqaYA0\"></iframe>\r\n// //       <button\r\n// //         onClick={() => setShowVideo(false)}\r\n// //         className=\"bg-red-600 w-full text-white py-2 font-semibold\"\r\n// //       >\r\n// //         Close Video\r\n// //       </button>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     SCHEDULED DONATIONS\r\n// // ----------------------------------------------------------*/\r\n// // function ScheduledRequests({ schedules }: any) {\r\n// //   if (!schedules.length) return null;\r\n\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Scheduled Donations</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {schedules.map((s: any, i: number) => (\r\n// //           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">Hospital: {s.requestId?.hospital || \"N/A\"}</h3>\r\n\r\n// //             <p className=\"text-gray-700 mt-2 flex items-center gap-2\">\r\n// //               <Calendar className=\"w-5\" /> {s.date}\r\n// //             </p>\r\n// //             <p className=\"text-gray-700 flex items-center gap-2\">\r\n// //               <Clock className=\"w-5\" /> {s.time}\r\n// //             </p>\r\n\r\n// //             <p className=\"mt-3\">\r\n// //               Status:{\" \"}\r\n// //               <span className=\"px-3 py-1 rounded-lg bg-red-100 text-red-700 font-semibold\">\r\n// //                 {s.status.toUpperCase()}\r\n// //               </span>\r\n// //             </p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     DONATION HISTORY\r\n// // ----------------------------------------------------------*/\r\n// // function DonationHistory({ history }: any) {\r\n// //   if (!history.length) return null;\r\n\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Donation History</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {history.map((h: any, i: number) => (\r\n// //           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-green-600\">\r\n// //             <p className=\"text-xl font-bold\">+ {h.units} units</p>\r\n// //             <p className=\"text-gray-700 mt-1\">{new Date(h.date).toLocaleDateString()}</p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     OTHER SECTIONS (GUIDE, COMPATIBILITY, IMPACT)\r\n// // ----------------------------------------------------------*/\r\n\r\n// // function BloodDonationGuide() {\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Donation Frequency Guide</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {[\r\n// //           { type: \"Whole Blood\", wait: 56, year: 6 },\r\n// //           { type: \"Plasma\", wait: 2, year: 24 },\r\n// //           { type: \"Platelets\", wait: 2, year: 24 },\r\n// //           { type: \"Red Cells\", wait: 112, year: 3 },\r\n// //         ].map((item, i) => (\r\n// //           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">{item.type}</h3>\r\n// //             <p>Can donate every {item.wait} days</p>\r\n// //             <p className=\"text-sm text-gray-600\">Yearly limit: {item.year} times</p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function CompatibilityChart() {\r\n// //   const types = [\r\n// //     { type: \"O-\", donate: [\"O-\", \"O+\", \"A-\", \"A+\", \"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n// //     { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n// //     { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n// //     { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n// //     { type: \"AB+\", donate: [\"AB+\"] },\r\n// //   ];\r\n\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Compatibility Chart</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {types.map((b, i) => (\r\n// //           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700 mb-2\">{b.type}</h3>\r\n\r\n// //             <p className=\"text-gray-700\">Donates to:</p>\r\n\r\n// //             <div className=\"flex flex-wrap gap-2 mt-1\">\r\n// //               {b.donate.map((d, j) => (\r\n// //                 <span key={j} className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\">\r\n// //                   {d}\r\n// //                 </span>\r\n// //               ))}\r\n// //             </div>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function ImpactStories() {\r\n// //   const stories = [\r\n// //     { title: \"Sarah's Second Chance\" },\r\n// //     { title: \"Newborn Battle Survivor\" },\r\n// //     { title: \"Accident Hero Recovery\" },\r\n// //   ];\r\n\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {stories.map((story, i) => (\r\n// //           <div key={i} className=\"rounded-xl overflow-hidden shadow bg-red-50 p-4\">\r\n// //             <h3 className=\"font-bold text-red-700\">{story.title}</h3>\r\n// //             <p className=\"text-gray-600 text-sm mt-1\">Your donation made a real difference</p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function UrgentRequests({ requests }: any) {\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">Nearby Hospitals Requesting Blood</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {requests.map((req: any, i: number) => (\r\n// //           <div\r\n// //             key={i}\r\n// //             className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\"\r\n// //           >\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">{req.hospital}</h3>\r\n\r\n// //             <p className=\"text-gray-600 mt-1\">{req.locationKm} km away</p>\r\n\r\n// //             <div className=\"flex justify-between mt-3\">\r\n// //               <span className=\"font-bold text-red-700\">{req.bloodType}</span>\r\n// //               <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n// //             </div>\r\n\r\n// //             <p className=\"text-sm text-gray-600 mt-2\">Urgency: {req.urgency}</p>\r\n\r\n// //             <Link\r\n// //               href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n// //                 req.hospital\r\n// //               )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n// //               className=\"w-full\"\r\n// //             >\r\n// //               <button className=\"w-full mt-4 bg-gradient-to-r from-red-600 to-red-700 text-white py-3 rounded-lg\">\r\n// //                 Schedule Donation\r\n// //               </button>\r\n// //             </Link>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n// // \"use client\";\r\n\r\n// // import Link from \"next/link\";\r\n// // import { useEffect, useState, useRef } from \"react\";\r\n// // import { jwtDecode } from \"jwt-decode\";\r\n// // import {\r\n// //   Heart,\r\n// //   MapPin,\r\n// //   CheckCircle,\r\n// //   Play,\r\n// //   Calendar,\r\n// //   Clock,\r\n// // } from \"lucide-react\";\r\n// // import { io } from \"socket.io-client\";\r\n\r\n// // export default function DonorDashboard() {\r\n// //   const [history, setHistory] = useState<any[]>([]);\r\n// //   const [requests, setRequests] = useState<any[]>([]);\r\n// //   const [schedules, setSchedules] = useState<any[]>([]);\r\n// //   const [donorId, setDonorId] = useState<string | null>(null);\r\n\r\n// //   const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n// //   const [available, setAvailable] = useState<boolean>(false);\r\n\r\n// //   const [showVideo, setShowVideo] = useState(true); // üî• Auto-play video ON login\r\n\r\n// //   const socketRef = useRef<any>(null);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       LOAD DONOR ID\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     const token = localStorage.getItem(\"token\");\r\n// //     if (token) {\r\n// //       const decoded: any = jwtDecode(token);\r\n// //       setDonorId(decoded.userId);\r\n// //     }\r\n// //   }, []);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       SOCKET ‚Äì LISTEN FOR HOSPITAL RESPONSE\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n\r\n// //     const socket = io(\"http://localhost:5000\");\r\n// //     socketRef.current = socket;\r\n\r\n// //     socket.emit(\"register\", donorId);\r\n\r\n// //     socket.on(\"schedule_status_updated\", (data) => {\r\n// //       setSchedules((prev) =>\r\n// //         prev.map((s) =>\r\n// //           s._id === data.scheduleId ? { ...s, status: data.status } : s\r\n// //         )\r\n// //       );\r\n// //       alert(`Your donation schedule was ${data.status.toUpperCase()}`);\r\n// //     });\r\n\r\n// //     return () => socket.disconnect();\r\n// //   }, [donorId]);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FETCH HISTORY\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n// //     fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setHistory(data.donations || []));\r\n// //   }, [donorId]);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FETCH SCHEDULED DONATIONS\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     if (!donorId) return;\r\n// //     fetch(`http://localhost:5000/schedule/donor/${donorId}`)\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setSchedules(data.schedules || []));\r\n// //   }, [donorId]);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FETCH REQUESTS\r\n// //   ----------------------------------------------------------*/\r\n// //   useEffect(() => {\r\n// //     fetch(\"http://localhost:5000/donor/requests\")\r\n// //       .then((res) => res.json())\r\n// //       .then((data) => setRequests(data.requests || []));\r\n// //   }, []);\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       FIXED LOCATION POPUP FUNCTION\r\n// //   ----------------------------------------------------------*/\r\n// //   const getLocation = () => {\r\n// //     if (!navigator.geolocation) {\r\n// //       alert(\"‚ùå Your browser does not support location\");\r\n// //       return;\r\n// //     }\r\n\r\n// //     navigator.geolocation.getCurrentPosition(\r\n// //       (pos) => {\r\n// //         setLocation({\r\n// //           lat: pos.coords.latitude,\r\n// //           lng: pos.coords.longitude,\r\n// //         });\r\n// //         alert(\"üìç Location captured successfully!\");\r\n// //       },\r\n// //       (err) => {\r\n// //         if (err.code === 1) {\r\n// //           alert(\"‚ö† Please allow location access in browser popup.\");\r\n// //         } else {\r\n// //           alert(\"‚ùå Unable to fetch location.\");\r\n// //         }\r\n// //       },\r\n// //       {\r\n// //         enableHighAccuracy: true, // FORCE POPUP\r\n// //         timeout: 8000,\r\n// //         maximumAge: 0,\r\n// //       }\r\n// //     );\r\n// //   };\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       MARK AVAILABLE ONLY AFTER LOCATION\r\n// //   ----------------------------------------------------------*/\r\n// //   const markAvailable = async () => {\r\n// //     if (!location) return alert(\"‚ö† Please share your location first!\");\r\n\r\n// //     await fetch(\"http://localhost:5000/donor/availability\", {\r\n// //       method: \"POST\",\r\n// //       headers: { \"Content-Type\": \"application/json\" },\r\n// //       body: JSON.stringify({\r\n// //         donorId,\r\n// //         available: true,\r\n// //         latitude: location.lat,\r\n// //         longitude: location.lng,\r\n// //       }),\r\n// //     });\r\n\r\n// //     setAvailable(true);\r\n// //   };\r\n\r\n// //   const markUnavailable = async () => {\r\n// //     await fetch(\"http://localhost:5000/donor/availability\", {\r\n// //       method: \"POST\",\r\n// //       headers: { \"Content-Type\": \"application/json\" },\r\n// //       body: JSON.stringify({ donorId, available: false }),\r\n// //     });\r\n\r\n// //     setAvailable(false);\r\n// //   };\r\n\r\n// //   /* ----------------------------------------------------------\r\n// //       UI SECTION\r\n// //   ----------------------------------------------------------*/\r\n// //   return (\r\n// //     <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n\r\n// //       {/* HEADER */}\r\n// //       <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n// //         <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n// //           <Heart className=\"w-7 h-7 fill-white\" />\r\n// //           Pulse Bank\r\n// //         </div>\r\n\r\n// //         <button\r\n// //           onClick={() => {\r\n// //             localStorage.removeItem(\"token\");\r\n// //             window.location.href = \"/\";\r\n// //           }}\r\n// //           className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n// //         >\r\n// //           Logout\r\n// //         </button>\r\n// //       </header>\r\n\r\n// //       {/* BODY */}\r\n// //       <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\r\n\r\n// //         {/* HERO CARD */}\r\n// //         <HeroCard\r\n// //           history={history}\r\n// //           location={location}\r\n// //           getLocation={getLocation}\r\n// //           available={available}\r\n// //           markAvailable={markAvailable}\r\n// //           markUnavailable={markUnavailable}\r\n// //         />\r\n\r\n// //         {/* VIDEO SECTION (AUTO-PLAY ON LOGIN) */}\r\n// //         <VideoSection showVideo={showVideo} setShowVideo={setShowVideo} />\r\n\r\n// //         <BloodDonationGuide />\r\n// //         <CompatibilityChart />\r\n// //         <ImpactStories />\r\n\r\n// //         <UrgentRequests requests={requests} />\r\n// //         <ScheduledRequests schedules={schedules} />\r\n// //         <DonationHistory history={history} />\r\n// //       </div>\r\n// //     </main>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     HERO CARD\r\n// // ----------------------------------------------------------*/\r\n// // function HeroCard({ history, location, getLocation, available, markAvailable, markUnavailable }: any) {\r\n// //   return (\r\n// //     <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n// //       <div className=\"p-10\">\r\n// //         <h2 className=\"text-3xl font-bold text-red-700\">Welcome Back, Life Saver!</h2>\r\n\r\n// //         <div className=\"mt-4\">\r\n// //           <p><b>{history.length}</b> total donations</p>\r\n// //           <p><b>{history.length * 400}</b> ml contributed</p>\r\n// //         </div>\r\n\r\n// //         <div className=\"mt-6 flex gap-4\">\r\n// //           <button onClick={getLocation} className=\"bg-blue-600 text-white px-5 py-3 rounded-lg flex items-center gap-2\">\r\n// //             <MapPin /> Share Location\r\n// //           </button>\r\n\r\n// //           {!available ? (\r\n// //             <button onClick={markAvailable} className=\"bg-green-600 text-white px-5 py-3 rounded-lg flex gap-2 items-center\">\r\n// //               <CheckCircle /> Mark Available\r\n// //             </button>\r\n// //           ) : (\r\n// //             <button onClick={markUnavailable} className=\"bg-gray-600 text-white px-5 py-3 rounded-lg flex gap-2 items-center\">\r\n// //               Disable Availability\r\n// //             </button>\r\n// //           )}\r\n// //         </div>\r\n// //       </div>\r\n\r\n// //       <div className=\"bg-gray-900 flex items-center justify-center\">\r\n// //         <Heart className=\"text-gray-400 w-20 h-20\" />\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     VIDEO - AUTO OPEN ON LOGIN\r\n// // ----------------------------------------------------------*/\r\n// // function VideoSection({ showVideo, setShowVideo }: any) {\r\n// //   return showVideo ? (\r\n// //     <div className=\"mt-8 shadow-xl rounded-xl border overflow-hidden\">\r\n// //       <iframe\r\n// //         className=\"w-full aspect-video\"\r\n// //         src=\"https://www.youtube.com/embed/_JlmwDqaYA0?autoplay=1\" // AUTO-PLAY ENABLED\r\n// //       ></iframe>\r\n\r\n// //       <button\r\n// //         onClick={() => setShowVideo(false)}\r\n// //         className=\"bg-red-600 w-full text-white py-2\"\r\n// //       >\r\n// //         Close Video\r\n// //       </button>\r\n// //     </div>\r\n// //   ) : null;\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     OTHER SECTIONS\r\n// // ----------------------------------------------------------*/\r\n\r\n// // function ScheduledRequests({ schedules }: any) {\r\n// //   if (!schedules.length) return null;\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Scheduled Donations</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {schedules.map((s: any, i: number) => (\r\n// //           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">Hospital: {s.requestId?.hospital}</h3>\r\n\r\n// //             <p className=\"mt-2 flex gap-2\"><Calendar /> {s.date}</p>\r\n// //             <p className=\"flex gap-2\"><Clock /> {s.time}</p>\r\n\r\n// //             <p className=\"mt-3 font-semibold\">\r\n// //               Status: <span className=\"bg-red-100 px-3 py-1 rounded-lg\">{s.status.toUpperCase()}</span>\r\n// //             </p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function DonationHistory({ history }: any) {\r\n// //   if (!history.length) return null;\r\n\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Donation History</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {history.map((h: any, i: number) => (\r\n// //           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-green-600\">\r\n// //             <p className=\"text-xl font-bold\">+ {h.units} units</p>\r\n// //             <p>{new Date(h.date).toLocaleDateString()}</p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function ImpactStories() {\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {[\"Sarah's Second Chance\", \"Newborn Battle Survivor\", \"Accident Hero Recovery\"].map((title, i) => (\r\n// //           <div key={i} className=\"p-4 rounded-xl shadow bg-red-50\">\r\n// //             <h3 className=\"font-bold text-red-700\">{title}</h3>\r\n// //             <p className=\"text-gray-600 text-sm\">Your donation made a difference ‚ù§Ô∏è</p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function UrgentRequests({ requests }: any) {\r\n// //   return (\r\n// //     <div className=\"mt-12\">\r\n// //       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">Nearby Hospitals Requesting Blood</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-3 gap-6\">\r\n// //         {requests.map((req: any, i: number) => (\r\n// //           <div key={i} className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\">\r\n// //             <h3 className=\"text-xl font-bold text-red-700\">{req.hospital}</h3>\r\n\r\n// //             <p className=\"text-gray-600 mt-1\">{req.locationKm} km away</p>\r\n\r\n// //             <div className=\"flex justify-between mt-3\">\r\n// //               <span className=\"font-bold\">{req.bloodType}</span>\r\n// //               <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n// //             </div>\r\n\r\n// //             <Link\r\n// //               href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n// //                 req.hospital\r\n// //               )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n// //             >\r\n// //               <button className=\"w-full mt-4 bg-red-600 text-white py-3 rounded-lg\">\r\n// //                 Schedule Donation\r\n// //               </button>\r\n// //             </Link>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // /* ----------------------------------------------------------\r\n// //     BLOOD GUIDE + COMPATIBILITY CHART\r\n// // ----------------------------------------------------------*/\r\n\r\n// // function BloodDonationGuide() {\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Donation Frequency Guide</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {[\r\n// //           { type: \"Whole Blood\", wait: 56, year: 6 },\r\n// //           { type: \"Plasma\", wait: 2, year: 24 },\r\n// //           { type: \"Platelets\", wait: 2, year: 24 },\r\n// //           { type: \"Red Cells\", wait: 112, year: 3 },\r\n// //         ].map((item, i) => (\r\n// //           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n// //             <h3 className=\"font-bold text-red-700\">{item.type}</h3>\r\n// //             <p>Every {item.wait} days</p>\r\n// //             <p className=\"text-gray-500 text-sm\">Annual limit: {item.year}</p>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// // function CompatibilityChart() {\r\n// //   const types = [\r\n// //     { type: \"O-\", donate: [\"Everyone\"] },\r\n// //     { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n// //     { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n// //     { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n// //     { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n// //     { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n// //     { type: \"AB+\", donate: [\"AB+\"] },\r\n// //   ];\r\n\r\n// //   return (\r\n// //     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n// //       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Compatibility Chart</h2>\r\n\r\n// //       <div className=\"grid md:grid-cols-2 gap-6\">\r\n// //         {types.map((b, i) => (\r\n// //           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n// //             <h3 className=\"font-bold text-red-700 mb-2\">{b.type}</h3>\r\n// //             <p>Donates to:</p>\r\n// //             <div className=\"flex flex-wrap gap-2 mt-1\">\r\n// //               {b.donate.map((d, j) => (\r\n// //                 <span key={j} className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\">\r\n// //                   {d}\r\n// //                 </span>\r\n// //               ))}\r\n// //             </div>\r\n// //           </div>\r\n// //         ))}\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n// \"use client\";\r\n\r\n// import Link from \"next/link\";\r\n// import { useEffect, useState, useRef } from \"react\";\r\n// import { jwtDecode } from \"jwt-decode\";\r\n// import {\r\n//   Heart,\r\n//   MapPin,\r\n//   CheckCircle,\r\n//   Play,\r\n//   Calendar,\r\n//   Clock,\r\n// } from \"lucide-react\";\r\n// import { io } from \"socket.io-client\";\r\n\r\n// export default function DonorDashboard() {\r\n//   const [history, setHistory] = useState<any[]>([]);\r\n//   const [requests, setRequests] = useState<any[]>([]);\r\n//   const [schedules, setSchedules] = useState<any[]>([]);\r\n//   const [donorId, setDonorId] = useState<string | null>(null);\r\n\r\n//   const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n//   const [available, setAvailable] = useState<boolean>(false);\r\n\r\n//   const [showVideo, setShowVideo] = useState(true); // autoplay\r\n\r\n//   const socketRef = useRef<any>(null);\r\n\r\n//   /* ----------------------------------------------\r\n//         LOAD DONOR ID\r\n//   ----------------------------------------------*/\r\n//   useEffect(() => {\r\n//     const token = localStorage.getItem(\"token\");\r\n//     if (token) {\r\n//       const decoded: any = jwtDecode(token);\r\n//       setDonorId(decoded.userId);\r\n//     }\r\n//   }, []);\r\n\r\n//   /* ----------------------------------------------\r\n//         SOCKET.IO ‚Äî HOSPITAL RESPONSE LISTENER\r\n//   ----------------------------------------------*/\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     const socket = io(\"http://localhost:5000\");\r\n//     socketRef.current = socket;\r\n\r\n//     socket.emit(\"register\", donorId);\r\n\r\n//     socket.on(\"schedule_status_updated\", (data) => {\r\n//       setSchedules((prev) =>\r\n//         prev.map((s) =>\r\n//           s._id === data.scheduleId ? { ...s, status: data.status } : s\r\n//         )\r\n//       );\r\n\r\n//       alert(`Your donation schedule was ${data.status.toUpperCase()}`);\r\n//     });\r\n\r\n//     return () => socket.disconnect();\r\n//   }, [donorId]);\r\n\r\n//   /* ----------------------------------------------\r\n//         FETCH DONATION HISTORY\r\n//   ----------------------------------------------*/\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n//       .then((res) => res.json())\r\n//       .then((data) => setHistory(data.donations || []));\r\n//   }, [donorId]);\r\n\r\n//   /* ----------------------------------------------\r\n//         FETCH DONOR SCHEDULES\r\n//   ----------------------------------------------*/\r\n//   useEffect(() => {\r\n//     if (!donorId) return;\r\n\r\n//     fetch(`http://localhost:5000/schedule/donor/${donorId}`)\r\n//       .then((res) => res.json())\r\n//       .then((data) => setSchedules(data.schedules || []));\r\n//   }, [donorId]);\r\n\r\n//   /* ----------------------------------------------\r\n//         FETCH ACTIVE REQUESTS\r\n//   ----------------------------------------------*/\r\n//   useEffect(() => {\r\n//     fetch(\"http://localhost:5000/donor/requests\")\r\n//       .then((res) => res.json())\r\n//       .then((data) => setRequests(data.requests || []));\r\n//   }, []);\r\n\r\n//   /* ----------------------------------------------\r\n//         FIXED LOCATION POPUP ‚Äî MANUAL ONLY\r\n//   ----------------------------------------------*/\r\n//   const getLocation = () => {\r\n//     navigator.geolocation.getCurrentPosition(\r\n//       (pos) => {\r\n//         setLocation({\r\n//           lat: pos.coords.latitude,\r\n//           lng: pos.coords.longitude,\r\n//         });\r\n//         alert(\"üìç Location captured successfully!\");\r\n//       },\r\n//       (err) => {\r\n//         if (err.code === 1) {\r\n//           alert(\"‚ö† Please ALLOW location access in the popup.\");\r\n//         } else {\r\n//           alert(\"‚ùå Unable to fetch location.\");\r\n//         }\r\n//       },\r\n//       {\r\n//         enableHighAccuracy: true,\r\n//         timeout: 8000,\r\n//         maximumAge: 0,\r\n//       }\r\n//     );\r\n//   };\r\n\r\n//   /* ----------------------------------------------\r\n//         AVAILABLE ONLY AFTER LOCATION\r\n//   ----------------------------------------------*/\r\n//   const markAvailable = async () => {\r\n//     if (!location) return alert(\"‚ö† Please click Share Location first!\");\r\n\r\n//     await fetch(\"http://localhost:5000/donor/availability\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({\r\n//         donorId,\r\n//         available: true,\r\n//         latitude: location.lat,\r\n//         longitude: location.lng,\r\n//       }),\r\n//     });\r\n\r\n//     setAvailable(true);\r\n//     alert(\"You are now available for hospitals!\");\r\n//   };\r\n\r\n//   const markUnavailable = async () => {\r\n//     await fetch(\"http://localhost:5000/donor/availability\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ donorId, available: false }),\r\n//     });\r\n\r\n//     setAvailable(false);\r\n//   };\r\n\r\n//   /* ----------------------------------------------\r\n//         UI SECTION ‚Äî NO UI CHANGES DONE\r\n//   ----------------------------------------------*/\r\n//   return (\r\n//     <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\r\n\r\n//       {/* HEADER */}\r\n//       <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0\">\r\n//         <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n//           <Heart className=\"w-7 h-7 fill-white\" /> Pulse Bank\r\n//         </div>\r\n\r\n//         <button\r\n//           onClick={() => {\r\n//             localStorage.removeItem(\"token\");\r\n//             window.location.href = \"/\";\r\n//           }}\r\n//           className=\"p-2 hover:bg-red-500 rounded-lg\"\r\n//         >\r\n//           Logout\r\n//         </button>\r\n//       </header>\r\n\r\n//       {/* BODY */}\r\n//       <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\r\n\r\n//         {/* HERO */}\r\n//         <HeroCard\r\n//           history={history}\r\n//           location={location}\r\n//           getLocation={getLocation}\r\n//           available={available}\r\n//           markAvailable={markAvailable}\r\n//           markUnavailable={markUnavailable}\r\n//         />\r\n\r\n//         {/* VIDEO ‚Äî AUTOPLAY */}\r\n//         <VideoSection showVideo={showVideo} setShowVideo={setShowVideo} />\r\n\r\n//         <BloodDonationGuide />\r\n//         <CompatibilityChart />\r\n//         <ImpactStories />\r\n\r\n//         <UrgentRequests requests={requests} />\r\n//         <ScheduledRequests schedules={schedules} />\r\n//         <DonationHistory history={history} />\r\n//       </div>\r\n//     </main>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n\r\n//         </div>\r\n\r\n//         <div className=\"mt-6 flex gap-4\">\r\n//           <button onClick={getLocation} className=\"bg-blue-600 text-white px-5 py-3 rounded-lg flex items-center gap-2\">\r\n//             <MapPin /> Share Location\r\n//           </button>\r\n\r\n//           {!available ? (\r\n//             <button onClick={markAvailable} className=\"bg-green-600 text-white px-5 py-3 rounded-lg flex items-center gap-2\">\r\n//               <CheckCircle /> Mark Available\r\n//             </button>\r\n//           ) : (\r\n//             <button onClick={markUnavailable} className=\"bg-gray-600 text-white px-5 py-3 rounded-lg\">\r\n//               Disable Availability\r\n//             </button>\r\n//           )}\r\n//         </div>\r\n//       </div>\r\n\r\n//       <div className=\"bg-gray-900 flex items-center justify-center\">\r\n//         <Heart className=\"text-gray-400 w-20 h-20\" />\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     VIDEO SECTION ‚Äî AUTO PLAY ENABLED\r\n// ----------------------------------------------------------*/\r\n// function VideoSection({ showVideo, setShowVideo }: any) {\r\n//   return showVideo ? (\r\n//     <div className=\"mt-8 shadow-xl rounded-xl border overflow-hidden\">\r\n//       <iframe\r\n//         className=\"w-full aspect-video\"\r\n//         src=\"https://www.youtube.com/embed/_JlmwDqaYA0?autoplay=1\"\r\n//       ></iframe>\r\n\r\n//       <button\r\n//         onClick={() => setShowVideo(false)}\r\n//         className=\"bg-red-600 w-full text-white py-2\"\r\n//       >\r\n//         Close Video\r\n//       </button>\r\n//     </div>\r\n//   ) : null;\r\n// }\r\n\r\n// /* ----------------------------------------------------------\r\n//     OTHER SECTIONS (UNCHANGED)\r\n// ----------------------------------------------------------*/\r\n\r\n// function ScheduledRequests({ schedules }: any) {\r\n//   if (!schedules.length) return null;\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Scheduled Donations</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {schedules.map((s: any, i: number) => (\r\n//           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500\">\r\n//             <h3 className=\"text-xl font-bold text-red-700\">Hospital: {s.requestId?.hospital}</h3>\r\n\r\n//             <p className=\"mt-2 flex gap-2\"><Calendar /> {s.date}</p>\r\n//             <p className=\"flex gap-2\"><Clock /> {s.time}</p>\r\n\r\n//             <p className=\"mt-3 font-semibold\">\r\n//               Status: <span className=\"bg-red-100 px-3 py-1 rounded-lg\">{s.status.toUpperCase()}</span>\r\n//             </p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function DonationHistory({ history }: any) {\r\n//   if (!history.length) return null;\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Donation History</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {history.map((h: any, i: number) => (\r\n//           <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-green-600\">\r\n//             <p className=\"text-xl font-bold\">+ {h.units} units</p>\r\n//             <p>{new Date(h.date).toLocaleDateString()}</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function ImpactStories() {\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {[\"Sarah's Second Chance\", \"Newborn Battle Survivor\", \"Accident Hero Recovery\"].map((title, i) => (\r\n//           <div key={i} className=\"p-4 rounded-xl shadow bg-red-50\">\r\n//             <h3 className=\"font-bold text-red-700\">{title}</h3>\r\n//             <p className=\"text-gray-600 text-sm\">Your donation made a difference ‚ù§Ô∏è</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function UrgentRequests({ requests }: any) {\r\n//   return (\r\n//     <div className=\"mt-12\">\r\n//       <h2 className=\"text-3xl font-bold text-red-700 mb-4\">Nearby Hospitals Requesting Blood</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-3 gap-6\">\r\n//         {requests.map((req: any, i) => (\r\n//           <div key={i} className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\">\r\n//             <h3 className=\"text-xl font-bold text-red-700\">{req.hospital}</h3>\r\n\r\n//             <p className=\"text-gray-600 mt-1\">{req.locationKm} km away</p>\r\n\r\n//             <div className=\"flex justify-between mt-3\">\r\n//               <span className=\"font-bold\">{req.bloodType}</span>\r\n//               <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n//             </div>\r\n\r\n//             <Link\r\n//               href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(\r\n//                 req.hospital\r\n//               )}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}\r\n//             >\r\n//               <button className=\"w-full mt-4 bg-red-600 text-white py-3 rounded-lg\">\r\n//                 Schedule Donation\r\n//               </button>\r\n//             </Link>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function BloodDonationGuide() {\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Donation Frequency Guide</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {[{ type: \"Whole Blood\", wait: 56, year: 6 },\r\n//           { type: \"Plasma\", wait: 2, year: 24 },\r\n//           { type: \"Platelets\", wait: 2, year: 24 },\r\n//           { type: \"Red Cells\", wait: 112, year: 3 }].map((i, index) => (\r\n//           <div key={index} className=\"p-5 border rounded-xl shadow\">\r\n//             <h3 className=\"font-bold text-red-700\">{i.type}</h3>\r\n//             <p>Every {i.wait} days</p>\r\n//             <p className=\"text-gray-500 text-sm\">Annual limit: {i.year}</p>\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// function CompatibilityChart() {\r\n//   const types = [\r\n//     { type: \"O-\", donate: [\"Everyone\"] },\r\n//     { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n//     { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n//     { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n//     { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n//     { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n//     { type: \"AB+\", donate: [\"AB+\"] },\r\n//   ];\r\n\r\n//   return (\r\n//     <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n//       <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Compatibility Chart</h2>\r\n\r\n//       <div className=\"grid md:grid-cols-2 gap-6\">\r\n//         {types.map((b, i) => (\r\n//           <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n//             <h3 className=\"font-bold text-red-700 mb-2\">{b.type}</h3>\r\n//             <p>Donates to:</p>\r\n\r\n//             <div className=\"flex flex-wrap gap-2 mt-1\">\r\n//               {b.donate.map((d, j) => (\r\n//                 <span\r\n//                   key={j}\r\n//                   className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\"\r\n//                 >\r\n//                   {d}\r\n//                 </span>\r\n//               ))}\r\n//             </div>\r\n\r\n//           </div>\r\n//         ))}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\nimport Link from \"next/link\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport {\r\n  Heart,\r\n  MapPin,\r\n  CheckCircle,\r\n  Play,\r\n  Calendar,\r\n  Clock,\r\n} from \"lucide-react\";\r\nimport ProfileMenu from \"@/components/profile-menu\";\r\nimport { useSocket } from \"@/hooks/useSocket\";\r\n\r\nexport default function DonorDashboard() {\r\n  const [history, setHistory] = useState<any[]>([]);\r\n  const [requests, setRequests] = useState<any[]>([]);\r\n  const [hospitalRequests, setHospitalRequests] = useState<any[]>([]);\r\n  const [recipientRequests, setRecipientRequests] = useState<any[]>([]);\r\n  const [schedules, setSchedules] = useState<any[]>([]);\r\n  const [donorId, setDonorId] = useState<string | null>(null);\r\n  const [donorName, setDonorName] = useState(\"Donor\");\r\n  const [donorEmail, setDonorEmail] = useState(\"\");\r\n  const [donorPhone, setDonorPhone] = useState(\"\");\r\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\r\n\r\n  const [location, setLocation] = useState<{ lat: number; lng: number } | null>(null);\r\n  const [available, setAvailable] = useState<boolean>(false);\r\n\r\n  // Auto-play video ON login, user asked this. Use true initially.\r\n  const [showVideo, setShowVideo] = useState<boolean>(true);\r\n\r\n  // Donation confirmation modal state\r\n  const [showConfirmModal, setShowConfirmModal] = useState<boolean>(false);\r\n  const [selectedRequest, setSelectedRequest] = useState<any>(null);\r\n  const [confirmLoading, setConfirmLoading] = useState<boolean>(false);\r\n\r\n  const socketRef = useSocket();\r\n\r\n  const [isRefreshing, setIsRefreshing] = useState(false);\r\n\r\n  /* ----------------------------------------------------------\r\n      REFRESH ALL DATA\r\n  ----------------------------------------------------------*/\r\n  const handleRefresh = async () => {\r\n    setIsRefreshing(true);\r\n    // Fetch history and schedules\r\n    if (donorId) {\r\n      try {\r\n        const historyRes = await fetch(`http://localhost:5000/donor/history/${donorId}`);\r\n        const historyData = await historyRes.json();\r\n        setHistory(historyData.donations || []);\r\n\r\n        const schedulesRes = await fetch(`http://localhost:5000/schedule/donor/${donorId}`);\r\n        const schedulesData = await schedulesRes.json();\r\n        setSchedules(schedulesData.schedules || []);\r\n      } catch (err) {\r\n        console.error(\"Refresh error:\", err);\r\n      }\r\n    }\r\n    // Fetch all requests\r\n    try {\r\n      const reqRes = await fetch(\"http://localhost:5000/request/all\");\r\n      const reqData = await reqRes.json();\r\n      const all = reqData.requests || [];\r\n      const hospitals = all.filter((r: any) => r.hospital && r.hospital !== \"\");\r\n      const recipients = all.filter((r: any) => !r.hospital || r.hospital === \"\");\r\n      setHospitalRequests(hospitals);\r\n      setRecipientRequests(recipients);\r\n      setRequests(all);\r\n    } catch (err) {\r\n      console.error(\"Request refresh error:\", err);\r\n    }\r\n    setIsRefreshing(false);\r\n  };\r\n\r\n  /* ----------------------------------------------------------\r\n      LOAD DONOR ID (from token)\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    const stored = localStorage.getItem(\"user\");\r\n    if (token) {\r\n      try {\r\n        const decoded: any = jwtDecode(token);\r\n        setDonorId(decoded.userId);\r\n      } catch (e) {\r\n        console.error(\"Invalid token\", e);\r\n      }\r\n    }\r\n    if (stored) {\r\n      const user = JSON.parse(stored);\r\n      setDonorName(user.fullName || \"Donor\");\r\n      setDonorEmail(user.email || \"\");\r\n      setDonorPhone(user.phone || \"\");\r\n    }\r\n  }, []);\r\n\r\n  /* ----------------------------------------------------------\r\n      SOCKET ‚Äì LISTEN FOR REAL-TIME UPDATES\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    const socket = socketRef.current;\r\n    if (!socket) return;\r\n\r\n    socket.emit(\"register\", donorId);\r\n\r\n    socket.on(\"schedule_status_updated\", (data: any) => {\r\n      setSchedules((prev) =>\r\n        prev.map((s) => (s._id === data.scheduleId ? { ...s, status: data.status } : s))\r\n      );\r\n      alert(`Your donation schedule was ${data.status.toUpperCase()}`);\r\n    });\r\n\r\n    // Listen for new requests created by hospitals and auto-refresh\r\n    socket.on(\"request_created\", (payload: any) => {\r\n      if (!payload || !payload._id) return;\r\n      setRequests((prev) => (prev.some((r: any) => r._id === payload._id) ? prev : [payload, ...prev]));\r\n\r\n      // Insert into hospitalRequests or recipientRequests depending on flag\r\n      if (payload.isRecipientRequest) {\r\n        setRecipientRequests((prev) => (prev.some((r: any) => r._id === payload._id) ? prev : [payload, ...prev]));\r\n      } else if (payload.hospital && payload.hospital !== \"\") {\r\n        setHospitalRequests((prev) => (prev.some((r: any) => r._id === payload._id) ? prev : [payload, ...prev]));\r\n      }\r\n\r\n      console.log(\"New request created:\", payload);\r\n    });\r\n\r\n    // Listen for availability changes from other donors (optional)\r\n    socket.on(\"availability_changed\", (payload: any) => {\r\n      console.log(\"Donor availability updated:\", payload);\r\n    });\r\n\r\n    // Listen for request fulfilled (when hospital marks donation completed)\r\n    socket.on(\"request_fulfilled\", (payload: any) => {\r\n      // Remove fulfilled request from active requests\r\n      setRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\r\n      setHospitalRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\r\n      setRecipientRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\r\n      \r\n      // Add to history\r\n      setHistory((prev) => [...prev, {\r\n        _id: payload.requestId,\r\n        units: payload.unitsNeeded,\r\n        bloodType: payload.bloodType,\r\n        date: new Date(),\r\n      }]);\r\n    });\r\n\r\n    return () => {\r\n      socket.off(\"schedule_status_updated\");\r\n      socket.off(\"request_created\");\r\n      socket.off(\"availability_changed\");\r\n      socket.off(\"request_fulfilled\");\r\n    };\r\n  }, [donorId, socketRef]);\r\n\r\n  /* ----------------------------------------------------------\r\n      FETCH HISTORY\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    if (!donorId) return;\r\n    fetch(`http://localhost:5000/donor/history/${donorId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => setHistory(data.donations || []))\r\n      .catch((err) => console.error(\"history fetch error\", err));\r\n  }, [donorId]);\r\n\r\n  /* ----------------------------------------------------------\r\n      FETCH SCHEDULES\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    if (!donorId) return;\r\n    fetch(`http://localhost:5000/schedule/donor/${donorId}`)\r\n      .then((res) => res.json())\r\n      .then((data) => setSchedules(data.schedules || []))\r\n      .catch((err) => console.error(\"schedules fetch err\", err));\r\n  }, [donorId]);\r\n\r\n  /* ----------------------------------------------------------\r\n      FETCH URGENT REQUESTS\r\n  ----------------------------------------------------------*/\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/request/all\")\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        const all = data.requests || [];\r\n        // split between hospital-made (have hospital field) and recipient-made (no hospital)\r\n        // Treat requests explicitly marked as recipient-created as recipient requests,\r\n        // even if they include a hospital name field (recipients sometimes specify hospital).\r\n        const hospitals = all.filter((r: any) => r.hospital && r.hospital !== \"\" && !r.isRecipientRequest);\r\n        const recipients = all.filter((r: any) => r.isRecipientRequest || !r.hospital || r.hospital === \"\");\r\n        setHospitalRequests(hospitals);\r\n        setRecipientRequests(recipients);\r\n        setRequests(all);\r\n        // DEBUG: log what we got\r\n        console.log(\"[Donor Dashboard] All requests:\", all);\r\n        console.log(\"[Donor Dashboard] Hospital requests:\", hospitals);\r\n        console.log(\"[Donor Dashboard] Hospitals with location:\", hospitals.filter((r: any) => r.location && r.location.latitude && r.location.longitude));\r\n      })\r\n      .catch((err) => console.error(\"requests fetch err\", err));\r\n  }, []);\r\n\r\n  /* ----------------------------------------------------------\r\n      getLocation (explicit click -> forces browser permission popup)\r\n      - we DO NOT auto-mark available here.\r\n  ----------------------------------------------------------*/\r\n  const requestLocation = () => {\r\n    if (!navigator.geolocation) return alert(\"Your browser does not support location\");\r\n    navigator.geolocation.getCurrentPosition(\r\n      (pos) => {\r\n        setLocation({ lat: pos.coords.latitude, lng: pos.coords.longitude });\r\n        alert(\"Location captured\");\r\n      },\r\n      (err) => {\r\n        if (err.code === 1) alert(\"Please allow location access\");\r\n        else alert(\"Unable to fetch location\");\r\n      },\r\n      { enableHighAccuracy: true }\r\n    );\r\n  };\r\n\r\n  /* ----------------------------------------------------------\r\n      markAvailable: only marks available after user clicked \"Share Location\" (so location exists)\r\n  ----------------------------------------------------------*/\r\n  const markAvailable = async () => {\r\n    if (!donorId) return alert(\"‚ö† Not logged in\");\r\n    if (!location) return alert(\"‚ö† Please share your location first!\");\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/donor/availability\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          donorId,\r\n          available: true,\r\n          latitude: location.lat,\r\n          longitude: location.lng,\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setAvailable(true);\r\n      } else {\r\n        alert(\"Error: \" + (data.message || \"Could not mark available\"));\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Network error while marking availability\");\r\n    }\r\n  };\r\n\r\n  const markUnavailable = async () => {\r\n    if (!donorId) return alert(\"‚ö† Not logged in\");\r\n    try {\r\n      const res = await fetch(\"http://localhost:5000/donor/availability\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ donorId, available: false }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        setAvailable(false);\r\n      } else {\r\n        alert(\"Error: \" + (data.message || \"Could not mark unavailable\"));\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Network error while marking unavailable\");\r\n    }\r\n  };\r\n\r\n  /* ----------------------------------------------------------\r\n      DONATION CONFIRMATION HANDLERS\r\n  ----------------------------------------------------------*/\r\n  const handleOpenConfirmModal = (request: any) => {\r\n    setSelectedRequest(request);\r\n    setShowConfirmModal(true);\r\n  };\r\n\r\n  const handleConfirmDonation = async () => {\r\n    if (!selectedRequest) return;\r\n    \r\n    // Call API to confirm donation\r\n    setConfirmLoading(true);\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/request/${selectedRequest._id}/confirm`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          action: \"Confirmed\",\r\n          confirmedBy: donorId,\r\n          notes: \"Donor confirmed and will proceed to schedule donation.\",\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        // Close modal and navigate to schedule page\r\n        setShowConfirmModal(false);\r\n        window.location.href = `/donor/schedule-donation?requestId=${selectedRequest._id}&hospital=${encodeURIComponent(\r\n          selectedRequest.hospital || \"\"\r\n        )}&units=${selectedRequest.unitsNeeded}&bloodType=${selectedRequest.bloodType}`;\r\n      } else {\r\n        alert(\"Error confirming donation: \" + (data.message || \"Unknown error\"));\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error confirming donation:\", err);\r\n      alert(\"Network error while confirming donation\");\r\n    } finally {\r\n      setConfirmLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRejectDonation = async (notes?: string) => {\r\n    if (!selectedRequest) return;\r\n\r\n    setConfirmLoading(true);\r\n    try {\r\n      const res = await fetch(`http://localhost:5000/request/${selectedRequest._id}/confirm`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          action: \"Rejected\",\r\n          confirmedBy: donorId,\r\n          notes: notes || \"Donor rejected donation request.\",\r\n        }),\r\n      });\r\n      const data = await res.json();\r\n      if (data.success) {\r\n        // Update local state to reflect rejection\r\n        setHospitalRequests((prev) =>\r\n          prev.map((r) =>\r\n            r._id === selectedRequest._id\r\n              ? { ...r, confirmationStatus: \"Rejected\" }\r\n              : r\r\n          )\r\n        );\r\n        setRecipientRequests((prev) =>\r\n          prev.map((r) =>\r\n            r._id === selectedRequest._id\r\n              ? { ...r, confirmationStatus: \"Rejected\" }\r\n              : r\r\n          )\r\n        );\r\n        setShowConfirmModal(false);\r\n        alert(\"Donation rejected. Hospital has been notified.\");\r\n      } else {\r\n        alert(\"Error rejecting donation: \" + (data.message || \"Unknown error\"));\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Error rejecting donation:\", err);\r\n      alert(\"Network error while rejecting donation\");\r\n    } finally {\r\n      setConfirmLoading(false);\r\n    }\r\n  };\r\n\r\n  /* ----------------------------------------------------------\r\n      UI\r\n  ----------------------------------------------------------*/\r\n  return (\r\n    <main className=\"min-h-screen bg-linear-to-br from-white via-red-50 to-white\">\r\n      {/* HEADER */}\r\n      <header className=\"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-20\">\r\n        <div className=\"flex items-center gap-3 text-2xl font-bold\">\r\n          <Heart className=\"w-7 h-7 fill-white\" />\r\n          {donorName}\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-3 relative\">\r\n          <button\r\n            onClick={() => setShowProfileMenu(!showProfileMenu)}\r\n            className=\"p-2 rounded-full hover:bg-red-500 transition bg-white text-red-600 w-10 h-10 flex items-center justify-center\"\r\n            title=\"Profile menu\"\r\n          >\r\n            üë§\r\n          </button>\r\n\r\n          {showProfileMenu && (\r\n            <div className=\"absolute right-0 top-12 bg-white text-gray-800 rounded-lg shadow-xl w-56 z-40\">\r\n              <div className=\"p-4 border-b\">\r\n                <p className=\"font-bold text-lg\">{donorName}</p>\r\n                <p className=\"text-sm text-gray-600\">{donorEmail}</p>\r\n                <p className=\"text-sm text-gray-600\">{donorPhone}</p>\r\n              </div>\r\n              <Link\r\n                href=\"/donor/profile\"\r\n                className=\"block px-4 py-2 hover:bg-gray-100 text-gray-800\"\r\n                onClick={() => setShowProfileMenu(false)}\r\n              >\r\n                üìã Edit Profile\r\n              </Link>\r\n              <button\r\n                onClick={() => {\r\n                  localStorage.clear();\r\n                  window.location.href = \"/\";\r\n                }}\r\n                className=\"w-full text-left px-4 py-2 hover:bg-gray-100 text-gray-800 border-t\"\r\n              >\r\n                üö™ Logout\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </header>\r\n\r\n      {/* BODY */}\r\n      <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\r\n        {/* HERO */}\r\n        <HeroCard\r\n          history={history}\r\n          location={location}\r\n          getLocation={requestLocation}\r\n          available={available}\r\n          markAvailable={markAvailable}\r\n          markUnavailable={markUnavailable}\r\n        />\r\n\r\n        {/* VIDEO - AUTO PLAY on login */}\r\n        <VideoSection showVideo={showVideo} setShowVideo={setShowVideo} />\r\n\r\n        {/* MAP: Hospital Request Locations */}\r\n        <div className=\"mt-6\">\r\n          <h2 className=\"text-2xl font-bold text-red-700 mb-3\">Nearby Hospital Requests</h2>\r\n          <div className=\"bg-white rounded-xl shadow border overflow-hidden\" style={{ height: \"400px\" }}>\r\n            {(() => {\r\n              const hospitalsToShow = (hospitalRequests || []).filter((r: any) => r.location && r.location.latitude && r.location.longitude).map((r: any) => ({\r\n                location: r.location,\r\n                name: r.hospital,\r\n                notes: `${r.unitsNeeded || \"\"} units ‚Äî ${r.bloodType || \"\"}`,\r\n              }));\r\n              console.log(\"[Map] Hospitals to render on map:\", hospitalsToShow);\r\n              return (\r\n                <LeafletMap\r\n                  activeDonors={[]}\r\n                  hospitals={hospitalsToShow}\r\n                  currentLocation={location}\r\n                />\r\n              );\r\n            })()}\r\n          </div>\r\n        </div>\r\n\r\n        {/* OTHER SECTIONS */}\r\n        <BloodDonationGuide />\r\n        <CompatibilityChart />\r\n        <ImpactStories />\r\n        <UrgentRequests hospitalRequests={hospitalRequests} recipientRequests={recipientRequests} />\r\n        <ScheduledRequests schedules={schedules} />\r\n        <DonationHistory history={history} />\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n   COMPONENTS - same structure and style you had\r\n----------------------------------------------------------*/\r\n\r\nfunction HeroCard({ history, location, getLocation, available, markAvailable, markUnavailable }: any) {\r\n  return (\r\n    <div className=\"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\r\n      <div className=\"p-10\">\r\n        <h2 className=\"text-3xl font-bold text-red-700\">Welcome Back, Life Saver!</h2>\r\n\r\n        <div className=\"mt-4\">\r\n          <p><b>{history.length}</b> total donations</p>\r\n          <p><b>{history.length * 400}</b> ml contributed</p>\r\n        </div>\r\n\r\n        <div className=\"mt-6 flex gap-4\">\r\n          <button onClick={getLocation} className=\"bg-linear-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-semibold hover:shadow-lg transition\">\r\n            <MapPin className=\"w-5 h-5\" /> Share Location\r\n          </button>\r\n\r\n          {!available ? (\r\n            <button onClick={markAvailable} className=\"bg-linear-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-lg flex gap-2 items-center font-semibold hover:shadow-lg transition\">\r\n              <CheckCircle className=\"w-5 h-5\" /> Mark Available\r\n            </button>\r\n          ) : (\r\n            <button onClick={markUnavailable} className=\"bg-linear-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-lg flex gap-2 items-center font-semibold hover:shadow-lg transition\">\r\n              ‚ùå Unavailable\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-gray-900 flex items-center justify-center\">\r\n        <Heart className=\"text-gray-400 w-20 h-20\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n   VIDEO SECTION - auto-play enabled via YouTube ?autoplay=1\r\n   NOTE: Some browsers block autoplay with sound; YouTube will attempt silent autoplay.\r\n----------------------------------------------------------*/\r\nfunction VideoSection({ showVideo, setShowVideo }: any) {\r\n  return showVideo ? (\r\n    <div className=\"mt-8 shadow-xl rounded-xl border overflow-hidden\">\r\n      <iframe\r\n        title=\"Intro video\"\r\n        className=\"w-full aspect-video\"\r\n        src=\"https://www.youtube.com/embed/_JlmwDqaYA0?autoplay=1&rel=0&modestbranding=1\"\r\n        allow=\"autoplay; encrypted-media\"\r\n      ></iframe>\r\n\r\n      <button onClick={() => setShowVideo(false)} className=\"bg-red-600 w-full text-white py-2\">\r\n        Close Video\r\n      </button>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n   Remaining components: ScheduledRequests, DonationHistory, ImpactStories, UrgentRequests,\r\n   BloodDonationGuide, CompatibilityChart\r\n   (Use the exact implementations from your existing file ‚Äî I'm copying the same)\r\n----------------------------------------------------------*/\r\n\r\nfunction ScheduledRequests({ schedules }: any) {\r\n  if (!schedules.length) return null;\r\n  return (\r\n    <div className=\"mt-12\">\r\n      <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Scheduled Donations</h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {schedules.map((s: any, i: number) => (\r\n          <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500\">\r\n            <h3 className=\"text-xl font-bold text-red-700\">Hospital: {s.requestId?.hospital}</h3>\r\n\r\n            <p className=\"mt-2 flex gap-2\"><Calendar /> {s.date}</p>\r\n            <p className=\"flex gap-2\"><Clock /> {s.time}</p>\r\n\r\n            <p className=\"mt-3 font-semibold\">\r\n              Status: <span className=\"bg-red-100 px-3 py-1 rounded-lg\">{s.status.toUpperCase()}</span>\r\n            </p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DonationHistory({ history }: any) {\r\n  if (!history.length) return null;\r\n\r\n  return (\r\n    <div className=\"mt-12\">\r\n      <h2 className=\"text-3xl font-bold text-red-700 mb-4\">My Donation History</h2>\r\n\r\n      <div className=\"grid md:grid-cols-3 gap-6\">\r\n        {history.map((h: any, i: number) => (\r\n          <div key={i} className=\"bg-white p-5 rounded-xl shadow border-l-4 border-green-600\">\r\n            <p className=\"text-xl font-bold\">+ {h.units} units</p>\r\n            <p>{new Date(h.date).toLocaleDateString()}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ImpactStories() {\r\n  return (\r\n    <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n      <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Stories of Impact</h2>\r\n\r\n      <div className=\"grid md:grid-cols-3 gap-6\">\r\n        {[\"Sarah's Second Chance\", \"Newborn Battle Survivor\", \"Accident Hero Recovery\"].map((title, i) => (\r\n          <div key={i} className=\"p-4 rounded-xl shadow bg-red-50\">\r\n            <h3 className=\"font-bold text-red-700\">{title}</h3>\r\n            <p className=\"text-gray-600 text-sm\">Your donation made a difference ‚ù§Ô∏è</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UrgentRequests({ hospitalRequests, recipientRequests }: any) {\r\n  return (\r\n    <div className=\"mt-12\">\r\n      <h2 className=\"text-3xl font-bold text-red-700 mb-4\">Nearby Urgent Requests</h2>\r\n\r\n      {/* Hospital-created requests */}\r\n      <div className=\"mt-6\">\r\n        <h3 className=\"text-xl font-semibold text-red-600 mb-3\">Hospital Requests</h3>\r\n        <div className=\"grid md:grid-cols-3 gap-6\">\r\n          {(hospitalRequests || []).map((req: any, i: number) => (\r\n            <div key={`h-${i}`} className=\"bg-white rounded-xl shadow p-5 border-l-4 border-red-600\">\r\n              <h4 className=\"text-lg font-bold text-red-700\">{req.hospital || \"Hospital\"}</h4>\r\n              <p className=\"text-gray-600 mt-1\">{req.locationKm ?? \"N/A\"} km away</p>\r\n\r\n              <div className=\"flex justify-between mt-3\">\r\n                <span className=\"font-bold\">{req.bloodType}</span>\r\n                <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n              </div>\r\n\r\n              {/* Map preview when hospital request includes explicit coordinates */}\r\n              {req.location && req.location.latitude && req.location.longitude ? (\r\n                <div className=\"mt-3 h-44 rounded-lg overflow-hidden border\">\r\n                  <LeafletMap activeDonors={[{ location: req.location, fullName: req.hospital, bloodType: req.bloodType }]} />\r\n                </div>\r\n              ) : (\r\n                <div className=\"mt-3 text-sm text-gray-500\">Map not available for this request</div>\r\n              )}\r\n\r\n              <Link href={`/donor/schedule-donation?requestId=${req._id}&hospital=${encodeURIComponent(req.hospital || \"\")}&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}>\r\n                <button className=\"w-full mt-4 bg-red-600 text-white py-3 rounded-lg\">Schedule Donation</button>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recipient-created requests */}\r\n      <div className=\"mt-10\">\r\n        <h3 className=\"text-xl font-semibold text-rose-600 mb-3\">Recipient Requests</h3>\r\n        <div className=\"grid md:grid-cols-3 gap-6\">\r\n          {(recipientRequests || []).map((req: any, i: number) => (\r\n            <div key={`r-${i}`} className=\"bg-white rounded-xl shadow p-5 border-l-4 border-rose-500\">\r\n              <h4 className=\"text-lg font-bold text-rose-600\">{req.recipientName || req.requestedBy?.fullName || req.requestedByName || req.requesterName || (typeof req.requestedBy === 'string' ? req.requestedBy : \"Recipient\")}</h4>\r\n              <p className=\"text-gray-600 mt-1\">{req.locationKm ?? \"N/A\"} km away</p>\r\n\r\n              <div className=\"flex justify-between mt-3\">\r\n                <span className=\"font-bold\">{req.bloodType}</span>\r\n                <span className=\"font-bold\">{req.unitsNeeded} units</span>\r\n              </div>\r\n\r\n              {/* For recipient requests, link to a details page if scheduling flow differs */}\r\n              <Link href={`/donor/schedule-donation?requestId=${req._id}&hospital=&units=${req.unitsNeeded}&bloodType=${req.bloodType}`}>\r\n                <button className=\"w-full mt-4 bg-rose-600 text-white py-3 rounded-lg\">Schedule Donation</button>\r\n              </Link>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ----------------------------------------------------------\r\n   BloodDonationGuide + CompatibilityChart (same as earlier)\r\n----------------------------------------------------------*/\r\n\r\nfunction BloodDonationGuide() {\r\n  return (\r\n    <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n      <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Donation Frequency Guide</h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {[\r\n          { type: \"Whole Blood\", wait: 56, year: 6 },\r\n          { type: \"Plasma\", wait: 2, year: 24 },\r\n          { type: \"Platelets\", wait: 2, year: 24 },\r\n          { type: \"Red Cells\", wait: 112, year: 3 },\r\n        ].map((item, i) => (\r\n          <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n            <h3 className=\"font-bold text-red-700\">{item.type}</h3>\r\n            <p>Every {item.wait} days</p>\r\n            <p className=\"text-gray-500 text-sm\">Annual limit: {item.year}</p>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CompatibilityChart() {\r\n  const types = [\r\n    { type: \"O-\", donate: [\"Everyone\"] },\r\n    { type: \"O+\", donate: [\"O+\", \"A+\", \"B+\", \"AB+\"] },\r\n    { type: \"A-\", donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"] },\r\n    { type: \"A+\", donate: [\"A+\", \"AB+\"] },\r\n    { type: \"B-\", donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"] },\r\n    { type: \"B+\", donate: [\"B+\", \"AB+\"] },\r\n    { type: \"AB-\", donate: [\"AB-\", \"AB+\"] },\r\n    { type: \"AB+\", donate: [\"AB+\"] },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"mt-10 p-6 bg-white rounded-xl shadow border\">\r\n      <h2 className=\"text-2xl font-bold text-red-700 mb-4\">Blood Compatibility Chart</h2>\r\n\r\n      <div className=\"grid md:grid-cols-2 gap-6\">\r\n        {types.map((b, i) => (\r\n          <div key={i} className=\"p-5 border rounded-xl shadow\">\r\n            <h3 className=\"font-bold text-red-700 mb-2\">{b.type}</h3>\r\n            <p>Donates to:</p>\r\n            <div className=\"flex flex-wrap gap-2 mt-1\">\r\n              {b.donate.map((d, j) => (\r\n                <span key={j} className=\"px-3 py-1 bg-blue-50 text-blue-700 rounded-md text-xs\">\r\n                  {d}\r\n                </span>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}