{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/lib/api-endpoints.ts"],"sourcesContent":["// Change this URL to your deployed backend later\nexport const API_BASE_URL = \"http://localhost:5000\";\n\n// =============================\n// AUTH ENDPOINTS\n// =============================\nexport const AUTH = {\n  register: `${API_BASE_URL}/auth/register`,\n  login: `${API_BASE_URL}/auth/login`,\n  me: `${API_BASE_URL}/auth/me`,  // optional\n};\n\n// =============================\n// DONOR ENDPOINTS\n// =============================\nexport const DONOR = {\n  donationHistory: (donorId: string) =>\n    `${API_BASE_URL}/donor/history/${donorId}`,\n\n  urgentRequests: `${API_BASE_URL}/donor/requests`,\n\n  addDonation: `${API_BASE_URL}/donor/add`,\n};\n\n// =============================\n// HOSPITAL ENDPOINTS\n// =============================\nexport const HOSPITAL = {\n  createRequest: `${API_BASE_URL}/request/add`,\n  getRequests: `${API_BASE_URL}/request/all`,\n};\n\n// =============================\n// RECIPIENT ENDPOINTS\n// =============================\nexport const RECIPIENT = {\n  getRequests: (recipientId: string) =>\n    `${API_BASE_URL}/recipient/requests/${recipientId}`,\n\n  requestStatus: (recipientId: string, requestId: string) =>\n    `${API_BASE_URL}/recipient/requests/${recipientId}/${requestId}`,\n};\n\n// =============================\n// REQUEST (General) ENDPOINTS\n// =============================\nexport const REQUEST = {\n  addRequest: `${API_BASE_URL}/request/add`,\n  getAllRequests: `${API_BASE_URL}/request/all`,\n};\n"],"names":[],"mappings":"AAAA,iDAAiD;;;;;;;;;;;;;;;AAC1C,MAAM,eAAe;AAKrB,MAAM,OAAO;IAClB,UAAU,GAAG,aAAa,cAAc,CAAC;IACzC,OAAO,GAAG,aAAa,WAAW,CAAC;IACnC,IAAI,GAAG,aAAa,QAAQ,CAAC;AAC/B;AAKO,MAAM,QAAQ;IACnB,iBAAiB,CAAC,UAChB,GAAG,aAAa,eAAe,EAAE,SAAS;IAE5C,gBAAgB,GAAG,aAAa,eAAe,CAAC;IAEhD,aAAa,GAAG,aAAa,UAAU,CAAC;AAC1C;AAKO,MAAM,WAAW;IACtB,eAAe,GAAG,aAAa,YAAY,CAAC;IAC5C,aAAa,GAAG,aAAa,YAAY,CAAC;AAC5C;AAKO,MAAM,YAAY;IACvB,aAAa,CAAC,cACZ,GAAG,aAAa,oBAAoB,EAAE,aAAa;IAErD,eAAe,CAAC,aAAqB,YACnC,GAAG,aAAa,oBAAoB,EAAE,YAAY,CAAC,EAAE,WAAW;AACpE;AAKO,MAAM,UAAU;IACrB,YAAY,GAAG,aAAa,YAAY,CAAC;IACzC,gBAAgB,GAAG,aAAa,YAAY,CAAC;AAC/C","debugId":null}},
    {"offset": {"line": 49, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/app/recipient/create-request/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { REQUEST } from \"@/lib/api-endpoints\";\r\nimport { jwtDecode } from \"jwt-decode\";\r\nimport { ArrowLeft, Heart, Droplet } from \"lucide-react\";\r\nimport Link from \"next/link\";\r\n\r\nexport default function RecipientCreateRequest() {\r\n  const router = useRouter();\r\n\r\n  const [recipientId, setRecipientId] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [form, setForm] = useState({\r\n    bloodType: \"O+\",\r\n    unitsNeeded: 1,\r\n    urgency: \"LOW\",\r\n    locationKm: 2,\r\n    hospital: \"\",\r\n    recipientName: \"\",\r\n  });\r\n\r\n  // STEP 1 — Get recipient ID from JWT token\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      try {\r\n        const decoded: any = jwtDecode(token);\r\n        if (decoded.role === \"recipient\") {\r\n          setRecipientId(decoded.userId);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Invalid token:\", err);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Handle form input\r\n  const updateForm = (e: any) => {\r\n    const { name, value } = e.target;\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [name]: name === \"unitsNeeded\" || name === \"locationKm\" ? Number(value) : value,\r\n    }));\r\n  };\r\n\r\n  // STEP 2 — Submit request to backend\r\n  const handleSubmit = async (e: any) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    if (!recipientId) {\r\n      alert(\"Recipient ID not found. Please log in again.\");\r\n      return;\r\n    }\r\n\r\n    const body = {\r\n      ...form,\r\n      requestedBy: recipientId,\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(REQUEST.addRequest, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        alert(data.message || \"Failed to submit request.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      alert(\"Blood request created successfully!\");\r\n      router.push(\"/recipient/dashboard\");\r\n    } catch (err) {\r\n      console.error(\"Error:\", err);\r\n      alert(\"Something went wrong.\");\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-xl mx-auto\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Create Blood Request</h1>\r\n\r\n      <form onSubmit={handleSubmit} className=\"bg-white shadow-lg rounded-xl p-6 space-y-6 border-l-4 border-red-600\">\r\n\r\n        {/* Recipient/Patient Name */}\r\n        <div>\r\n          <label className=\"block font-semibold text-gray-700 mb-1\">\r\n            Recipient/Patient Name *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"recipientName\"\r\n            value={form.recipientName}\r\n            onChange={updateForm}\r\n            required\r\n            placeholder=\"Enter recipient or patient name\"\r\n            className=\"w-full px-4 py-2 border rounded-lg\"\r\n          />\r\n        </div>\r\n\r\n        {/* Hospital Name */}\r\n        <div>\r\n          <label className=\"block font-semibold text-gray-700 mb-1\">\r\n            Hospital Name\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"hospital\"\r\n            value={form.hospital}\r\n            onChange={updateForm}\r\n            required\r\n            placeholder=\"Enter hospital name\"\r\n            className=\"w-full px-4 py-2 border rounded-lg\"\r\n          />\r\n        </div>\r\n\r\n        {/* Blood Type */}\r\n        <div>\r\n          <label className=\"block font-semibold text-gray-700 mb-1\">Blood Type</label>\r\n          <select\r\n            name=\"bloodType\"\r\n            value={form.bloodType}\r\n            onChange={updateForm}\r\n            className=\"w-full px-4 py-2 border rounded-lg\"\r\n          >\r\n            {[\"O+\", \"O-\", \"A+\", \"A-\", \"B+\", \"B-\", \"AB+\", \"AB-\"].map((b) => (\r\n              <option key={b} value={b}>{b}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Units Needed */}\r\n        <div>\r\n          <label className=\"block font-semibold text-gray-700 mb-1\">Units Needed</label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"unitsNeeded\"\r\n            value={form.unitsNeeded}\r\n            onChange={updateForm}\r\n            min={1}\r\n            className=\"w-full px-4 py-2 border rounded-lg\"\r\n          />\r\n        </div>\r\n\r\n        {/* Urgency */}\r\n        <div>\r\n          <label className=\"block font-semibold text-gray-700 mb-1\">Urgency Level</label>\r\n          <select\r\n            name=\"urgency\"\r\n            value={form.urgency}\r\n            onChange={updateForm}\r\n            className=\"w-full px-4 py-2 border rounded-lg\"\r\n          >\r\n            <option value=\"LOW\">Low</option>\r\n            <option value=\"MODERATE\">Moderate</option>\r\n            <option value=\"HIGH\">High</option>\r\n            <option value=\"CRITICAL\">Critical</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* Distance */}\r\n        <div>\r\n          <label className=\"block font-semibold text-gray-700 mb-1\">\r\n            Distance Radius (Km)\r\n          </label>\r\n          <input\r\n            type=\"number\"\r\n            name=\"locationKm\"\r\n            value={form.locationKm}\r\n            onChange={updateForm}\r\n            min={1}\r\n            className=\"w-full px-4 py-2 border rounded-lg\"\r\n          />\r\n        </div>\r\n\r\n        {/* Submit */}\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 disabled:opacity-50\"\r\n        >\r\n          {loading ? \"Submitting...\" : \"Submit Request\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 405, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 410, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/harsh/Downloads/PulseBank-main/PulseBank-main/node_modules/jwt-decode/build/esm/index.js"],"sourcesContent":["export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,0BAA0B;AACvC;AACA,kBAAkB,SAAS,CAAC,IAAI,GAAG;AACnC,SAAS,iBAAiB,GAAG;IACzB,OAAO,mBAAmB,KAAK,KAAK,OAAO,CAAC,QAAQ,CAAC,GAAG;QACpD,IAAI,OAAO,EAAE,UAAU,CAAC,GAAG,QAAQ,CAAC,IAAI,WAAW;QACnD,IAAI,KAAK,MAAM,GAAG,GAAG;YACjB,OAAO,MAAM;QACjB;QACA,OAAO,MAAM;IACjB;AACJ;AACA,SAAS,gBAAgB,GAAG;IACxB,IAAI,SAAS,IAAI,OAAO,CAAC,MAAM,KAAK,OAAO,CAAC,MAAM;IAClD,OAAQ,OAAO,MAAM,GAAG;QACpB,KAAK;YACD;QACJ,KAAK;YACD,UAAU;YACV;QACJ,KAAK;YACD,UAAU;YACV;QACJ;YACI,MAAM,IAAI,MAAM;IACxB;IACA,IAAI;QACA,OAAO,iBAAiB;IAC5B,EACA,OAAO,KAAK;QACR,OAAO,KAAK;IAChB;AACJ;AACO,SAAS,UAAU,KAAK,EAAE,OAAO;IACpC,IAAI,OAAO,UAAU,UAAU;QAC3B,MAAM,IAAI,kBAAkB;IAChC;IACA,WAAW,CAAC,UAAU,CAAC,CAAC;IACxB,MAAM,MAAM,QAAQ,MAAM,KAAK,OAAO,IAAI;IAC1C,MAAM,OAAO,MAAM,KAAK,CAAC,IAAI,CAAC,IAAI;IAClC,IAAI,OAAO,SAAS,UAAU;QAC1B,MAAM,IAAI,kBAAkB,CAAC,uCAAuC,EAAE,MAAM,GAAG;IACnF;IACA,IAAI;IACJ,IAAI;QACA,UAAU,gBAAgB;IAC9B,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,kDAAkD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC7G;IACA,IAAI;QACA,OAAO,KAAK,KAAK,CAAC;IACtB,EACA,OAAO,GAAG;QACN,MAAM,IAAI,kBAAkB,CAAC,gDAAgD,EAAE,MAAM,EAAE,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IAC3G;AACJ","ignoreList":[0],"debugId":null}}]
}