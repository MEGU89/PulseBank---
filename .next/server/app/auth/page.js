(()=>{var e={};e.id=235,e.ids=[235],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3469:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),r(430),r(9064),r(5866);var l=r(3191),o=r(8716),t=r(7922),s=r.n(t),i=r(5231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(a,n);let d=["",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,430)),"C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\auth\\page.tsx"]}]},{loading:[()=>Promise.resolve().then(r.bind(r,9862)),"C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\auth\\loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,9064)),"C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\auth\\page.tsx"],u="/auth/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new l.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/auth/page",pathname:"/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4933:(e,a,r)=>{Promise.resolve().then(r.bind(r,9026))},5303:()=>{},9026:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>d});var l=r(326),o=r(7577),t=r(5047),s=r(7427),i=r(434),n=r(1113);function d(){let e=(0,t.useSearchParams)(),a=(0,t.useRouter)(),[r,d]=(0,o.useState)(e.get("type")||"donor"),[c,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!1),[h,g]=(0,o.useState)({fullName:"",hospitalName:"",recipientName:"",email:"",password:"",phone:"",bloodType:"O+",hospitalId:"",licenseNumber:"",urgency:"low",latitude:"",longitude:"",address:""}),x=e=>{let{name:a,value:r}=e.target;g(e=>({...e,[a]:r}))},b=()=>{localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("role"),localStorage.removeItem("user"),localStorage.removeItem("locationSharing"),localStorage.removeItem("available"),console.log("[Auth] Cleared old authentication data from localStorage")},f=async e=>{e.preventDefault(),p(!0);let l="http://localhost:5000",o=c?`${l}/auth/login`:`${l}/auth/register`,t={fullName:"hospital"===r?h.hospitalName:"recipient"===r?h.recipientName:h.fullName,email:h.email,password:h.password,phone:h.phone,bloodType:"donor"===r?h.bloodType:void 0,hospitalId:"hospital"===r?h.hospitalId:void 0,role:r};if("hospital"===r&&!c){if(!h.latitude||!h.longitude){alert("Hospital location (latitude and longitude) is required"),p(!1);return}t.location={latitude:parseFloat(h.latitude),longitude:parseFloat(h.longitude)},h.address&&(t.address=h.address)}try{let e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await e.json();if(!r.success){alert(r.message||"Something went wrong."),p(!1);return}b(),r.token&&(localStorage.setItem("token",r.token),localStorage.setItem("userId",r.user.id||r.user._id),localStorage.setItem("role",r.user.role),localStorage.setItem("user",JSON.stringify(r.user)),console.log("[Auth] Saved new user to localStorage:",r.user));let l=r.user.role;"donor"===l&&a.push("/donor/dashboard"),"hospital"===l&&a.push("/hospital/dashboard"),"recipient"===l&&a.push("/recipient/dashboard")}catch(e){console.error(e),alert("Network or server error.")}p(!1)},y={hospital:{title:"Hospital Registration",icon:"\uD83C\uDFE5",color:"from-red-600 to-red-700",nameField:"hospitalName",placeholder:"Hospital Name"},donor:{title:"Become a Life Saver",icon:"❤️",color:"from-red-500 to-red-600",nameField:"fullName",placeholder:"Full Name"},recipient:{title:"Request Blood",icon:"\uD83E\uDE78",color:"from-red-600 to-red-800",nameField:"recipientName",placeholder:"Recipient Name"}}[r];return(0,l.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-white via-red-50 to-red-100 flex items-center justify-center p-4",children:[(0,l.jsxs)(i.default,{href:"/",className:"absolute top-4 left-4 flex items-center gap-2 text-red-600 hover:text-red-700 font-semibold",children:[l.jsx(s.Z,{className:"w-5 h-5"}),"Pulse Bank"]}),(0,l.jsxs)("div",{className:"w-full max-w-4xl",children:[l.jsx("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:["hospital","donor","recipient"].map(e=>(0,l.jsxs)("button",{onClick:()=>d(e),className:`p-6 rounded-xl border-2 transition transform hover:scale-105 ${r===e?"bg-red-600 text-white border-red-700 shadow-lg":"bg-white text-gray-700 border-gray-200 hover:border-red-400"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:"hospital"===e?"\uD83C\uDFE5":"donor"===e?"❤️":"\uD83E\uDE78"}),l.jsx("div",{className:"font-semibold capitalize",children:e})]},e))}),(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,l.jsxs)("div",{className:`bg-gradient-to-r ${y.color} text-white p-8 text-center`,children:[l.jsx("div",{className:"text-5xl mb-4",children:y.icon}),l.jsx("h1",{className:"text-3xl font-bold mb-2",children:y.title}),l.jsx("p",{className:"opacity-90",children:c?"Welcome back! Sign in to continue":"Join our community and save lives"})]}),(0,l.jsxs)("form",{onSubmit:f,className:"p-8 space-y-6",children:[!c&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:y.placeholder}),l.jsx("input",{type:"text",name:y.nameField,value:h[y.nameField],onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",placeholder:y.placeholder})]}),!c&&"hospital"===r&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Hospital ID"}),l.jsx("input",{type:"text",name:"hospitalId",value:h.hospitalId,onChange:x,required:!0,placeholder:"Enter hospital ID",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),c&&"hospital"===r&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Hospital ID"}),l.jsx("input",{type:"text",name:"hospitalId",value:h.hospitalId,onChange:x,required:!0,placeholder:"Enter hospital ID",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),"hospital"!==r&&(0,l.jsxs)("div",{className:c?"space-y-6":"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:h.email,onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",placeholder:c?"Enter your email":""})]}),!c&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]})]}),!c&&"hospital"===r&&(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:h.email,onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]})]}),!c&&"hospital"===r&&l.jsx(l.Fragment,{children:l.jsx(n.O,{onLocationDetected:(e,a)=>{g(r=>({...r,latitude:e.toString(),longitude:a.toString()}))},label:"Hospital Location",showMap:!1})}),c&&"hospital"===r&&(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:h.email,onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500",placeholder:"Optional for login"})]})]}),!c&&"donor"===r&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Blood Type"}),l.jsx("select",{name:"bloodType",value:h.bloodType,onChange:x,className:"w-full px-4 py-3 border border-gray-300 rounded-lg",children:["O+","O-","A+","A-","B+","B-","AB+","AB-"].map(e=>l.jsx("option",{value:e,children:e},e))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),l.jsx("input",{type:"password",name:"password",value:h.password,onChange:x,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500"})]}),l.jsx("button",{type:"button",onClick:()=>u(!c),className:"text-red-600 hover:text-red-700 font-semibold text-sm",children:c?"Create new account":"Already have an account? Login"}),l.jsx("button",{type:"submit",disabled:m,className:"w-full bg-gradient-to-r from-red-600 to-red-700 text-white font-bold py-3 rounded-lg hover:from-red-700 hover:to-red-800 disabled:opacity-50",children:m?"Processing...":c?"Sign In":"Create Account"})]})]})]})]})}},9862:(e,a,r)=>{"use strict";function l(){return null}r.r(a),r.d(a,{default:()=>l})},430:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>l});let l=(0,r(8570).createProxy)(String.raw`C:\Users\harsh\Downloads\PulseBank-main\PulseBank-main\app\auth\page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),l=a.X(0,[276,975,434,861],()=>r(3469));module.exports=l})();