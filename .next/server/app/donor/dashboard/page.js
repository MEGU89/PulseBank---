(()=>{var e={};e.id=35,e.ids=[35],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},1282:e=>{"use strict";e.exports=require("child_process")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7529:()=>{},6804:()=>{},8645:()=>{},4062:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(8246),s(9064),s(5866);var a=s(3191),r=s(8716),o=s(7922),l=s.n(o),n=s(5231),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);s.d(t,i);let d=["",{children:["donor",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8246)),"C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\donor\\dashboard\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9064)),"C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\harsh\\Downloads\\PulseBank-main\\PulseBank-main\\app\\donor\\dashboard\\page.tsx"],h="/donor/dashboard/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/donor/dashboard/page",pathname:"/donor/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1963:(e,t,s)=>{Promise.resolve().then(s.bind(s,6898))},1540:(e,t,s)=>{Promise.resolve().then(s.bind(s,5974)),Promise.resolve().then(s.bind(s,3708))},4332:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},6898:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A});var a=s(326),r=s(7577),o=s(1291),l=s(9669),n=s(361);function i({isOpen:e,request:t,onConfirm:s,onReject:i,isLoading:d=!1}){let[c,h]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1);if(!e||!t)return null;let u=t.isRecipientRequest?t.recipientName||"Recipient":t.hospital||"Hospital";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full mx-4 p-8",children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx(o.Z,{className:"w-12 h-12 text-red-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-2",children:"Confirm Donation?"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"From:"}),a.jsx("span",{className:"font-semibold",children:u})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Blood Type:"}),a.jsx("span",{className:"font-semibold text-red-600",children:t.bloodType})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Units Needed:"}),a.jsx("span",{className:"font-semibold",children:t.unitsNeeded})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600",children:"Distance:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[t.locationKm||"N/A"," km"]})]})]}),m?(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Why are you rejecting? (optional)"}),a.jsx("textarea",{value:c,onChange:e=>h(e.target.value),placeholder:"Enter reason for rejecting...",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",rows:3})]}):null,a.jsx("div",{className:"flex gap-3",children:m?(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{x(!1),h("")},disabled:d,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-900 rounded-lg font-semibold hover:bg-gray-300 disabled:opacity-50",children:"Back"}),(0,a.jsxs)("button",{onClick:()=>{i(c),x(!1),h("")},disabled:d,className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(l.Z,{className:"w-5 h-5"}),"Reject"]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>x(!0),disabled:d,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-900 rounded-lg font-semibold hover:bg-gray-300 disabled:opacity-50",children:"Reject"}),(0,a.jsxs)("button",{onClick:s,disabled:d,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 flex items-center justify-center gap-2",children:[a.jsx(n.Z,{className:"w-5 h-5"}),"Confirm"]})]})}),d&&a.jsx("p",{className:"text-center text-sm text-gray-600 mt-3",children:"Processing..."})]})})}var d=s(3265),c=s(434);s(8201);var h=s(7427),m=s(6283),x=s(7358),u=s(2881);let p=(0,u.Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var g=s(1810),b=s(5562),f=s(4019),y=s(8998);let j=(0,u.Z)("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);var v=s(7018);let w=(0,u.Z)("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),N=(0,u.Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var k=s(3634);let D=(0,u.Z)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),S=(0,u.Z)("Ambulance",[["path",{d:"M10 10H6",key:"1bsnug"}],["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.28a1 1 0 0 0-.684-.948l-1.923-.641a1 1 0 0 1-.578-.502l-1.539-3.076A1 1 0 0 0 16.382 8H14",key:"lrkjwd"}],["path",{d:"M8 8v4",key:"1fwk8c"}],["path",{d:"M9 18h6",key:"x1upvd"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var C=s(1264);(0,d.default)(async()=>{},{loadableGenerated:{modules:["app\\donor\\dashboard\\page.tsx -> @/components/LeafletMap"]},ssr:!1});let P=(0,d.default)(async()=>{},{loadableGenerated:{modules:["app\\donor\\dashboard\\page.tsx -> @/components/HospitalRequestsMap"]},ssr:!1});function A(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[j,v]=(0,r.useState)(null),[w,N]=(0,r.useState)("Donor"),[k,D]=(0,r.useState)(""),[S,A]=(0,r.useState)(""),[R,z]=(0,r.useState)(""),[_,H]=(0,r.useState)(!1),[$,L]=(0,r.useState)(null),[U,F]=(0,r.useState)(!1),[J,G]=(0,r.useState)(!1),[Y,V]=(0,r.useState)(20),[K,W]=(0,r.useState)(0),[X,Q]=(0,r.useState)(!0),[ee,et]=(0,r.useState)(!1),[es,ea]=(0,r.useState)(null),[er,eo]=(0,r.useState)(!1);(0,C.s)();let[el,en]=(0,r.useState)(!1),ei=async()=>{try{let e=await fetch("http://localhost:5000/request/all"),t=(await e.json()).requests||[];console.log("[Dashboard] Fetched raw requests:",t.length),t.length>0&&console.log("[Dashboard] Sample raw request:",{hospital:t[0].hospital,phone:t[0].phone,address:t[0].address,location:t[0].location});let s=(e,t,s,a)=>{let r=(s-e)*Math.PI/180,o=(a-t)*Math.PI/180,l=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(o/2)*Math.sin(o/2);return Math.round(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*63710)/10},a=t.map(e=>{if($&&e.location&&e.location.latitude&&e.location.longitude){let t=s($.lat,$.lng,e.location.latitude,e.location.longitude);return console.log(`[Dashboard] Distance calc: Donor(${$.lat.toFixed(4)}, ${$.lng.toFixed(4)}) -> Hospital ${e.hospital}(${e.location.latitude}, ${e.location.longitude}) = ${t}km`),{...e,calculatedDistance:t}}return e}),r=a.filter(e=>e.hospital&&""!==e.hospital&&!e.isRecipientRequest&&e.location&&e.location.latitude&&e.location.longitude&&!!$&&e.calculatedDistance<=20),l=a.filter(e=>!0===e.isRecipientRequest&&e.location&&e.location.latitude&&e.location.longitude&&(!$||e.calculatedDistance<=20));if(n(r),u(l),o(a),console.log("[Dashboard] Loaded hospitals within 20km:",r.length),r.length>0){let e=r[0];console.log("[Dashboard] Sample hospital after processing:",{hospital:e.hospital,phone:e.phone,address:e.address,calculatedDistance:e.calculatedDistance,location:e.location})}}catch(e){console.error("Request fetch error:",e)}},ed=async()=>{if(!j)return alert("⚠ Not logged in");if(!$)return alert("⚠ Please share your location first!");try{let e=await fetch("http://localhost:5000/donor/availability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({donorId:j,available:!0,latitude:$.lat,longitude:$.lng})}),t=await e.json();if(t.success){F(!0);let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.available=!0,localStorage.setItem("user",JSON.stringify(t))}}else alert("Error: "+(t.message||"Could not mark available"))}catch(e){console.error(e),alert("Network error while marking availability")}},ec=async()=>{if(!j)return alert("⚠ Not logged in");try{let e=await fetch("http://localhost:5000/donor/availability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({donorId:j,available:!1})}),t=await e.json();if(t.success){F(!1);let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.available=!1,localStorage.setItem("user",JSON.stringify(t))}}else alert("Error: "+(t.message||"Could not mark unavailable"))}catch(e){console.error(e),alert("Network error while marking unavailable")}},eh=async()=>{if(es){eo(!0);try{let e=await fetch(`http://localhost:5000/request/${es._id}/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"Confirmed",confirmedBy:j,notes:"Donor confirmed and will proceed to schedule donation."})}),t=await e.json();if(t.success){try{await fetch("http://localhost:5000/email/send-donation-scheduled",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:es._id,donorId:j,donorName:w,donorEmail:k,hospital:es.hospital,bloodType:es.bloodType,units:es.unitsNeeded,recipientName:es.recipientName,recipientEmail:es.recipientEmail,isRecipientRequest:es.isRecipientRequest})})}catch(e){console.error("Error sending emails:",e)}et(!1),window.location.href=`/donor/schedule-donation?requestId=${es._id}&hospital=${encodeURIComponent(es.hospital||"")}&units=${es.unitsNeeded}&bloodType=${es.bloodType}`}else alert("Error confirming donation: "+(t.message||"Unknown error"))}catch(e){console.error("Error confirming donation:",e),alert("Network error while confirming donation")}finally{eo(!1)}}},em=async e=>{if(es){eo(!0);try{let t=await fetch(`http://localhost:5000/request/${es._id}/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"Rejected",confirmedBy:j,notes:e||"Donor rejected donation request."})}),s=await t.json();s.success?(n(e=>e.map(e=>e._id===es._id?{...e,confirmationStatus:"Rejected"}:e)),u(e=>e.map(e=>e._id===es._id?{...e,confirmationStatus:"Rejected"}:e)),et(!1),alert("Donation rejected. Hospital has been notified.")):alert("Error rejecting donation: "+(s.message||"Unknown error"))}catch(e){console.error("Error rejecting donation:",e),alert("Network error while rejecting donation")}finally{eo(!1)}}};return(0,a.jsxs)("main",{className:"min-h-screen bg-linear-to-br from-white via-red-50 to-white",children:[(0,a.jsxs)("header",{className:"bg-red-600 text-white p-6 shadow-lg flex justify-between items-center sticky top-0 z-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 text-2xl font-bold",children:[a.jsx(h.Z,{className:"w-7 h-7 fill-white"}),w]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 relative",children:[a.jsx("button",{onClick:()=>H(!_),className:"p-2 rounded-full hover:bg-red-500 transition bg-white text-red-600 w-10 h-10 flex items-center justify-center",title:"Profile menu",children:"\uD83D\uDC64"}),_&&(0,a.jsxs)("div",{className:"absolute right-0 top-12 bg-gradient-to-b from-white to-gray-50 text-gray-800 rounded-2xl shadow-2xl w-64 z-40 border border-red-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-5 bg-gradient-to-r from-red-50 to-red-100 border-b-2 border-red-200",children:[a.jsx("p",{className:"font-bold text-lg text-red-700",children:w}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k}),a.jsx("p",{className:"text-sm text-gray-600",children:S})]}),(0,a.jsxs)("div",{className:"py-2",children:[(0,a.jsxs)(c.default,{href:"/donor/profile",className:"flex items-center gap-3 px-4 py-3 hover:bg-red-50 text-gray-800 transition border-l-4 border-transparent hover:border-red-600",onClick:()=>H(!1),children:[a.jsx(m.Z,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"font-medium",children:"Edit Profile"})]}),(0,a.jsxs)(c.default,{href:"/donor/history",className:"flex items-center gap-3 px-4 py-3 hover:bg-orange-50 text-gray-800 transition border-l-4 border-transparent hover:border-orange-600",onClick:()=>H(!1),children:[a.jsx(x.Z,{className:"w-5 h-5 text-orange-600"}),a.jsx("span",{className:"font-medium",children:"View History"})]}),(0,a.jsxs)(c.default,{href:"/donor/perks",className:"flex items-center gap-3 px-4 py-3 hover:bg-yellow-50 text-gray-800 transition border-l-4 border-transparent hover:border-yellow-600",onClick:()=>H(!1),children:[a.jsx(p,{className:"w-5 h-5 text-yellow-600"}),a.jsx("span",{className:"font-medium",children:"View Perks"})]}),(0,a.jsxs)("button",{onClick:()=>{if(J){let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.locationSharingStoppedAt=new Date().toISOString(),t.sleepTime=Y,localStorage.setItem("user",JSON.stringify(t))}}localStorage.removeItem("token"),window.location.href="/"},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-100 text-gray-800 transition border-l-4 border-transparent hover:border-red-700",children:[a.jsx(g.Z,{className:"w-5 h-5 text-red-700"}),a.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-12",children:[a.jsx(E,{donorName:w,profileImage:R,getLocation:()=>{if(!navigator.geolocation)return alert("Your browser does not support location");navigator.geolocation.getCurrentPosition(async e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};console.log("[Donor Dashboard] Location shared:",t),L(t),G(!0);let s=localStorage.getItem("user");if(s){let e=JSON.parse(s);e.locationSharing=!0,e.locationSharingStoppedAt=null,localStorage.setItem("user",JSON.stringify(e))}setTimeout(async()=>{await ei(),console.log("[Donor Dashboard] Requests reloaded after location share")},100),alert("Location captured and sharing enabled")},e=>{console.error("[Donor Dashboard] Geolocation error:",e),1===e.code?alert("Please allow location access"):alert("Unable to fetch location")},{enableHighAccuracy:!0,timeout:15e3})},stopLocationSharing:()=>{G(!1),L(null),n([]);let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);t.locationSharing=!1,t.locationSharingStoppedAt=null,localStorage.setItem("user",JSON.stringify(t))}alert("Location sharing stopped")},locationSharing:J,available:U,markAvailable:ed,markUnavailable:ec,currentQuote:["\uD83E\uDE78 Your donation saves up to 3 lives. Be a hero today!","\uD83E\uDE78 One donation, three lives. You have the power to help.","\uD83E\uDE78 Blood donation is a gift of love. Give today, save a life tomorrow.","\uD83E\uDE78 Donate blood. It's the simplest way to make a difference.","\uD83E\uDE78 Every drop counts. Your blood donation matters more than you know.","\uD83E\uDE78 Be someone's type O positive. Donate blood today.","\uD83E\uDE78 A patient without blood is a patient without hope. Donate now.","\uD83E\uDE78 Your generosity flows through us. Thank you for donating!","\uD83E\uDE78 Blood donation is the greatest gift of all. Keep giving.","\uD83E\uDE78 Donate blood and become a real-life superhero."][K]}),a.jsx(q,{showVideo:X,setShowVideo:Q}),a.jsx("div",{className:"max-w-7xl mx-auto p-6",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border-2 border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(b.Z,{className:"w-8 h-8 text-red-600"}),a.jsx("h2",{className:"text-3xl font-bold text-red-700",children:"Nearby Blood Requests"})]}),l.length>0||d.length>0?a.jsx(a.Fragment,{children:$?a.jsx(P,{hospitalRequests:[...l,...d],donorLocation:$}):null}):(0,a.jsxs)("div",{className:"text-center py-12 bg-red-50 rounded-xl",children:[a.jsx(b.Z,{className:"w-12 h-12 text-red-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600 font-semibold",children:"No blood requests found"}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Check back later for new blood requests from hospitals and recipients"})]})]})}),a.jsx(I,{schedules:f}),a.jsx(T,{}),a.jsx(O,{}),a.jsx(Z,{}),a.jsx(B,{schedules:f}),a.jsx(M,{history:e})]}),a.jsx(i,{isOpen:ee,request:es,onConfirm:eh,onReject:em,isLoading:er})]})}function E({donorName:e,profileImage:t,getLocation:s,stopLocationSharing:r,locationSharing:o,available:l,markAvailable:i,markUnavailable:d,currentQuote:c}){return console.log("[HeroCard] Rendering with profileImage:",t),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"p-10",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-red-700",children:["Welcome back",e?`, ${e.split(" ")[0]}`:"","!"]}),a.jsx("p",{className:"text-gray-700 mt-2 text-lg italic font-semibold text-red-600 min-h-[60px] flex items-center",children:c}),(0,a.jsxs)("div",{className:"mt-6 flex flex-col gap-4",children:[a.jsx("div",{className:"flex gap-2",children:o?(0,a.jsxs)("button",{onClick:r,className:"bg-linear-to-r from-purple-500 to-purple-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-semibold hover:shadow-lg transition",children:[a.jsx(b.Z,{className:"w-5 h-5"})," Stop Sharing"]}):(0,a.jsxs)("button",{onClick:s,className:"bg-linear-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-semibold hover:shadow-lg transition",children:[a.jsx(b.Z,{className:"w-5 h-5"})," Share Location"]})}),a.jsx("div",{className:"flex gap-2",children:l?(0,a.jsxs)("button",{onClick:d,className:"bg-linear-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-lg flex gap-2 items-center font-semibold hover:shadow-lg transition",children:[a.jsx(f.Z,{className:"w-5 h-5"})," Unavailable"]}):(0,a.jsxs)("button",{onClick:i,className:"bg-linear-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-lg flex gap-2 items-center font-semibold hover:shadow-lg transition",children:[a.jsx(n.Z,{className:"w-5 h-5"})," Mark Available"]})})]})]}),a.jsx("div",{className:"bg-gradient-to-br from-red-50 via-red-100 to-red-200 flex items-center justify-center p-4 min-h-[280px]",children:t?a.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:a.jsx("img",{src:t,alt:"Donor profile",className:"max-w-full max-h-[250px] rounded-lg shadow-2xl object-contain"})}):(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(h.Z,{className:"text-red-500 w-20 h-20"}),a.jsx("p",{className:"text-red-600 text-sm font-medium",children:"Upload your photo"})]})})]})}function q({showVideo:e,setShowVideo:t}){return e?(0,a.jsxs)("div",{className:"mt-10 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500 via-red-400 to-red-500 rounded-2xl blur-lg opacity-50 -z-10"}),(0,a.jsxs)("div",{className:"relative bg-gradient-to-br from-red-50 to-white rounded-2xl shadow-2xl overflow-hidden border-2 border-red-200 p-4",children:[(0,a.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-4xl",children:"\uD83C\uDFAC"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-red-700",children:"Donor Education Video"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Learn about blood donation & impact"})]})]}),a.jsx("button",{onClick:()=>t(!1),className:"text-red-600 hover:text-red-800 text-2xl transition",title:"Close video",children:"✕"})]}),a.jsx("div",{className:"relative rounded-xl overflow-hidden bg-black shadow-lg",children:a.jsx("iframe",{title:"Intro video",className:"w-full aspect-video",src:"https://www.youtube.com/embed/_JlmwDqaYA0?autoplay=1&rel=0&modestbranding=1",allow:"autoplay; encrypted-media"})}),a.jsx("button",{onClick:()=>t(!1),className:"w-full mt-4 bg-gradient-to-r from-red-500 to-red-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition",children:"Close Video"})]})]}):null}function B({schedules:e}){let t=(e||[]).filter(e=>e.status&&"completed"!==e.status.toLowerCase()&&"cancelled"!==e.status.toLowerCase());return t.length?(0,a.jsxs)("div",{className:"mt-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-red-700 mb-4",children:"My Scheduled Donations"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow border-l-4 border-orange-500",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-red-700",children:["Hospital: ",e.requestId?.hospital]}),(0,a.jsxs)("p",{className:"mt-2 flex gap-2",children:[a.jsx(x.Z,{})," ",e.date]}),(0,a.jsxs)("p",{className:"flex gap-2",children:[a.jsx(y.Z,{})," ",e.time]}),(0,a.jsxs)("p",{className:"mt-3 font-semibold",children:["Status: ",a.jsx("span",{className:"bg-red-100 px-3 py-1 rounded-lg",children:e.status.toUpperCase()})]})]},t))})]}):null}function M({history:e}){return e.length?(0,a.jsxs)("div",{className:"mt-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-red-700 mb-4",children:"My Donation History"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:e.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow border-l-4 border-green-600",children:[(0,a.jsxs)("p",{className:"text-xl font-bold",children:["+ ",e.units," units"]}),a.jsx("p",{children:new Date(e.date).toLocaleDateString()})]},t))})]}):null}function Z(){let[e,t]=(0,r.useState)(0),[s,o]=(0,r.useState)(!0),l=[{title:"Life-Saving Donation Saves 3 Lives",outcome:"One blood donation can save up to 3 lives. A single donation in Delhi today helped 3 emergency patients.",icon:"droplet",impact:"+3 lives saved",date:"Today",image:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=500&h=400&fit=crop"},{title:"Critical Surgery Averted",outcome:"A young accident victim received emergency transfusion from our donors. Now recovering well at Apollo Hospital.",icon:"hospital",impact:"1 life saved",date:"Yesterday",image:"https://images.unsplash.com/photo-1631217b5f58-d699e5edd3a5?w=500&h=400&fit=crop"},{title:"Newborn Gets Second Chance",outcome:"A premature baby in NICU received platelet transfusion thanks to donors. Mother says 'They gave us hope'.",icon:"baby",impact:"1 child saved",date:"2 days ago",image:"https://images.unsplash.com/photo-1516627145497-ae3dbe626c3d?w=500&h=400&fit=crop"},{title:"Blood Camp Success",outcome:"200 donors participated in blood drive at Mumbai Corporate Park. 280 units collected for hospitals in need.",icon:"target",impact:"+280 units",date:"3 days ago",image:"https://images.unsplash.com/photo-1631217b5f58-d699e5edd3a5?w=500&h=400&fit=crop"},{title:"Cancer Patient Gets Help",outcome:"Leukemia patient undergoing chemotherapy received 2 units of whole blood. Treatment proceeding smoothly.",icon:"zap",impact:"1 patient sustained",date:"4 days ago",image:"https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=500&h=400&fit=crop"},{title:"Rare Blood Type Found",outcome:"O- negative donor's blood matched rare case. Thalassemia patient received critical transfusion in Chennai.",icon:"star",impact:"1 critical match",date:"5 days ago",image:"https://images.unsplash.com/photo-1624507898257-dae5d0ed8202?w=500&h=400&fit=crop"}],n=l.filter(e=>e.image&&""!==e.image.trim());if(0===n.length)return(0,a.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-red-700 mb-6",children:"\uD83E\uDE78 Donor Impact Stories"}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[a.jsx(h.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Impact stories coming soon..."})]})]});let i=n[e%n.length];return(0,a.jsxs)("div",{className:"mt-10 p-8 bg-gradient-to-r from-red-50 via-red-100 to-red-50 rounded-2xl shadow-xl border-2 border-red-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-red-700 flex items-center gap-3",children:[a.jsx("span",{className:"text-4xl animate-pulse",children:"\uD83D\uDCF0"})," Live Donation Impact"]}),a.jsx("div",{className:"flex gap-2",children:l.map((s,r)=>a.jsx("button",{onClick:()=>{o(!1),setTimeout(()=>{t(r),o(!0)},100)},className:`h-2 rounded-full transition-all duration-300 cursor-pointer ${r===e?"bg-red-600 w-8":"bg-red-200 w-2 hover:bg-red-300"}`,title:`Go to news ${r+1}`},r))})]}),(0,a.jsxs)("div",{className:`transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,children:[a.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden border border-red-100",children:(0,a.jsxs)("div",{className:"p-8 space-y-4",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-red-700 mb-2",children:i.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"bg-red-600 text-white px-3 py-1 rounded-full text-sm font-semibold flex items-center gap-2",children:[((e,t="w-5 h-5")=>{let s=`${t} text-white`;switch(e){case"droplet":return a.jsx(j,{className:s});case"hospital":return a.jsx(v.Z,{className:s});case"baby":return a.jsx(w,{className:s});case"target":return a.jsx(N,{className:s});case"zap":return a.jsx(k.Z,{className:s});case"star":return a.jsx(D,{className:s});case"heart":default:return a.jsx(h.Z,{className:s});case"ambulance":return a.jsx(S,{className:s})}})(i.icon,"w-4 h-4"),i.date]}),a.jsx("span",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-lg text-sm font-bold",children:i.impact})]})]})}),a.jsx("p",{className:"text-gray-700 text-base leading-relaxed",children:i.outcome}),a.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl p-4 border-l-4 border-orange-400",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[a.jsx("span",{className:"font-bold text-orange-600",children:"\uD83D\uDCA1 Key Insight:"})," ",i.outcome.split(".")[0],"."]})})]})}),a.jsx("div",{className:"mt-4 bg-white rounded-lg p-4 border-l-4 border-blue-400 shadow-md",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[a.jsx("span",{className:"font-bold text-blue-600",children:"ℹ️ Did you know?"})," Every 2 seconds someone in the world needs blood. Your donation can save up to 3 lives, and you can donate again in just 56 days!"]})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-6 gap-4",children:[a.jsx("button",{onClick:()=>{o(!1),setTimeout(()=>{t(e=>(e-1+n.length)%n.length),o(!0)},100)},className:"bg-red-600 hover:bg-red-700 text-white p-3 rounded-full shadow-lg transition",title:"Previous news",children:"← Prev"}),(0,a.jsxs)("span",{className:"text-gray-600 font-semibold text-sm",children:[e+1," / ",n.length]}),a.jsx("button",{onClick:()=>{o(!1),setTimeout(()=>{t(e=>(e+1)%n.length),o(!0)},100)},className:"bg-red-600 hover:bg-red-700 text-white p-3 rounded-full shadow-lg transition",title:"Next news",children:"Next →"})]})]})}function I({schedules:e}){let t=e?.length||0,s=e?.reduce((e,t)=>e+(t.requestId?.unitsNeeded||t.unitsNeeded||0),0)||0,r=e?.reduce((e,t)=>{let s=t.status||"Pending";return e[s]=(e[s]||0)+1,e},{})||{};return console.log("[ScheduleStatistics] Schedules:",e),console.log("[ScheduleStatistics] Total Scheduled:",t),console.log("[ScheduleStatistics] Total Units:",s),console.log("[ScheduleStatistics] Status Counts:",r),(0,a.jsxs)("div",{className:"mt-12 bg-gradient-to-r from-red-500 to-red-600 rounded-2xl shadow-2xl p-10",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-4xl font-bold text-white",children:"\uD83E\uDE78 Your Donation Impact"}),a.jsx("p",{className:"text-white text-opacity-90 mt-2",children:"Track your scheduled donations and their status"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("p",{className:"text-sm font-bold text-red-600 uppercase tracking-wider",children:"Scheduled Donations"}),a.jsx("span",{className:"text-3xl",children:"\uD83D\uDCC5"})]}),a.jsx("p",{className:"text-5xl font-bold text-red-700",children:t}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Donation appointments booked"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("p",{className:"text-sm font-bold text-red-600 uppercase tracking-wider",children:"Total Units"}),a.jsx("span",{className:"text-3xl",children:"\uD83D\uDC89"})]}),a.jsx("p",{className:"text-5xl font-bold text-red-700",children:s}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Units scheduled to donate"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("p",{className:"text-sm font-bold text-red-600 uppercase tracking-wider",children:"Status Summary"}),a.jsx("span",{className:"text-3xl",children:"\uD83D\uDCCA"})]}),a.jsx("div",{className:"space-y-2",children:Object.entries(r).length>0?Object.entries(r).map(([e,t])=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("span",{className:"text-gray-700 font-semibold capitalize",children:[e,":"]}),a.jsx("span",{className:"text-lg font-bold text-red-600",children:t})]},e)):a.jsx("p",{className:"text-gray-600 text-sm",children:"No scheduled donations yet"})})]})]}),t>0&&a.jsx("div",{className:"mt-8 pt-6 border-t-2 border-white border-opacity-30",children:(0,a.jsxs)("p",{className:"text-center text-white font-semibold text-lg",children:["\uD83C\uDFAF You've scheduled ",a.jsx("span",{className:"text-yellow-200",children:t})," life-saving donations totaling ",(0,a.jsxs)("span",{className:"text-yellow-200",children:[s," units"]})," of blood!"]})})]})}function T(){return(0,a.jsxs)("div",{className:"mt-10 p-6 bg-white rounded-xl shadow border",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-red-700 mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-4xl",children:"\uD83E\uDE78"})," Blood Donation Frequency Guide"]}),a.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Know how often you can donate and make maximum impact on lives"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:[{type:"Whole Blood",icon:"\uD83E\uDE79",wait:56,year:6,benefit:"Helps all blood types",recovery:"3-4 weeks",color:"from-red-400 to-red-600",bg:"bg-red-50"},{type:"Plasma",icon:"\uD83D\uDC9B",wait:2,year:24,benefit:"Golden component",recovery:"24 hours",color:"from-yellow-400 to-yellow-600",bg:"bg-yellow-50"},{type:"Platelets",icon:"\uD83D\uDC9A",wait:2,year:24,benefit:"Helps cancer patients",recovery:"24 hours",color:"from-green-400 to-green-600",bg:"bg-green-50"},{type:"Red Cells",icon:"❤️",wait:112,year:3,benefit:"Critical for anemia",recovery:"8 weeks",color:"from-pink-400 to-pink-600",bg:"bg-pink-50"}].map((e,t)=>(0,a.jsxs)("div",{className:`p-6 rounded-2xl shadow-lg border-2 border-${e.color.split(" ")[1]} ${e.bg} hover:shadow-xl transition-all duration-300 transform hover:scale-105`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold text-lg text-gray-800",children:[e.icon," ",e.type]}),a.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:e.benefit})]}),a.jsx("div",{className:`bg-gradient-to-r ${e.color} text-white rounded-full w-12 h-12 flex items-center justify-center font-bold`,children:e.year})]}),(0,a.jsxs)("div",{className:"space-y-2 mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-700 font-semibold",children:"Frequency:"}),(0,a.jsxs)("span",{className:"bg-white px-3 py-1 rounded-lg font-bold text-gray-800",children:["Every ",e.wait," days"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-700 font-semibold",children:"Annual:"}),(0,a.jsxs)("span",{className:"bg-white px-3 py-1 rounded-lg font-bold text-gray-800",children:[e.year,"x per year"]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-gray-700 font-semibold",children:"Recovery:"}),a.jsx("span",{className:"bg-white px-3 py-1 rounded-lg font-bold text-gray-800",children:e.recovery})]})]})]},t))})]})}function O(){return(0,a.jsxs)("div",{className:"mt-10 p-8 bg-gradient-to-r from-white via-blue-50 to-white rounded-2xl shadow-lg border-2 border-blue-200",children:[(0,a.jsxs)("h2",{className:"text-3xl font-bold text-red-700 mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-4xl",children:"\uD83E\uDE7A"})," Blood Compatibility Chart"]}),a.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Discover which blood types you can save with your donation"}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{type:"O-",badge:"\uD83C\uDF1F Universal Donor",donate:["Everyone"],description:"Rarest hero - can save anyone",bg:"bg-gradient-to-br from-red-100 to-red-200",border:"border-red-400"},{type:"O+",badge:"Most Common",donate:["O+","A+","B+","AB+"],description:"Help positive blood types",bg:"bg-gradient-to-br from-red-100 to-red-200",border:"border-red-400"},{type:"A-",badge:"Rare Giver",donate:["A-","A+","AB-","AB+"],description:"Support 4 blood types",bg:"bg-gradient-to-br from-rose-100 to-rose-200",border:"border-rose-400"},{type:"A+",badge:"Common",donate:["A+","AB+"],description:"Help A and AB types",bg:"bg-gradient-to-br from-red-50 to-red-100",border:"border-red-300"},{type:"B-",badge:"Rare Giver",donate:["B-","B+","AB-","AB+"],description:"Support 4 blood types",bg:"bg-gradient-to-br from-rose-100 to-rose-200",border:"border-rose-400"},{type:"B+",badge:"Common",donate:["B+","AB+"],description:"Help B and AB types",bg:"bg-gradient-to-br from-red-50 to-red-100",border:"border-red-300"},{type:"AB-",badge:"Rarest",donate:["AB-","AB+"],description:"Precious for AB types",bg:"bg-gradient-to-br from-pink-100 to-pink-200",border:"border-pink-400"},{type:"AB+",badge:"\uD83C\uDF1F Universal Recipient",donate:["AB+"],description:"Can receive from anyone",bg:"bg-gradient-to-br from-red-200 to-red-300",border:"border-red-500"}].map((e,t)=>(0,a.jsxs)("div",{className:`${e.bg} p-5 rounded-2xl shadow-lg border-2 ${e.border} hover:shadow-xl transition-all duration-300 transform hover:scale-105`,children:[a.jsx("div",{className:"flex items-start justify-between mb-3",children:(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-bold text-2xl text-gray-900 mb-1",children:e.type}),a.jsx("span",{className:"inline-block bg-white px-3 py-1 rounded-full text-xs font-bold text-gray-700 shadow-sm",children:e.badge})]})}),(0,a.jsxs)("p",{className:"text-xs text-gray-700 font-semibold mb-3 italic",children:['"',e.description,'"']}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-800 mb-2",children:"\uD83D\uDC89 Donates to:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:e.donate.map((e,t)=>a.jsx("span",{className:"px-3 py-1.5 bg-white font-bold text-gray-800 rounded-lg text-xs shadow border-2 border-gray-300",children:e},t))})]})]},t))}),a.jsx("div",{className:"mt-8 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-5 border-l-4 border-red-600",children:(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[a.jsx("span",{className:"font-bold text-red-700",children:"\uD83D\uDCA1 Pro Tip:"})," O- blood type donors are the most sought after because they can donate to anyone. If you have a rare blood type, you're a superhero for those who need it!"]})})]})}},5974:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(326),r=s(7577),o=s(6438),l=s(9360),n=s(1135),i=s(1009);let d=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function c({className:e,variant:t,size:s,asChild:r=!1,...l}){let c=r?o.g7:"button";return a.jsx(c,{"data-slot":"button",className:function(...e){return(0,i.m6)((0,n.W)(e))}(d({variant:t,size:s,className:e})),...l})}var h=s(9730),m=s(4019),x=s(7506),u=s(9436);function p(){let[e,t]=(0,r.useState)(!1),[s,o]=(0,r.useState)([]),[l,n]=(0,r.useState)(""),[i,d]=(0,r.useState)(!1),p=(0,r.useRef)(null),[g,b]=(0,r.useState)(void 0);if(null==g)return null;let f=async()=>{if(!l.trim())return;let e={id:Date.now().toString(),text:l,sender:"user",timestamp:new Date};o(t=>[...t,e]),n(""),d(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:l,conversationHistory:s,user:null})}),t=await e.json(),a={id:(Date.now()+1).toString(),text:t.reply||"Sorry, I couldn't process that. Please try again.",sender:"bot",timestamp:new Date};o(e=>[...e,a])}catch(t){console.error("Error sending message:",t);let e={id:(Date.now()+2).toString(),text:"Sorry, I'm having trouble connecting. Please try again later.",sender:"bot",timestamp:new Date};o(t=>[...t,e])}finally{d(!1)}};return(0,a.jsxs)(a.Fragment,{children:[!e&&a.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 bg-gradient-to-r from-red-600 to-red-700 text-white p-4 rounded-full shadow-lg hover:shadow-xl transition hover:from-red-700 hover:to-red-800 z-40","aria-label":"Open chatbot",children:a.jsx(h.Z,{className:"w-6 h-6"})}),e&&(0,a.jsxs)("div",{className:"fixed bottom-6 right-6 w-96 max-h-96 bg-white rounded-xl shadow-2xl flex flex-col z-50 border-2 border-red-200",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white p-4 flex justify-between items-center rounded-t-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(h.Z,{className:"w-5 h-5"}),a.jsx("h3",{className:"font-bold",children:"Pulse Bot"}),a.jsx("span",{className:"text-xs bg-red-500 px-2 py-1 rounded-full",children:"AI Assistant"}),g?a.jsx("span",{className:"text-xs capitalize bg-white/20 text-white px-2 py-1 rounded-full ml-2",children:g.role||"user"}):null]}),a.jsx("button",{onClick:()=>t(!1),className:"hover:bg-red-500 p-1 rounded transition",children:a.jsx(m.Z,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[s.map(e=>a.jsx("div",{className:`flex ${"user"===e.sender?"justify-end":"justify-start"}`,children:a.jsx("div",{className:`max-w-xs rounded-lg p-3 ${"user"===e.sender?"bg-red-600 text-white rounded-br-none":"bg-white text-gray-800 border border-red-200 rounded-bl-none"}`,children:a.jsx("p",{className:"text-sm",children:e.text})})},e.id)),i&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white text-gray-800 border border-red-200 rounded-lg rounded-bl-none p-3",children:a.jsx(x.Z,{className:"w-5 h-5 animate-spin text-red-600"})})}),a.jsx("div",{ref:p})]}),a.jsx("div",{className:"border-t border-red-200 p-4 bg-white rounded-b-lg",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:l,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&f(),placeholder:"Ask me anything...",className:"flex-1 border border-red-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500"}),a.jsx(c,{onClick:f,disabled:i||!l.trim(),className:"bg-red-600 hover:bg-red-700 text-white p-2",children:a.jsx(u.Z,{className:"w-4 h-4"})})]})})]})]})}},3708:(e,t,s)=>{"use strict";function a(){return null}s.d(t,{default:()=>a}),s(7577)},1264:(e,t,s)=>{"use strict";s.d(t,{s:()=>r});var a=s(7577);function r(){return(0,a.useRef)(null)}s(7432)},361:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9669:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},8998:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7018:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Hospital",[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]])},3634:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},8246:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`C:\Users\harsh\Downloads\PulseBank-main\PulseBank-main\app\donor\dashboard\page.tsx#default`)},9064:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>n});var a=s(9510);s(8147),s(7633);var r=s(8570);let o=(0,r.createProxy)(String.raw`C:\Users\harsh\Downloads\PulseBank-main\PulseBank-main\components\ai-chatbot.tsx#default`),l=(0,r.createProxy)(String.raw`C:\Users\harsh\Downloads\PulseBank-main\PulseBank-main\components\user-guard.tsx#default`),n={title:"Pulse Bank - Save Lives with AI-Powered Blood Donation",description:"Connect blood donors with recipients through AI-powered matching. Find compatible donors near you instantly.",icons:{icon:"/favicon.ico",shortcut:"/favicon.ico",apple:"/favicon.ico"}};function i({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{className:"font-sans antialiased",children:[a.jsx(l,{}),e,a.jsx(o,{})]})})}},7633:()=>{},8201:(e,t,s)=>{"use strict";class a extends Error{}a.prototype.name="InvalidTokenError"}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[276,975,434,257],()=>s(4062));module.exports=a})();