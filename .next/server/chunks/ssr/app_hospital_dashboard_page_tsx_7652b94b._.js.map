{"version":3,"sources":["turbopack:///[project]/app/hospital/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useSocket } from \"@/hooks/useSocket\";\nimport {\n  Heart,\n  AlertCircle,\n  Users,\n  Droplet,\n  TrendingUp,\n  LogOut,\n  FileText,\n  Plus,\n  MapPin,\n  Calendar,\n  Gift,\n  Navigation,\n  CheckCircle,\n} from \"lucide-react\";\nimport Link from \"next/link\";\n\n// ðŸ‘‰ FIXED MAP (dynamic import prevents SSR errors)\nimport dynamic from \"next/dynamic\";\nconst HospitalMap = dynamic(() => import(\"@/components/HospitalMap\"), {\n  ssr: false,\n});\n\n// Existing components (unchanged)\nimport BloodCompatibilityChart from \"@/components/blood-compatibility-chart\";\nimport AIChatbot from \"@/components/ai-chatbot\";\nimport ProfileMenu from \"@/components/profile-menu\";\n// Correct URLs (backend runs on 5000)\nconst STATS_URL = \"http://localhost:5000/hospital/stats\";\nconst ACTIVE_DONORS_URL = \"http://localhost:5000/hospital/active-donors\";\nconst REQUESTS_URL = \"http://localhost:5000/request/all\";\n\n\nexport default function HospitalDashboard() {\n  const [hospitalName, setHospitalName] = useState(\"Hospital\");\n  const [hospitalId, setHospitalId] = useState<string | null>(null);\n  const [hospitalEmail, setHospitalEmail] = useState(\"\");\n  const [hospitalPhone, setHospitalPhone] = useState(\"\");\n  const [hospitalImage, setHospitalImage] = useState(\"\");\n  const [hospitalLocation, setHospitalLocation] = useState<any>(null);\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\n  const [showLocationPrompt, setShowLocationPrompt] = useState(false);\n  const [locationPermissionDenied, setLocationPermissionDenied] = useState(false);\n  const [requests, setRequests] = useState<any[]>([]);\n  const [hospitalRequests, setHospitalRequests] = useState<any[]>([]);\n  const [recipientRequests, setRecipientRequests] = useState<any[]>([]);\n  const [activeDonors, setActiveDonors] = useState<any[]>([]);\n  const [stats, setStats] = useState({\n    totalRequests: 0,\n    livesSaved: 0,\n    donorsNearby: 0,\n    avgMatchTime: 0,\n  });\n\n  const socketRef = useSocket();\n\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  /* -----------------------------------------------\n     REFRESH ALL DATA\n  -----------------------------------------------*/\n  // helper to resolve current hospital identity (id and name)\n  const getCurrentHospitalIdentity = () => {\n    let currentHospitalId = hospitalId;\n    let currentHospitalName = hospitalName;\n    try {\n      const stored = localStorage.getItem(\"user\");\n      if (stored) {\n        const u = JSON.parse(stored);\n        currentHospitalId = currentHospitalId || (u._id || u.id || null);\n        currentHospitalName = currentHospitalName || (u.fullName || u.name || null);\n      }\n    } catch (e) {}\n    return { currentHospitalId, currentHospitalName };\n  };\n\n  const handleRefresh = async () => {\n    setIsRefreshing(true);\n    try {\n      // fetch stats and requests in parallel\n      const [statsRes, reqRes] = await Promise.all([fetch(STATS_URL), fetch(REQUESTS_URL)]);\n\n      const statsData = await statsRes.json();\n      setStats({\n        totalRequests: statsData.totalRequests || 0,\n        livesSaved: statsData.livesSaved || 0,\n        donorsNearby: statsData.donorsNearby || 0,\n        avgMatchTime: statsData.avgMatchTime || 0,\n      });\n\n      const reqData = await reqRes.json();\n      const allRequests = reqData.requests || [];\n      setRequests(allRequests);\n\n      const { currentHospitalId, currentHospitalName } = getCurrentHospitalIdentity();\n\n      const hospitals = allRequests.filter((r: any) =>\n        !r.isRecipientRequest && (\n          (r.requestedBy && (\n            r.requestedBy === currentHospitalId ||\n            (r.requestedBy?._id && String(r.requestedBy._id) === String(currentHospitalId)) ||\n            String(r.requestedBy) === String(currentHospitalId)\n          )) ||\n          (r.hospital && currentHospitalName && r.hospital === currentHospitalName)\n        )\n      );\n\n      // Filter recipient requests that are for THIS hospital\n      const recipients = allRequests.filter((r: any) => \n        r.isRecipientRequest && (\n          (r.destinationHospital && currentHospitalName && r.destinationHospital === currentHospitalName) ||\n          (r.hospital && currentHospitalName && r.hospital === currentHospitalName)\n        )\n      );\n      \n      // Only show active requests (not fulfilled/completed/successful)\n      const statusesToExclude = [\"fulfilled\", \"completed\", \"successful\"];\n      \n      const activeHospitalRequests = hospitals.filter((r: any) => \n        !r.status || !statusesToExclude.includes(r.status.toLowerCase())\n      );\n      const activeRecipientRequests = recipients.filter((r: any) => \n        !r.status || !statusesToExclude.includes(r.status.toLowerCase())\n      );\n      \n      setHospitalRequests(activeHospitalRequests);\n      setRecipientRequests(activeRecipientRequests);\n      \n      // Calculate lives saved from fulfilled requests\n      const fulfilledRequests = allRequests.filter((r: any) => \n        r.status && (\n          r.status.toLowerCase() === \"fulfilled\" || \n          r.status.toLowerCase() === \"completed\" || \n          r.status.toLowerCase() === \"successful\"\n        )\n      );\n      \n      setStats({\n        totalRequests: activeHospitalRequests.length + activeRecipientRequests.length,\n        livesSaved: fulfilledRequests.length,\n        donorsNearby: statsData.donorsNearby || 0,\n        avgMatchTime: statsData.avgMatchTime || 0,\n      });\n    } catch (err) {\n      console.error(\"Refresh error:\", err);\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  /* ----------------------------------------------\n     LOAD HOSPITAL NAME\n  -----------------------------------------------*/\n  useEffect(() => {\n    const stored = localStorage.getItem(\"user\");\n    if (stored) {\n      const user = JSON.parse(stored);\n      setHospitalName(user.fullName || \"Hospital\");\n      setHospitalId(user._id || null);\n      setHospitalEmail(user.email || \"\");\n      setHospitalPhone(user.phone || \"\");\n      setHospitalImage(user.profileImage || \"\");\n    }\n  }, []);\n\n  /* Keep hospital info (including image) in sync with profile page updates */\n  useEffect(() => {\n    const onUserUpdated = (event: any) => {\n      const updated = event?.detail || {};\n      setHospitalName(updated.fullName || \"Hospital\");\n      setHospitalEmail(updated.email || \"\");\n      setHospitalPhone(updated.phone || \"\");\n      setHospitalImage(updated.profileImage || \"\");\n    };\n\n    window.addEventListener(\"user-updated\", onUserUpdated as EventListener);\n    return () => window.removeEventListener(\"user-updated\", onUserUpdated as EventListener);\n  }, []);\n\n  /* -----------------------------------------------\n     REQUEST GEOLOCATION PERMISSION & UPDATE LOCATION\n  -----------------------------------------------*/\n  const requestLocationPermission = async () => {\n    if (!hospitalId) {\n      console.log(\"Hospital ID not available yet\");\n      return;\n    }\n\n    if (!navigator.geolocation) {\n      console.error(\"Geolocation not supported\");\n      setLocationPermissionDenied(true);\n      return;\n    }\n\n    console.log(\"Requesting geolocation permission...\");\n    setShowLocationPrompt(true);\n\n    navigator.geolocation.getCurrentPosition(\n      async (position) => {\n        const { latitude, longitude } = position.coords;\n        console.log(`Location obtained: ${latitude}, ${longitude}`);\n        setHospitalLocation({ latitude, longitude });\n        setShowLocationPrompt(false);\n\n        // Update hospital location in backend\n        try {\n          // Validate hospitalId exists\n          if (!hospitalId) {\n            console.error(\"Hospital ID not available. Please log in again.\");\n            setShowLocationPrompt(false);\n            alert(\"Hospital ID not found. Please log out and log in again.\");\n            return;\n          }\n\n          const response = await fetch(\"http://localhost:5000/hospital/update-location\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify({\n              hospitalId,\n              latitude,\n              longitude,\n            }),\n          });\n\n          if (!response.ok) {\n            const errorData = await response.json().catch(() => ({}));\n            console.error(`Failed to update location: HTTP ${response.status}`);\n            console.error(\"Error response:\", errorData);\n            \n            if (response.status === 404) {\n              if (errorData.message === \"Hospital not found. Please log in again.\") {\n                console.error(`Hospital record not found in database for ID: ${hospitalId}`);\n                console.warn(\"Your hospital account may have been deleted. Clearing session...\");\n                localStorage.removeItem(\"user\");\n                alert(\"Your hospital account was not found in the system. Please log in again.\");\n                window.location.href = \"/auth?type=hospital\";\n              } else {\n                console.error(\"Backend endpoint not found. Ensure the backend server is running on http://localhost:5000\");\n                alert(\"Location update failed. Please ensure backend server is running and try again.\");\n              }\n            } else if (response.status === 400) {\n              console.error(\"Bad request:\", errorData.message);\n              alert(\"Missing required location data. Please try again.\");\n            } else {\n              alert(`Error updating location: HTTP ${response.status}`);\n            }\n            setShowLocationPrompt(false);\n            return;\n          }\n\n          const data = await response.json();\n          if (data.success) {\n            console.log(\"Hospital location updated successfully:\", data.hospital);\n          } else {\n            console.error(\"Failed to update location:\", data.message);\n            if (data.message === \"Hospital not found. Please log in again.\") {\n              localStorage.removeItem(\"user\");\n              console.warn(\"Hospital record not found. Redirecting to login...\");\n              window.location.href = \"/auth?type=hospital\";\n            }\n          }\n        } catch (error) {\n          console.error(\"Error updating hospital location:\", error);\n          if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n            console.error(\"Network error: Could not reach backend server at http://localhost:5000. Is the server running?\");\n            alert(\"Could not connect to backend server. Please ensure it's running on port 5000.\");\n          }\n          setShowLocationPrompt(false);\n        }\n      },\n      (error) => {\n        console.warn(\"Geolocation error:\", error);\n        setShowLocationPrompt(false);\n        if (error.code === error.PERMISSION_DENIED) {\n          setLocationPermissionDenied(true);\n          console.log(\"Location permission denied by user\");\n        } else if (error.code === error.TIMEOUT) {\n          console.log(\"Location request timed out - user can retry\");\n        } else {\n          console.log(\"Location unavailable - will prompt user to retry\");\n        }\n        // Don't show alerts for geolocation errors - just log them\n        // User can manually click to retry\n      },\n      {\n        timeout: 10000,\n        enableHighAccuracy: true,\n      }\n    );\n  };\n\n  // Request location permission only if user manually triggers it\n  // Removed automatic location request on mount to prevent geolocation errors blocking dashboard\n  useEffect(() => {\n    // This useEffect can be used later if needed for manual location requests\n    // For now, location sharing is optional and user-triggered\n  }, []);\n\n  /* ----------------------------------------------\n     FETCH STATS\n  -----------------------------------------------*/\n  const loadStats = async () => {\n    try {\n      const res = await fetch(STATS_URL);\n      if (!res.ok) {\n        console.error(`loadStats error: ${res.status}`);\n        return;\n      }\n      const data = await res.json();\n      if (data.success) {\n        setStats((prev) => ({\n          ...prev,\n          donorsNearby: data.donorsNearby,\n          avgMatchTime: data.avgMatchTime,\n        }));\n      }\n    } catch (err) {\n      console.error(\"loadStats fetch error:\", err);\n    }\n  };\n\n  /* ----------------------------------------------\n     FETCH ACTIVE DONORS\n  -----------------------------------------------*/\n  const loadActiveDonors = async () => {\n    try {\n      const res = await fetch(ACTIVE_DONORS_URL);\n      if (!res.ok) {\n        console.error(`loadActiveDonors error: ${res.status}`);\n        return;\n      }\n      const data = await res.json();\n      if (data.success) {\n        setActiveDonors(data.donors || []);\n      }\n    } catch (err) {\n      console.error(\"loadActiveDonors fetch error:\", err);\n    }\n  };\n\n  /* ----------------------------------------------\n     FETCH REQUESTS\n  -----------------------------------------------*/\n  const loadRequests = async () => {\n    try {\n      const res = await fetch(REQUESTS_URL);\n      if (!res.ok) {\n        console.error(`loadRequests error: ${res.status}`);\n        return;\n      }\n      const data = await res.json();\n      const allRequests = data.requests || [];\n      setRequests(allRequests);\n\n      const { currentHospitalId, currentHospitalName } = getCurrentHospitalIdentity();\n\n      const hospitals = allRequests.filter((r: any) =>\n        !r.isRecipientRequest && (\n          (r.requestedBy && (\n            r.requestedBy === currentHospitalId ||\n            (r.requestedBy?._id && String(r.requestedBy._id) === String(currentHospitalId)) ||\n            String(r.requestedBy) === String(currentHospitalId)\n          )) ||\n          (r.hospital && currentHospitalName && r.hospital === currentHospitalName)\n        )\n      );\n\n      const recipients = allRequests.filter((r: any) => r.isRecipientRequest || !r.hospital || r.hospital === \"\");\n      \n      // Filter out fulfilled/completed/successful requests\n      const statusesToExclude = [\"fulfilled\", \"completed\", \"successful\"];\n      const activeHospitals = hospitals.filter((r: any) => \n        !r.status || !statusesToExclude.includes(r.status.toLowerCase())\n      );\n      const activeRecipients = recipients.filter((r: any) => \n        !r.status || !statusesToExclude.includes(r.status.toLowerCase())\n      );\n      \n      setHospitalRequests(activeHospitals);\n      setRecipientRequests(activeRecipients);\n\n      setStats((prev) => ({\n        ...prev,\n        totalRequests: allRequests.length,\n        livesSaved: Math.floor(allRequests.length * 1.5),\n      }));\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  /* ----------------------------------------------\n     INITIAL LOAD + SOCKET LISTENER\n  -----------------------------------------------*/\n  useEffect(() => {\n    loadStats();\n    loadActiveDonors();\n    loadRequests();\n\n    const socket = socketRef.current;\n    if (!socket) return;\n\n    // Listen for donor availability changes\n    socket.on(\"donor_status_changed\", () => {\n      loadStats();\n      loadActiveDonors();\n    });\n\n    // Listen for new requests created by this hospital or other hospitals\n    socket.on(\"request_created\", (payload: any) => {\n      if (!payload || !payload._id) return;\n\n      setRequests((prev) => {\n        const exists = prev.some((r: any) => r._id === payload._id);\n        if (exists) return prev;\n        // increment stats only when actually adding new item\n        setStats((s) => ({ ...s, totalRequests: s.totalRequests + 1 }));\n        return [payload, ...prev];\n      });\n\n      // Add to the appropriate list â€” only include hospitalRequests that belong to this hospital\n      const { currentHospitalId, currentHospitalName } = getCurrentHospitalIdentity();\n\n      if (payload.isRecipientRequest) {\n        // Only add if this request is for THIS hospital\n        if (payload.hospital && currentHospitalName && payload.hospital === currentHospitalName) {\n          setRecipientRequests((prev) => (prev.some((r: any) => r._id === payload._id) ? prev : [payload, ...prev]));\n        }\n      } else {\n        // determine whether this payload was created by THIS hospital\n        const createdByHospital = !!(\n          (payload.requestedBy && (\n            payload.requestedBy === currentHospitalId ||\n            (payload.requestedBy?._id && String(payload.requestedBy._id) === String(currentHospitalId)) ||\n            String(payload.requestedBy) === String(currentHospitalId)\n          )) ||\n          (payload.hospital && currentHospitalName && payload.hospital === currentHospitalName)\n        );\n\n        if (createdByHospital) {\n          setHospitalRequests((prev) => (prev.some((r: any) => r._id === payload._id) ? prev : [payload, ...prev]));\n        }\n      }\n\n      console.log(\"New request created (real-time):\", payload);\n    });\n\n    // Listen for donor availability changes to refresh donor list\n    socket.on(\"availability_changed\", () => {\n      loadActiveDonors();\n      loadStats();\n    });\n    // Listen for request fulfilled (when hospital marks donation completed)\n    socket.on(\"request_fulfilled\", (payload: any) => {\n      // Remove fulfilled request from active requests\n      setHospitalRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\n      setRecipientRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\n      setRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\n\n      // Update stats\n      setStats((prev) => ({\n        ...prev,\n        totalRequests: Math.max(0, prev.totalRequests - 1),\n      }));\n    });\n\n    // Listen for donation confirmation/rejection from donors\n    socket.on(\"request_confirmed\", (payload: any) => {\n      if (!payload || !payload._id) return;\n\n      console.log(\"Request confirmation status updated:\", payload);\n\n      // Update the request in both hospital and recipient request lists\n      setHospitalRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload._id\n            ? {\n                ...r,\n                confirmationStatus: payload.confirmationStatus,\n                confirmedBy: payload.confirmedBy,\n                confirmationNotes: payload.confirmationNotes,\n              }\n            : r\n        )\n      );\n\n      setRecipientRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload._id\n            ? {\n                ...r,\n                confirmationStatus: payload.confirmationStatus,\n                confirmedBy: payload.confirmedBy,\n                confirmationNotes: payload.confirmationNotes,\n              }\n            : r\n        )\n      );\n\n      // Update the main requests list\n      setRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload._id\n            ? {\n                ...r,\n                confirmationStatus: payload.confirmationStatus,\n                confirmedBy: payload.confirmedBy,\n                confirmationNotes: payload.confirmationNotes,\n              }\n            : r\n        )\n      );\n\n      // Update stats to reflect confirmed request (reduce active requests count)\n      setStats((prev) => ({\n        ...prev,\n        totalRequests: Math.max(0, prev.totalRequests - 1),\n      }));\n    });\n\n    // Listen for donation completion (when scheduled time arrives)\n    socket.on(\"donation_completed\", (payload: any) => {\n      if (!payload || !payload.requestId) return;\n\n      console.log(\"Donation completed (time reached):\", payload);\n\n      // Update the request status to \"Successful\"\n      setHospitalRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload.requestId\n            ? {\n                ...r,\n                confirmationStatus: \"Successful\",\n                status: \"Fulfilled\",\n              }\n            : r\n        )\n      );\n\n      setRecipientRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload.requestId\n            ? {\n                ...r,\n                confirmationStatus: \"Successful\",\n                status: \"Fulfilled\",\n              }\n            : r\n        )\n      );\n\n      setRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload.requestId\n            ? {\n                ...r,\n                confirmationStatus: \"Successful\",\n                status: \"Fulfilled\",\n              }\n            : r\n        )\n      );\n    });\n\n    return () => {\n      socket.off(\"donor_status_changed\");\n      socket.off(\"request_created\");\n      socket.off(\"availability_changed\");\n      socket.off(\"request_fulfilled\");\n      socket.off(\"request_confirmed\");\n      socket.off(\"donation_completed\");\n    };\n  }, [socketRef]);\n\n  /* ----------------------------------------------\n     UI HELPERS\n  -----------------------------------------------*/\n  const getUrgencyColor = (urg: string) => {\n    switch (urg?.toUpperCase()) {\n      case \"CRITICAL\":\n        return \"bg-red-600 text-white\";\n      case \"HIGH\":\n        return \"bg-orange-500 text-white\";\n      case \"MODERATE\":\n        return \"bg-yellow-500 text-white\";\n      default:\n        return \"bg-green-500 text-white\";\n    }\n  };\n\n  const getStatusColor = (status: string) =>\n    status === \"Pending\"\n      ? \"bg-yellow-100 text-yellow-700\"\n      : status === \"Fulfilled\"\n      ? \"bg-green-100 text-green-700\"\n      : \"bg-gray-300 text-gray-700\";\n\n  /* ----------------------------------------------\n     RENDER UI\n  -----------------------------------------------*/\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\n      {/* HEADER */}\n      <header className=\"bg-gradient-to-r from-red-600 to-red-700 text-white p-6 sticky top-0 z-30 shadow-lg\">\n        <div className=\"max-w-7xl mx-auto flex justify-between items-center\">\n          <div className=\"flex items-center gap-3\">\n            <Heart className=\"w-8 h-8 fill-white\" />\n            <h1 className=\"text-3xl font-bold\">{hospitalName}</h1>\n          </div>\n\n          <div className=\"flex items-center gap-3 relative\">\n            <button\n              onClick={() => setShowProfileMenu(!showProfileMenu)}\n              className=\"p-2 rounded-full hover:bg-red-500 transition bg-white text-red-600 w-10 h-10 flex items-center justify-center\"\n              title=\"Profile menu\"\n            >\n              ðŸ‘¤\n            </button>\n\n            {showProfileMenu && (\n              <div className=\"absolute right-0 top-12 bg-gradient-to-b from-white to-gray-50 text-gray-800 rounded-2xl shadow-2xl w-64 z-40 border border-red-100 overflow-hidden\">\n                {/* Profile Info Section */}\n                <div className=\"p-5 bg-gradient-to-r from-red-50 to-red-100 border-b-2 border-red-200\">\n                  <p className=\"font-bold text-lg text-red-700\">{hospitalName}</p>\n                  <p className=\"text-sm text-gray-600 mt-1\">{hospitalEmail}</p>\n                  <p className=\"text-sm text-gray-600\">{hospitalPhone}</p>\n                </div>\n                \n                {/* Menu Items */}\n                <div className=\"py-2\">\n                  <Link\n                    href=\"/hospital/profile\"\n                    className=\"flex items-center gap-3 px-4 py-3 hover:bg-red-50 text-gray-800 transition border-l-4 border-transparent hover:border-red-600\"\n                    onClick={() => setShowProfileMenu(false)}\n                  >\n                    <FileText className=\"w-5 h-5 text-red-600\" />\n                    <span className=\"font-medium\">Edit Profile</span>\n                  </Link>\n                  <Link\n                    href=\"/hospital/history\"\n                    className=\"flex items-center gap-3 px-4 py-3 hover:bg-blue-50 text-gray-800 transition border-l-4 border-transparent hover:border-blue-600\"\n                    onClick={() => setShowProfileMenu(false)}\n                  >\n                    <Calendar className=\"w-5 h-5 text-blue-600\" />\n                    <span className=\"font-medium\">View History</span>\n                  </Link>\n                  <button\n                    onClick={() => {\n                      localStorage.removeItem(\"token\");\n                      window.location.href = \"/\";\n                    }}\n                    className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-100 text-gray-800 transition border-l-4 border-transparent hover:border-red-700\"\n                  >\n                    <LogOut className=\"w-5 h-5 text-red-700\" />\n                    <span className=\"font-medium\">Logout</span>\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </header>\n\n      {/* LOCATION PERMISSION BANNER */}\n      {showLocationPrompt && (\n        <div className=\"bg-blue-50 border-l-4 border-blue-600 p-4 mx-6 mt-4 rounded-lg\">\n          <div className=\"flex items-center gap-3\">\n            <Navigation className=\"w-5 h-5 text-blue-600 animate-pulse\" />\n            <div>\n              <p className=\"font-semibold text-blue-900\">Enabling Location Sharing</p>\n              <p className=\"text-sm text-blue-700\">Please allow location access so nearby recipients can find you...</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {locationPermissionDenied && (\n        <div className=\"bg-amber-50 border-l-4 border-amber-600 p-4 mx-6 mt-4 rounded-lg\">\n          <div className=\"flex items-center justify-between gap-3\">\n            <div className=\"flex items-center gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-amber-600\" />\n              <div>\n                <p className=\"font-semibold text-amber-900\">Location Permission Denied</p>\n                <p className=\"text-sm text-amber-700\">Recipients won't be able to find your hospital. Please enable location in your browser settings.</p>\n              </div>\n            </div>\n            <button\n              onClick={() => {\n                setLocationPermissionDenied(false);\n                requestLocationPermission();\n              }}\n              className=\"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 text-sm font-medium\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* MAIN BODY */}\n      <div className=\"max-w-7xl mx-auto p-6 space-y-12\">\n        {/* HERO CARD */}\n        <div className=\"bg-white rounded-2xl shadow-lg overflow-hidden border-l-4 border-red-600 grid md:grid-cols-2\">\n          <div className=\"p-10\">\n            <h2 className=\"text-3xl font-bold text-red-700\">Welcome back!</h2>\n            <p className=\"text-gray-700 mt-2\">Thanks for coordinating blood donations and saving lives.</p>\n\n            <div className=\"mt-6 flex gap-4\">\n              <Link\n                href=\"/hospital/new-request\"\n                className=\"bg-gradient-to-r from-red-600 to-red-700 text-white px-6 py-3 rounded-lg flex items-center gap-2 font-semibold hover:shadow-lg transition\"\n              >\n                <Plus className=\"w-5 h-5\" /> New Request\n              </Link>\n            </div>\n          </div>\n\n          <div className=\"bg-gradient-to-br from-red-50 via-red-100 to-red-200 flex items-center justify-center p-4 min-h-[280px]\">\n            {hospitalImage ? (\n              <div className=\"relative w-full h-full flex items-center justify-center\">\n                <img\n                  src={hospitalImage}\n                  alt=\"Hospital profile\"\n                  className=\"max-w-full max-h-[250px] rounded-lg shadow-2xl object-contain\"\n                />\n              </div>\n            ) : (\n              <div className=\"flex flex-col items-center gap-3\">\n                <Heart className=\"text-red-600 w-20 h-20\" />\n                <p className=\"text-red-600 text-sm font-medium\">Upload your photo</p>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* ACTIVE DONORS MAP */}\n        <div className=\"mt-8\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-3xl font-bold text-red-700 flex items-center gap-2\">\n              <MapPin className=\"w-8 h-8\" />\n              Active Donors Nearby\n            </h2>\n            <span className=\"bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-full font-semibold\">\n              {stats.donorsNearby} Donors Online\n            </span>\n          </div>\n          {stats.donorsNearby > 0 && (\n            <div className=\"bg-white rounded-2xl shadow-2xl border-2 border-red-100 overflow-hidden relative z-10\" style={{ height: \"500px\" }}>\n              <HospitalMap activeDonors={activeDonors} />\n            </div>\n          )}\n          {stats.donorsNearby === 0 && (\n            <div className=\"bg-gradient-to-br from-amber-50 to-orange-50 rounded-2xl shadow-2xl border-2 border-amber-200 p-8 text-center\" style={{ height: \"500px\", display: \"flex\", alignItems: \"center\", justifyContent: \"center\" }}>\n              <div>\n                <AlertCircle className=\"w-16 h-16 mx-auto text-amber-500 mb-4\" />\n                <h3 className=\"text-2xl font-bold text-gray-800 mb-2\">No Donors Online</h3>\n                <p className=\"text-gray-600\">No donors are currently available in your area. Check back soon!</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* STATISTICS SECTION */}\n        <div className=\"grid md:grid-cols-4 gap-6\">\n          <StatCard icon={Users} label=\"Donors Nearby\" value={stats.donorsNearby} color=\"from-green-500 to-green-600\" />\n          <StatCard icon={Droplet} label=\"Avg Match Time\" value={`${stats.avgMatchTime} min`} color=\"from-red-600 to-red-700\" />\n          <StatCard icon={TrendingUp} label=\"Lives Saved\" value={stats.livesSaved} color=\"from-green-500 to-green-600\" />\n          <StatCard icon={Heart} label=\"Active Requests\" value={stats.totalRequests} color=\"from-red-500 to-red-600\" />\n        </div>\n\n        {/* BLOOD COMPATIBILITY */}\n        <BloodCompatibilityChartHospital />\n\n        {/* REQUEST TABLES */}\n        <div className=\"space-y-8\">\n          {/* Hospital-created requests */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 border-2 border-red-200\">\n            <div className=\"flex items-center gap-3 mb-6\">\n              <Droplet className=\"w-8 h-8 text-red-600\" />\n              <h2 className=\"text-3xl font-bold text-red-700\">Hospital Requests</h2>\n            </div>\n\n            {(hospitalRequests || []).length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Droplet className=\"w-16 h-16 text-gray-300 mx-auto mb-3\" />\n                <p className=\"text-gray-500 text-lg\">No hospital requests yet</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {(hospitalRequests || []).map((req: any, i: number) => (\n                  <div key={`h-${i}`} className=\"p-6 border-2 border-red-100 rounded-xl hover:shadow-lg transition bg-gradient-to-r from-red-50 to-white\">\n                    <div className=\"grid md:grid-cols-2 lg:grid-cols-6 gap-4 items-center\">\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Patient Name</p>\n                        <p className=\"font-bold text-gray-900\">{req.recipientName || req.patientName || req.requestedBy?.fullName || req.requestedByName || \"N/A\"}</p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Blood Type</p>\n                        <p className=\"font-bold text-red-600 text-lg\">{req.bloodType}</p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Units</p>\n                        <p className=\"font-bold text-gray-900\">{req.unitsNeeded}</p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Urgency</p>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold inline-block ${getUrgencyColor(req.urgency)}`}>\n                          {req.urgency}\n                        </span>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Status</p>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold inline-block ${getStatusColor(req.status)}`}>\n                          {req.status}\n                        </span>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Confirmation</p>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold inline-block ${\n                          req.confirmationStatus === \"Confirmed\" ? \"bg-green-100 text-green-700\" :\n                          req.confirmationStatus === \"Rejected\" ? \"bg-red-100 text-red-700\" :\n                          req.confirmationStatus === \"Successful\" ? \"bg-blue-100 text-blue-700\" :\n                          \"bg-gray-100 text-gray-700\"\n                        }`}>\n                          {req.confirmationStatus || \"Pending\"}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Recipient-created requests */}\n          <div className=\"bg-white rounded-2xl shadow-xl p-8 border-2 border-purple-200\">\n            <div className=\"flex items-center gap-3 mb-6\">\n              <Heart className=\"w-8 h-8 text-purple-600\" />\n              <h2 className=\"text-3xl font-bold text-purple-700\">Recipient Requests</h2>\n            </div>\n\n            {(recipientRequests || []).length === 0 ? (\n              <div className=\"text-center py-12\">\n                <Heart className=\"w-16 h-16 text-gray-300 mx-auto mb-3\" />\n                <p className=\"text-gray-500 text-lg\">No recipient requests yet</p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {(recipientRequests || []).map((req: any, i: number) => (\n                  <div key={`r-${i}`} className=\"p-6 border-2 border-purple-100 rounded-xl hover:shadow-lg transition bg-gradient-to-r from-purple-50 to-white\">\n                    <div className=\"grid md:grid-cols-2 lg:grid-cols-6 gap-4 items-center\">\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Recipient</p>\n                        <p className=\"font-bold text-gray-900\">{req.recipientName || req.requestedBy?.fullName || req.requestedByName || req.requesterName || (typeof req.requestedBy === 'string' ? req.requestedBy : \"N/A\")}</p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Blood Type</p>\n                        <p className=\"font-bold text-red-600 text-lg\">{req.bloodType}</p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Units</p>\n                        <p className=\"font-bold text-gray-900\">{req.unitsNeeded}</p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Urgency</p>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold inline-block ${getUrgencyColor(req.urgency)}`}>\n                          {req.urgency}\n                        </span>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Status</p>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold inline-block ${getStatusColor(req.status)}`}>\n                          {req.status}\n                        </span>\n                      </div>\n\n                      <div>\n                        <p className=\"text-xs font-semibold text-gray-500 mb-1\">Confirmation</p>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold inline-block ${\n                          req.confirmationStatus === \"Confirmed\" ? \"bg-green-100 text-green-700\" :\n                          req.confirmationStatus === \"Rejected\" ? \"bg-red-100 text-red-700\" :\n                          req.confirmationStatus === \"Successful\" ? \"bg-blue-100 text-blue-700\" :\n                          \"bg-gray-100 text-gray-700\"\n                        }`}>\n                          {req.confirmationStatus || \"Pending\"}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <AIChatbot />\n    </main>\n  );\n}\n\n/* ----------------------------------------------\n   STAT CARD COMPONENT\n-----------------------------------------------*/\nfunction StatCard({ icon: Icon, label, value, color = \"from-red-500 to-red-700\" }: any) {\n  return (\n    <div className={`bg-gradient-to-r ${color} text-white rounded-2xl shadow-xl p-6 hover:shadow-2xl transition transform hover:scale-105`}>\n      <div className=\"flex justify-between items-center mb-3\">\n        <h3 className=\"text-sm font-semibold\">{label}</h3>\n        <Icon className=\"w-6 h-6 opacity-90\" />\n      </div>\n      <p className=\"text-4xl font-bold\">{value}</p>\n    </div>\n  );\n}\n\n/* ----------------------------------------------\n   BLOOD COMPATIBILITY CHART - Hospital Version\n-----------------------------------------------*/\nfunction BloodCompatibilityChartHospital() {\n  const types = [\n    {\n      type: \"O-\",\n      badge: \"ðŸŒŸ Universal Donor\",\n      donate: [\"Everyone\"],\n      description: \"Rarest hero - can save anyone\",\n      bg: \"bg-gradient-to-br from-red-100 to-red-200\",\n      border: \"border-red-400\"\n    },\n    {\n      type: \"O+\",\n      badge: \"Most Common\",\n      donate: [\"O+\", \"A+\", \"B+\", \"AB+\"],\n      description: \"Help positive blood types\",\n      bg: \"bg-gradient-to-br from-red-100 to-red-200\",\n      border: \"border-red-400\"\n    },\n    {\n      type: \"A-\",\n      badge: \"Rare Giver\",\n      donate: [\"A-\", \"A+\", \"AB-\", \"AB+\"],\n      description: \"Support 4 blood types\",\n      bg: \"bg-gradient-to-br from-rose-100 to-rose-200\",\n      border: \"border-rose-400\"\n    },\n    {\n      type: \"A+\",\n      badge: \"Common\",\n      donate: [\"A+\", \"AB+\"],\n      description: \"Help A and AB types\",\n      bg: \"bg-gradient-to-br from-red-50 to-red-100\",\n      border: \"border-red-300\"\n    },\n    {\n      type: \"B-\",\n      badge: \"Rare Giver\",\n      donate: [\"B-\", \"B+\", \"AB-\", \"AB+\"],\n      description: \"Support 4 blood types\",\n      bg: \"bg-gradient-to-br from-rose-100 to-rose-200\",\n      border: \"border-rose-400\"\n    },\n    {\n      type: \"B+\",\n      badge: \"Common\",\n      donate: [\"B+\", \"AB+\"],\n      description: \"Help B and AB types\",\n      bg: \"bg-gradient-to-br from-red-50 to-red-100\",\n      border: \"border-red-300\"\n    },\n    {\n      type: \"AB-\",\n      badge: \"Rarest\",\n      donate: [\"AB-\", \"AB+\"],\n      description: \"Precious for AB types\",\n      bg: \"bg-gradient-to-br from-pink-100 to-pink-200\",\n      border: \"border-pink-400\"\n    },\n    {\n      type: \"AB+\",\n      badge: \"ðŸŒŸ Universal Recipient\",\n      donate: [\"AB+\"],\n      description: \"Can receive from anyone\",\n      bg: \"bg-gradient-to-br from-red-200 to-red-300\",\n      border: \"border-red-500\"\n    },\n  ];\n\n  return (\n    <div className=\"mt-10 p-8 bg-gradient-to-r from-white via-blue-50 to-white rounded-2xl shadow-lg border-2 border-blue-200\">\n      <h2 className=\"text-3xl font-bold text-red-700 mb-2 flex items-center gap-2\">\n        <span className=\"text-4xl\">ðŸ©º</span> Blood Compatibility Chart\n      </h2>\n      <p className=\"text-gray-600 mb-6 text-sm\">Understand which blood types can be used for transfusions and donations</p>\n\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {types.map((b, i) => (\n          <div\n            key={i}\n            className={`${b.bg} p-5 rounded-2xl shadow-lg border-2 ${b.border} hover:shadow-xl transition-all duration-300 transform hover:scale-105`}\n          >\n            <div className=\"flex items-start justify-between mb-3\">\n              <div>\n                <h3 className=\"font-bold text-2xl text-gray-900 mb-1\">{b.type}</h3>\n                <span className=\"inline-block bg-white px-3 py-1 rounded-full text-xs font-bold text-gray-700 shadow-sm\">\n                  {b.badge}\n                </span>\n              </div>\n            </div>\n            <p className=\"text-xs text-gray-700 font-semibold mb-3 italic\">\"{b.description}\"</p>\n            <div>\n              <p className=\"text-xs font-bold text-gray-800 mb-2\">ðŸ’‰ Donates to:</p>\n              <div className=\"flex flex-wrap gap-2\">\n                {b.donate.map((d, j) => (\n                  <span\n                    key={j}\n                    className=\"px-3 py-1.5 bg-white font-bold text-gray-800 rounded-lg text-xs shadow border-2 border-gray-300\"\n                  >\n                    {d}\n                  </span>\n                ))}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-8 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl p-5 border-l-4 border-red-600\">\n        <p className=\"text-sm text-gray-700\">\n          <span className=\"font-bold text-red-700\">ðŸ’¡ Pro Tip:</span> O- blood type donors are the most sought after because they can donate to anyone. AB+ recipients can receive from all blood types. Understanding compatibility helps you plan better blood requests.\n        </p>\n      </div>\n    </div>\n  );\n}\n\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAeA,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,OAOA,EAAA,EAAA,CAAA,CAAA,MANA,IAAM,EAAc,CAAA,EAAA,EAAA,OAAA,AAAO,EAAA,UAAA,EAAA,qCACzB,KAAK,IAaQ,SAAS,IACtB,GAAM,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,YAC3C,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MACtD,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7C,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAM,MACxD,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjD,CAAC,EAAoB,EAAsB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvD,CAAC,EAA0B,EAA4B,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACnE,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAgB,EAAE,EAC5C,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAgB,EAAE,EAC5D,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,EAAE,EAC9D,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,EAAE,EACpD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACjC,cAAe,EACf,WAAY,EACZ,aAAc,EACd,aAAc,CAChB,GAEM,EAAY,CAAA,EAAA,EAAA,SAAS,AAAT,IAEZ,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAM3C,EAA6B,KACjC,IAAI,EAAoB,EACpB,EAAsB,EAC1B,GAAI,CACF,IAAM,EAAS,aAAa,OAAO,CAAC,QACpC,GAAI,EAAQ,CACV,IAAM,EAAI,KAAK,KAAK,CAAC,GACrB,EAAoB,GAAsB,EAAE,GAAG,EAAI,EAAE,EAAE,EAAI,KAC3D,EAAsB,GAAwB,EAAE,QAAQ,EAAI,EAAE,IAAI,EAAI,IACxE,CACF,CAAE,MAAO,EAAG,CAAC,CACb,MAAO,mBAAE,sBAAmB,CAAoB,CAClD,EA+EA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAS,aAAa,OAAO,CAAC,QACpC,GAAI,EAAQ,CACV,IAAM,EAAO,KAAK,KAAK,CAAC,GACxB,EAAgB,EAAK,QAAQ,EAAI,YACjC,EAAc,EAAK,GAAG,EAAI,MAC1B,EAAiB,EAAK,KAAK,EAAI,IAC/B,EAAiB,EAAK,KAAK,EAAI,IAC/B,EAAiB,EAAK,YAAY,EAAI,GACxC,CACF,EAAG,EAAE,EAGL,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACR,IAAM,EAAgB,AAAC,IACrB,IAAM,EAAU,GAAO,QAAU,CAAC,EAClC,EAAgB,EAAQ,QAAQ,EAAI,YACpC,EAAiB,EAAQ,KAAK,EAAI,IAClC,EAAiB,EAAQ,KAAK,EAAI,IAClC,EAAiB,EAAQ,YAAY,EAAI,GAC3C,EAGA,OADA,OAAO,gBAAgB,CAAC,eAAgB,GACjC,IAAM,OAAO,mBAAmB,CAAC,eAAgB,EAC1D,EAAG,EAAE,EAKL,IAAM,EAA4B,UAChC,GAAI,CAAC,EAAY,YACf,QAAQ,GAAG,CAAC,iCAId,GAAI,CAAC,UAAU,WAAW,CAAE,CAC1B,QAAQ,KAAK,CAAC,6BACd,GAA4B,GAC5B,MACF,CAEA,QAAQ,GAAG,CAAC,wCACZ,GAAsB,GAEtB,UAAU,WAAW,CAAC,kBAAkB,CACtC,MAAO,IACL,GAAM,CAAE,UAAQ,WAAE,CAAS,CAAE,CAAG,EAAS,MAAM,CAC/C,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,EAAS,EAAE,EAAE,EAAA,CAAW,EAC1D,EAAoB,UAAE,YAAU,CAAU,GAC1C,GAAsB,GAGtB,GAAI,CAEF,GAAI,CAAC,EAAY,CACf,QAAQ,KAAK,CAAC,mDACd,GAAsB,GACtB,MAAM,2DACN,MACF,CAEA,IAAM,EAAW,MAAM,MAAM,iDAAkD,CAC7E,OAAQ,OACR,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,YACnB,WACA,YACA,CACF,EACF,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,EACvD,QAAQ,KAAK,CAAC,CAAC,gCAAgC,EAAE,EAAS,MAAM,CAAA,CAAE,EAClE,QAAQ,KAAK,CAAC,kBAAmB,GAET,KAAK,CAAzB,EAAS,MAAM,CACb,AAAsB,4CAA4C,GAAxD,OAAO,EACnB,QAAQ,KAAK,CAAC,CAAC,8CAA8C,EAAE,EAAA,CAAY,EAC3E,QAAQ,IAAI,CAAC,oEACb,aAAa,UAAU,CAAC,QACxB,MAAM,2EACN,OAAO,QAAQ,CAAC,IAAI,CAAG,wBAEvB,QAAQ,KAAK,CAAC,6FACd,MAAM,mFAEqB,KAAK,CAAzB,EAAS,MAAM,EACxB,QAAQ,KAAK,CAAC,eAAgB,EAAU,OAAO,EAC/C,MAAM,sDAEN,MAAM,CAAC,8BAA8B,EAAE,EAAS,MAAM,CAAA,CAAE,EAE1D,GAAsB,GACtB,MACF,CAEA,IAAM,EAAO,MAAM,EAAS,IAAI,GAC5B,EAAK,OAAO,CACd,CADgB,OACR,GAAG,CAAC,0CAA2C,EAAK,QAAQ,GAEpE,QAAQ,KAAK,CAAC,6BAA8B,EAAK,OAAO,EACnC,4CAA4C,CAA7D,EAAK,OAAO,GACd,aAAa,UAAU,CAAC,QACxB,QAAQ,IAAI,CAAC,sDACb,OAAO,QAAQ,CAAC,IAAI,CAAG,uBAG7B,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,oCAAqC,GAC/C,aAAiB,WAAa,EAAM,OAAO,CAAC,QAAQ,CAAC,UAAU,CACjE,QAAQ,KAAK,CAAC,kGACd,MAAM,kFAER,GAAsB,EACxB,CACF,EACC,AAAD,IACE,QAAQ,IAAI,CAAC,qBAAsB,GACnC,GAAsB,GAClB,EAAM,IAAI,GAAK,EAAM,iBAAiB,EAAE,AAC1C,GAA4B,GAC5B,QAAQ,GAAG,CAAC,uCACH,EAAM,IAAI,GAAK,EAAM,OAAO,CACrC,CADuC,OAC/B,GAAG,CAAC,+CAEZ,QAAQ,GAAG,CAAC,mDAIhB,EACA,CACE,QAAS,IACT,oBAAoB,CACtB,EAEJ,EAIA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAGV,EAAG,EAAE,EAKL,IAAM,EAAY,UAChB,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,AArRZ,wCAsRZ,GAAI,CAAC,EAAI,EAAE,CAAE,YACX,QAAQ,KAAK,CAAC,CAAC,iBAAiB,EAAE,EAAI,MAAM,CAAA,CAAE,EAGhD,IAAM,EAAO,MAAM,EAAI,IAAI,GACvB,EAAK,OAAO,EAAE,AAChB,EAAU,AAAD,GAAW,EAClB,EADiB,CACd,CAAI,CACP,aAAc,EAAK,YAAY,CAC/B,aAAc,EAAK,YAAY,CACjC,CAAC,CAEL,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,yBAA0B,EAC1C,CACF,EAKM,EAAmB,UACvB,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,AA3SJ,gDA4SpB,GAAI,CAAC,EAAI,EAAE,CAAE,YACX,QAAQ,KAAK,CAAC,CAAC,wBAAwB,EAAE,EAAI,MAAM,CAAA,CAAE,EAGvD,IAAM,EAAO,MAAM,EAAI,IAAI,EACvB,GAAK,OAAO,EAAE,AAChB,EAAgB,EAAK,MAAM,EAAI,EAAE,CAErC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,gCAAiC,EACjD,CACF,EAKM,GAAe,UACnB,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,AA7TT,qCA8Tf,GAAI,CAAC,EAAI,EAAE,CAAE,YACX,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,EAAI,MAAM,CAAA,CAAE,EAInD,IAAM,EAAc,CADP,MAAM,EAAI,IAAI,EAAA,EACF,QAAQ,EAAI,EAAE,CACvC,EAAY,GAEZ,GAAM,mBAAE,CAAiB,qBAAE,CAAmB,CAAE,CAAG,IAE7C,EAAY,EAAY,MAAM,CAAC,AAAC,GACpC,CAAC,EAAE,kBAAkB,GAClB,CADsB,CACpB,WAAW,GACZ,CADgB,CACd,WAAW,GAAK,GACjB,EAAE,WAAW,EAAE,KAAO,OAAO,EAAE,WAAW,CAAC,GAAG,IAAM,OAAO,IAC5D,OAAO,EAAE,WAAW,IAAM,OAAO,EAAA,CACnC,EACC,EAAE,QAAQ,EAAI,GAAuB,EAAE,QAAQ,GAAK,CAAA,CACvD,EAGI,EAAa,EAAY,MAAM,CAAC,AAAC,GAAW,EAAE,kBAAkB,EAAI,CAAC,EAAE,QAAQ,EAAmB,KAAf,EAAE,QAAQ,EAG7F,EAAoB,CAAC,YAAa,YAAa,aAAa,CAC5D,EAAkB,EAAU,MAAM,CAAC,AAAC,GACxC,CAAC,EAAE,MAAM,EAAI,CAAC,EAAkB,QAAQ,CAAC,EAAE,MAAM,CAAC,WAAW,KAEzD,EAAmB,EAAW,MAAM,CAAC,AAAC,GAC1C,CAAC,EAAE,MAAM,EAAI,CAAC,EAAkB,QAAQ,CAAC,EAAE,MAAM,CAAC,WAAW,KAG/D,EAAoB,GACpB,EAAqB,GAErB,EAAS,AAAC,IAAU,CAClB,EADiB,CACd,CAAI,CACP,cAAe,EAAY,MAAM,CACjC,WAAY,KAAK,KAAK,CAAsB,IAArB,EAAY,MAAM,CAC3C,CAAC,EACH,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,CACF,EAKA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IACA,IACA,KAEA,IAAM,EAAS,EAAU,OAAO,CAChC,GAAK,CAAD,CAoKJ,MApKa,CAGb,EAAO,EAAE,CAAC,uBAAwB,KAChC,IACA,GACF,GAGA,EAAO,EAAE,CAAC,kBAAmB,AAAC,IAC5B,GAAI,CAAC,GAAW,CAAC,EAAQ,GAAG,CAAE,OAE9B,EAAY,AAAC,GAEX,AADe,EAAK,EAChB,EADoB,CAAE,AAAD,GAAY,EAAE,AAC3B,GAD8B,GAAK,EAAQ,GAAG,EACvC,GAEnB,EAAS,AAAC,IAAM,AAAC,CAAE,GAAG,CAAC,CAAE,cAAe,EAAE,aAAa,CAAG,EAAE,CAAC,EACtD,CAAC,KAAY,EAAK,GAI3B,GAAM,mBAAE,CAAiB,qBAAE,CAAmB,CAAE,CAAG,IAE/C,EAAQ,kBAAkB,CAExB,CAF0B,CAElB,QAAQ,EAAI,GAAuB,EAAQ,QAAQ,GAAK,GAClE,EAAqB,AAAC,GAAU,EAAK,IAAI,CAAC,AAAC,GAAW,EAAE,CAD+B,EAC5B,GAAK,EAAQ,GAAG,EAAI,EAAO,CAAC,KAAY,EAAK,EAatG,CARD,EAAQ,WAAW,GAClB,CADsB,CACd,AAOW,WAPA,GAAK,GACvB,EAAQ,WAAW,EAAE,KAAO,OAAO,EAAQ,WAAW,CAAC,GAAG,IAAM,OAAO,IACxE,OAAO,EAAQ,WAAW,IAAM,OAAO,EAAA,CACzC,EACC,EAAQ,QAAQ,EAAI,GAAuB,EAAQ,QAAQ,GAAK,CAAA,CACnE,EAGE,EAAoB,AAAC,GAAU,EAAK,IAAI,CAAC,AAAC,GAAW,EAAE,GAAG,GAAK,EAAQ,GAAG,EAAI,EAAO,CAAC,KAAY,EAAK,EAI3G,QAAQ,GAAG,CAAC,mCAAoC,EAClD,GAGA,EAAO,EAAE,CAAC,uBAAwB,KAChC,IACA,GACF,GAEA,EAAO,EAAE,CAAC,oBAAqB,AAAC,IAE9B,EAAoB,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAW,EAAE,GAAG,GAAK,EAAQ,SAAS,GACjF,EAAqB,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAW,EAAE,GAAG,GAAK,EAAQ,SAAS,GAClF,EAAY,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAW,EAAE,GAAG,GAAK,EAAQ,SAAS,GAGzE,EAAS,AAAC,IAAU,CAClB,EADiB,CACd,CAAI,CACP,cAAe,KAAK,GAAG,CAAC,EAAG,EAAK,aAAa,CAAG,EAClD,CAAC,EACH,GAGA,EAAO,EAAE,CAAC,oBAAqB,AAAC,IACzB,GAAY,EAAQ,GAAG,EAAE,CAAd,AAEhB,QAAQ,GAAG,CAAC,uCAAwC,GAGpD,EAAoB,AAAC,GACnB,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,GAAG,GAAK,EAAQ,GAAG,CACjB,CACE,GAAG,CAAC,CACJ,mBAAoB,EAAQ,kBAAkB,CAC9C,YAAa,EAAQ,WAAW,CAChC,kBAAmB,EAAQ,iBAAiB,AAC9C,EACA,IAIR,EAAqB,AAAC,GACpB,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,GAAG,GAAK,EAAQ,GAAG,CACjB,CACE,GAAG,CAAC,CACJ,mBAAoB,EAAQ,kBAAkB,CAC9C,YAAa,EAAQ,WAAW,CAChC,kBAAmB,EAAQ,iBAAiB,AAC9C,EACA,IAKR,EAAY,AAAC,GACX,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,GAAG,GAAK,EAAQ,GAAG,CACjB,CACE,GAAG,CAAC,CACJ,mBAAoB,EAAQ,kBAAkB,CAC9C,YAAa,EAAQ,WAAW,CAChC,kBAAmB,EAAQ,iBAAiB,AAC9C,EACA,IAKR,EAAS,AAAC,IAAU,CAClB,EADiB,CACd,CAAI,CACP,cAAe,KAAK,GAAG,CAAC,EAAG,EAAK,aAAa,CAAG,GAClD,CAAC,EACH,GAGA,EAAO,EAAE,CAAC,qBAAsB,AAAC,IAC1B,GAAY,EAAQ,MAAT,GAAkB,EAAE,CAEpC,QAAQ,GAAG,CAAC,qCAAsC,GAGlD,EAAoB,AAAC,GACnB,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,GAAG,GAAK,EAAQ,SAAS,CACvB,CACE,GAAG,CAAC,CACJ,mBAAoB,aACpB,OAAQ,WACV,EACA,IAIR,EAAqB,AAAC,GACpB,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,GAAG,GAAK,EAAQ,SAAS,CACvB,CACE,GAAG,CAAC,CACJ,mBAAoB,aACpB,OAAQ,WACV,EACA,IAIR,EAAa,AAAD,GACV,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,GAAG,GAAK,EAAQ,SAAS,CACvB,CACE,GAAG,CAAC,CACJ,mBAAoB,aACpB,OAAQ,WACV,EACA,IAGV,GAEO,KACL,EAAO,GAAG,CAAC,wBACX,EAAO,GAAG,CAAC,mBACX,EAAO,GAAG,CAAC,wBACX,EAAO,GAAG,CAAC,qBACX,EAAO,GAAG,CAAC,qBACX,EAAO,GAAG,CAAC,qBACb,CACF,EAAG,CAAC,EAAU,EAKd,IAAM,GAAkB,AAAC,IACvB,OAAQ,GAAK,eACX,IAAK,WACH,MAAO,uBACT,KAAK,OACH,MAAO,0BACT,KAAK,WACH,MAAO,0BACT,SACE,MAAO,yBACX,CACF,EAEM,GAAiB,AAAC,GACX,YAAX,EACI,gCACW,cAAX,EACA,8BACA,4BAKN,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,0EAEd,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,+FAChB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,uBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAsB,OAGtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,EAAmB,CAAC,GACnC,UAAU,gHACV,MAAM,wBACP,OAIA,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gKAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kFACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CAAkC,IAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA8B,IAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAyB,OAIxC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,oBACL,UAAU,gIACV,QAAS,IAAM,GAAmB,aAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,yBACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,oBAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,oBACL,UAAU,kIACV,QAAS,IAAM,GAAmB,aAElC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,0BACpB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,oBAEhC,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,KACP,aAAa,UAAU,CAAC,SACxB,OAAO,QAAQ,CAAC,IAAI,CAAG,GACzB,EACA,UAAU,kJAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,yBAClB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,uBAAc,4BAU3C,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,wCACtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,uCAA8B,8BAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,8EAM5C,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,2BACvB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,wCAA+B,+BAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,kCAAyB,2GAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,KACP,GAA4B,GAC5B,GACF,EACA,UAAU,+FACX,eAQP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CAAkC,kBAChD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAqB,8DAElC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,OAAI,CAAA,CACH,KAAK,wBACL,UAAU,sJAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,YAAY,uBAKlC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mHACZ,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mEACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,EACL,IAAI,mBACJ,UAAU,oEAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,2BACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4CAAmC,8BAOxD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,oEACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,YAAY,0BAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,yGACb,EAAM,YAAY,CAAC,uBAGvB,EAAM,YAAY,CAAG,GACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wFAAwF,MAAO,CAAE,OAAQ,OAAQ,WAC9H,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAY,aAAc,MAGP,IAAvB,EAAM,YAAY,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gHAAgH,MAAO,CAAE,OAAQ,QAAS,QAAS,OAAQ,WAAY,SAAU,eAAgB,QAAS,WACvN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,0CACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAwC,qBACtD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,yBAAgB,6EAOrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,KAAM,EAAA,KAAK,CAAE,MAAM,gBAAgB,MAAO,EAAM,YAAY,CAAE,MAAM,gCAC9E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,KAAM,EAAA,OAAO,CAAE,MAAM,iBAAiB,MAAO,CAAA,EAAG,EAAM,YAAY,CAAC,IAAI,CAAC,CAAE,MAAM,4BAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,KAAM,EAAA,UAAU,CAAE,MAAM,cAAc,MAAO,EAAM,UAAU,CAAE,MAAM,gCAC/E,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,KAAM,EAAA,KAAK,CAAE,MAAM,kBAAkB,MAAO,EAAM,aAAa,CAAE,MAAM,+BAInF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,GAGD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,yBACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,2CAAkC,yBAGb,IAApC,CAAC,GAAoB,EAAE,AAAF,EAAI,MAAM,CAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,yCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,gCAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,CAAC,GAAoB,EAAA,AAAE,EAAE,GAAG,CAAC,CAAC,EAAU,IACvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAmB,UAAU,mHAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,iBACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mCAA2B,EAAI,aAAa,EAAI,EAAI,WAAW,EAAI,EAAI,WAAW,EAAE,UAAY,EAAI,eAAe,EAAI,WAGtI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,eACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CAAkC,EAAI,SAAS,MAG9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,UACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mCAA2B,EAAI,WAAW,MAGzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,YACxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,0DAA0D,EAAE,GAAgB,EAAI,OAAO,EAAA,CAAG,UACzG,EAAI,OAAO,MAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,WACxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,0DAA0D,EAAE,GAAe,EAAI,MAAM,EAAA,CAAG,UACvG,EAAI,MAAM,MAIf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,iBACxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,0DAA0D,EAC/C,cAA3B,EAAI,kBAAkB,CAAmB,8BACd,aAA3B,EAAI,kBAAkB,CAAkB,0BACb,eAA3B,EAAI,kBAAkB,CAAoB,4BAC1C,4BAAA,CACA,UACC,EAAI,kBAAkB,EAAI,mBAvCzB,CAAC,EAAE,EAAE,EAAA,CAAG,QAkD1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,4BACjB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8CAAqC,0BAGf,IAArC,CAAC,GAAqB,EAAA,AAAE,EAAE,MAAM,CAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,UAAU,yCACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,iCAGvC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,CAAC,GAAqB,EAAA,AAAE,EAAE,GAAG,CAAC,CAAC,EAAU,IACxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAmB,UAAU,yHAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,cACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mCAA2B,EAAI,aAAa,EAAI,EAAI,WAAW,EAAE,UAAY,EAAI,eAAe,EAAI,EAAI,aAAa,EAAK,CAA2B,CAA5B,gBAAQ,EAAI,WAAW,CAAgB,EAAI,WAAW,CAAG,KAAA,CAAK,MAGtM,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,eACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,0CAAkC,EAAI,SAAS,MAG9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,UACxD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mCAA2B,EAAI,WAAW,MAGzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,YACxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,0DAA0D,EAAE,GAAgB,EAAI,OAAO,EAAA,CAAG,UACzG,EAAI,OAAO,MAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,WACxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,0DAA0D,EAAE,GAAe,EAAI,MAAM,EAAA,CAAG,UACvG,EAAI,MAAM,MAIf,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oDAA2C,iBACxD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAC,0DAA0D,EAC/C,cAA3B,EAAI,kBAAkB,CAAmB,8BACd,aAA3B,EAAI,kBAAkB,CAAkB,0BACxC,AAA2B,iBAAvB,kBAAkB,CAAoB,4BAC1C,4BAAA,CACA,UACC,EAAI,kBAAkB,EAAI,mBAvCzB,CAAC,EAAE,EAAE,EAAA,CAAG,cAmD9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAS,CAAA,CAAA,KAGhB,CAKA,SAAS,EAAS,CAAE,KAAM,CAAI,OAAE,CAAK,OAAE,CAAK,OAAE,EAAQ,yBAAyB,CAAO,EACpF,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAC,iBAAiB,EAAE,EAAM,2FAA2F,CAAC,WACpI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAyB,IACvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAU,0BAElB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8BAAsB,MAGzC,CAKA,SAAS,IAoEP,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sHACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAG,UAAU,yEACZ,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,oBAAW,OAAS,gCAEtC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,4EAE1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACZ,AA3EO,CACZ,CACE,KAAM,KACN,MAAO,qBACP,OAAQ,CAAC,WAAW,CACpB,YAAa,gCACb,GAAI,4CACJ,OAAQ,gBACV,EACA,CACE,KAAM,KACN,MAAO,cACP,OAAQ,CAAC,KAAM,KAAM,KAAM,MAAM,CACjC,YAAa,4BACb,GAAI,4CACJ,OAAQ,gBACV,EACA,CACE,KAAM,KACN,MAAO,aACP,OAAQ,CAAC,KAAM,KAAM,MAAO,MAAM,CAClC,YAAa,wBACb,GAAI,8CACJ,OAAQ,iBACV,EACA,CACE,KAAM,KACN,MAAO,SACP,OAAQ,CAAC,KAAM,MAAM,CACrB,YAAa,sBACb,GAAI,2CACJ,OAAQ,gBACV,EACA,CACE,KAAM,KACN,MAAO,aACP,OAAQ,CAAC,KAAM,KAAM,MAAO,MAAM,CAClC,YAAa,wBACb,GAAI,8CACJ,OAAQ,iBACV,EACA,CACE,KAAM,KACN,MAAO,SACP,OAAQ,CAAC,KAAM,MAAM,CACrB,YAAa,sBACb,GAAI,2CACJ,OAAQ,gBACV,EACA,CACE,KAAM,MACN,MAAO,SACP,OAAQ,CAAC,MAAO,MAAM,CACtB,YAAa,wBACb,GAAI,8CACJ,OAAQ,iBACV,EACA,CACE,KAAM,MACN,MAAO,yBACP,OAAQ,CAAC,MAAM,CACf,YAAa,0BACb,GAAI,4CACJ,OAAQ,gBACV,EACD,CAUY,GAAG,CAAC,CAAC,EAAG,IACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,UAAW,CAAA,EAAG,EAAE,EAAE,CAAC,oCAAoC,EAAE,EAAE,MAAM,CAAC,sEAAsE,CAAC,WAEzI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDAAyC,EAAE,IAAI,GAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kGACb,EAAE,KAAK,QAId,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,4DAAkD,IAAE,EAAE,WAAW,CAAC,OAC/E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gDAAuC,mBACpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCACZ,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC,EAAG,IAChB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAEC,UAAU,2GAET,GAHI,WAjBR,MA6BX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iGACb,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCACX,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kCAAyB,gBAAkB,+MAKrE"}