{"version":3,"sources":["turbopack:///[project]/app/recipient/dashboard/page.tsx","turbopack:///[project]/components/RecipientHospitalMap.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport dynamic from \"next/dynamic\";\nimport { Heart, Clock, CheckCircle, AlertCircle, Settings, LogOut, FileText, Calendar, Droplet } from \"lucide-react\";\nimport ProfileMenu from \"@/components/profile-menu\";\nimport RecipientHospitalMap from \"@/components/RecipientHospitalMap\";\nimport Link from \"next/link\";\nimport { jwtDecode } from \"jwt-decode\";\nimport { REQUEST } from \"@/lib/api-endpoints\";\nimport { useSocket } from \"@/hooks/useSocket\";\n\nexport default function RecipientDashboard() {\n  const [recipientId, setRecipientId] = useState<string | null>(null);\n  const [recipientName, setRecipientName] = useState(\"Recipient\");\n  const [recipientEmail, setRecipientEmail] = useState(\"\");\n  const [recipientPhone, setRecipientPhone] = useState(\"\");\n  const [recipientLocation, setRecipientLocation] = useState<any>(null);\n  const [recipientAddress, setRecipientAddress] = useState<string | null>(null);\n  const [addressLoading, setAddressLoading] = useState(false);\n  const [showProfileMenu, setShowProfileMenu] = useState(false);\n  const [requests, setRequests] = useState([]);\n  const [selectedRequest, setSelectedRequest] = useState<any | null>(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n\n  const socketRef = useSocket();\n\n  const [isRefreshing, setIsRefreshing] = useState(false);\n\n  // Function to convert coordinates to readable address\n  const getAddressFromCoordinates = async (\n    latitude: number,\n    longitude: number\n  ): Promise<string> => {\n    try {\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`\n      );\n      const data = await response.json();\n\n      if (data.address) {\n        const addr = data.address;\n        const parts = [];\n\n        // Add house number and street if available\n        if (addr.house_number) parts.push(addr.house_number);\n        if (addr.road) parts.push(addr.road);\n\n        // Add suburb/neighbourhood/village (sector/area)\n        if (addr.suburb) parts.push(addr.suburb);\n        else if (addr.neighbourhood) parts.push(addr.neighbourhood);\n        else if (addr.village) parts.push(addr.village);\n        else if (addr.hamlet) parts.push(addr.hamlet);\n\n        // Add city/town\n        if (addr.city) parts.push(addr.city);\n        else if (addr.town) parts.push(addr.town);\n\n        // Add postcode/pincode\n        if (addr.postcode) parts.push(`Pin Code ${addr.postcode}`);\n\n        // Add state\n        if (addr.state) parts.push(addr.state);\n\n        // Add country\n        if (addr.country) parts.push(addr.country);\n\n        const fullAddress = parts.filter(Boolean).join(\", \");\n        return fullAddress || \"Location detected\";\n      }\n\n      return \"Location detected\";\n    } catch (err) {\n      console.error(\"Error fetching address:\", err);\n      return \"Location detected\";\n    }\n  };\n\n  /* --------------------------------\n     REFRESH REQUESTS\n  -------------------------------- */\n  const handleRefresh = async () => {\n    if (!recipientId) return;\n    setIsRefreshing(true);\n    try {\n      const res = await fetch(REQUEST.getAllRequests);\n      const data = await res.json();\n      const allRequests = data.requests || [];\n      const myRequests = allRequests.filter(\n        (req: any) => {\n          const requestedById = typeof req.requestedBy === 'object' ? req.requestedBy?._id : req.requestedBy;\n          return requestedById === recipientId && req.isRecipientRequest === true;\n        }\n      );\n      setRequests(myRequests);\n    } catch (err) {\n      console.error(\"Refresh error:\", err);\n    } finally {\n      setIsRefreshing(false);\n    }\n  };\n\n  // ------------------------------\n  // STEP 1: Decode JWT ‚Üí get recipientId & request geolocation\n  // ------------------------------\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const stored = localStorage.getItem(\"user\");\n    if (token) {\n      try {\n        const decoded: any = jwtDecode(token);\n        if (decoded.role === \"recipient\") {\n          setRecipientId(decoded.userId);\n        }\n      } catch (err) {\n        console.error(\"Invalid token:\", err);\n      }\n    }\n    if (stored) {\n      const user = JSON.parse(stored);\n      setRecipientName(user.fullName || \"Recipient\");\n      setRecipientEmail(user.email || \"\");\n      setRecipientPhone(user.phone || \"\");\n    }\n\n    // Request current geolocation for accurate location\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        async (position) => {\n          const loc = {\n            latitude: position.coords.latitude,\n            longitude: position.coords.longitude,\n          };\n          setRecipientLocation(loc);\n          console.log(\"Recipient location from geolocation:\", loc);\n          \n          // Fetch address from coordinates\n          setAddressLoading(true);\n          try {\n            const address = await getAddressFromCoordinates(\n              position.coords.latitude,\n              position.coords.longitude\n            );\n            setRecipientAddress(address);\n          } catch (err) {\n            console.error(\"Error getting address:\", err);\n          } finally {\n            setAddressLoading(false);\n          }\n        },\n        (err) => {\n          console.warn(\"Geolocation error:\", err);\n          // Fallback to stored location if geolocation fails\n          if (stored) {\n            const user = JSON.parse(stored);\n            if (user.location && user.location.latitude && user.location.longitude) {\n              setRecipientLocation(user.location);\n              console.log(\"Using stored location:\", user.location);\n              \n              // Fetch address from stored coordinates\n              setAddressLoading(true);\n              getAddressFromCoordinates(user.location.latitude, user.location.longitude)\n                .then((address) => {\n                  setRecipientAddress(address);\n                  setAddressLoading(false);\n                })\n                .catch((err) => {\n                  console.error(\"Error getting address:\", err);\n                  setAddressLoading(false);\n                });\n            }\n          }\n        },\n        { enableHighAccuracy: true, timeout: 15000 }\n      );\n    }\n  }, []);\n\n  // ------------------------------\n  // STEP 2: Fetch Blood Requests From Backend\n  // ------------------------------\n  useEffect(() => {\n    const socket = socketRef.current;\n    if (!socket) return;\n\n    // Listen for newly created requests (to display immediately on dashboard)\n    socket.on(\"request_created\", (payload: any) => {\n      console.log(\"New request created:\", payload);\n      // Check if this request belongs to the current recipient\n      if (payload && typeof payload === 'object') {\n        setRequests((prev) => [\n          {\n            ...payload,\n            status: payload.status || \"Pending\",\n            _id: payload._id || payload.requestId,\n            requestedBy: payload.requestedBy || recipientId,\n          },\n          ...prev\n        ]);\n      }\n    });\n\n    // Listen for request status updates (if hospital updates the request)\n    socket.on(\"request_updated\", (payload: any) => {\n      setRequests((prev) =>\n        prev.map((r: any) =>\n          r._id === payload._id ? { ...r, ...payload } : r\n        )\n      );\n    });\n\n    // Listen for availability changes from donors\n    socket.on(\"availability_changed\", () => {\n      console.log(\"Donor availability updated - refreshing requests\");\n    });\n\n    // Listen for request fulfilled events and remove fulfilled requests\n    socket.on(\"request_fulfilled\", (payload: any) => {\n      setRequests((prev) => prev.filter((r: any) => r._id !== payload.requestId));\n    });\n\n    return () => {\n      socket.off(\"request_created\");\n      socket.off(\"request_updated\");\n      socket.off(\"availability_changed\");\n      socket.off(\"request_fulfilled\");\n    };\n  }, [socketRef, recipientId]);\n\n  // ------------------------------\n  // STEP 3: Fetch Blood Requests From Backend\n  // ------------------------------\n  useEffect(() => {\n    if (!recipientId) return;\n\n    fetch(REQUEST.getAllRequests)\n      .then((res) => res.json())\n      .then((data) => {\n        const allRequests = data.requests || [];\n\n        // Filter only requests made by THIS recipient (exclude hospital requests)\n        const myRequests = allRequests.filter(\n          (req: any) => {\n            // Compare IDs - requestedBy can be an object with _id or a string\n            const requestedById = typeof req.requestedBy === 'object' ? req.requestedBy?._id : req.requestedBy;\n            // Only show requests where:\n            // 1. requestedBy matches this recipient's ID\n            // 2. AND it's marked as a recipient request (isRecipientRequest = true)\n            return requestedById === recipientId && req.isRecipientRequest === true;\n          }\n        );\n\n        // Filter only PENDING requests for the dashboard\n        // FULFILLED/SUCCESSFUL requests will show in history\n        const pendingRequests = myRequests.filter(\n          (req: any) => !req.status || (req.status.toLowerCase() !== \"fulfilled\" && req.status.toLowerCase() !== \"successful\")\n        );\n\n        setRequests(pendingRequests);\n        console.log(\"My recipient requests:\", pendingRequests);\n      })\n      .catch((err) => console.error(\"Request fetch error:\", err));\n  }, [recipientId]);\n\n  // --------------------------------\n  // Helpers for status design\n  // --------------------------------\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"Fulfilled\":\n        return \"text-green-600\";\n      case \"Pending\":\n        return \"text-orange-600\";\n      case \"Cancelled\":\n        return \"text-red-600\";\n      default:\n        return \"text-gray-600\";\n    }\n  };\n\n  const getStatusBgColor = (status: string) => {\n    switch (status) {\n      case \"Fulfilled\":\n        return \"bg-green-100\";\n      case \"Pending\":\n        return \"bg-orange-100\";\n      case \"Cancelled\":\n        return \"bg-red-100\";\n      default:\n        return \"bg-gray-100\";\n    }\n  };\n\n  const getConfirmationColor = (status: string) => {\n    switch (status) {\n      case \"Confirmed\":\n        return \"text-green-600 bg-green-100\";\n      case \"Rejected\":\n        return \"text-red-600 bg-red-100\";\n      default:\n        return \"text-gray-600 bg-gray-100\";\n    }\n  };\n\n  return (\n    <main className=\"min-h-screen bg-gradient-to-br from-white via-red-50 to-white\">\n      {/* Header */}\n      <header className=\"bg-gradient-to-r from-red-600 to-red-700 text-white p-6\">\n        <div className=\"max-w-7xl mx-auto flex justify-between items-center\">\n          <div className=\"flex items-center gap-3\">\n            <Heart className=\"w-8 h-8 fill-white\" />\n            <h1 className=\"text-3xl font-bold\">{recipientName}</h1>\n          </div>\n\n          <div className=\"flex items-center gap-3 relative\">\n            <button\n              onClick={() => setShowProfileMenu(!showProfileMenu)}\n              className=\"p-2 rounded-full hover:bg-red-500 transition bg-white text-red-600 w-10 h-10 flex items-center justify-center\"\n              title=\"Profile menu\"\n            >\n              üë§\n            </button>\n\n            {showProfileMenu && (\n              <div className=\"absolute right-0 top-12 bg-gradient-to-b from-white to-gray-50 text-gray-800 rounded-2xl shadow-2xl w-64 z-40 border border-red-100 overflow-hidden\">\n                {/* Profile Info Section */}\n                <div className=\"p-5 bg-gradient-to-r from-red-50 to-red-100 border-b-2 border-red-200\">\n                  <p className=\"font-bold text-lg text-red-700\">{recipientName}</p>\n                  <p className=\"text-sm text-gray-600 mt-1\">{recipientEmail}</p>\n                  <p className=\"text-sm text-gray-600\">{recipientPhone}</p>\n                </div>\n                \n                {/* Menu Items */}\n                <div className=\"py-2\">\n                  <Link\n                    href=\"/recipient/profile\"\n                    className=\"flex items-center gap-3 px-4 py-3 hover:bg-red-50 text-gray-800 transition border-l-4 border-transparent hover:border-red-600\"\n                    onClick={() => setShowProfileMenu(false)}\n                  >\n                    <FileText className=\"w-5 h-5 text-red-600\" />\n                    <span className=\"font-medium\">Edit Profile</span>\n                  </Link>\n                  <Link\n                    href=\"/recipient/history\"\n                    className=\"flex items-center gap-3 px-4 py-3 hover:bg-orange-50 text-gray-800 transition border-l-4 border-transparent hover:border-orange-600\"\n                    onClick={() => setShowProfileMenu(false)}\n                  >\n                    <Calendar className=\"w-5 h-5 text-orange-600\" />\n                    <span className=\"font-medium\">View History</span>\n                  </Link>\n                  <button\n                    onClick={() => {\n                      localStorage.clear();\n                      window.location.href = \"/\";\n                    }}\n                    className=\"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-100 text-gray-800 transition border-l-4 border-transparent hover:border-red-700\"\n                  >\n                    <LogOut className=\"w-5 h-5 text-red-700\" />\n                    <span className=\"font-medium\">Logout</span>\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto p-6 space-y-8\">\n        {/* Button: New Request */}\n        <div className=\"flex justify-between items-center\">\n          <h2 className=\"text-2xl font-bold\">Your Blood Requests</h2>\n          <Link\n            href=\"/recipient/create-request\"\n            className=\"px-6 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition\"\n          >\n            + New Request\n          </Link>\n        </div>\n\n        {/* Request Cards */}\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {requests.length === 0 && (\n            <p className=\"text-gray-600 col-span-full\">You have not created any requests yet.</p>\n          )}\n\n          {requests.map((req: any, i: number) => (\n            <div\n              key={i}\n              className={`bg-gradient-to-br ${\n                req.status === \"Fulfilled\"\n                  ? \"from-green-50 to-white border-2 border-green-200\"\n                  : req.status === \"Pending\"\n                  ? \"from-orange-50 to-white border-2 border-orange-200\"\n                  : \"from-red-50 to-white border-2 border-red-200\"\n              } rounded-2xl shadow-xl p-6 hover:shadow-2xl transition`}\n            >\n              {/* Top Section */}\n              <div className=\"flex justify-between items-start mb-4\">\n                <div>\n                  <h3 className=\"text-sm text-gray-600 font-bold uppercase tracking-wide mb-2\">\n                    Blood Type Needed\n                  </h3>\n                  <div className=\"flex items-baseline gap-2\">\n                    <div className=\"text-4xl font-bold text-red-600\">{req.bloodType}</div>\n                    <div className=\"text-lg text-gray-600\">{req.unitsNeeded} units</div>\n                  </div>\n                </div>\n\n                {/* Status Badge */}\n                <div\n                  className={`inline-flex items-center gap-2 px-4 py-2 rounded-full font-bold text-sm ${getStatusBgColor(\n                    req.status\n                  )}`}\n                >\n                  {req.status === \"Fulfilled\" ? (\n                    <>\n                      <CheckCircle className=\"w-4 h-4 text-green-600\" />\n                      <span className=\"text-green-600\">Fulfilled</span>\n                    </>\n                  ) : (\n                    <>\n                      <Clock className=\"w-4 h-4 text-orange-600\" />\n                      <span className=\"text-orange-600\">Pending</span>\n                    </>\n                  )}\n                </div>\n              </div>\n\n              {/* Details Row */}\n              <div className=\"border-t border-gray-200 pt-4 mb-4 space-y-2\">\n                <div>\n                  <p className=\"text-xs text-gray-600 font-bold uppercase\">Hospital</p>\n                  <p className=\"text-gray-800 font-semibold\">{req.hospital || \"N/A\"}</p>\n                </div>\n                <div>\n                  <p className=\"text-xs text-gray-600 font-bold uppercase\">Urgency</p>\n                  <p className=\"text-orange-600 font-semibold\">{req.urgency || \"MODERATE\"}</p>\n                </div>\n              </div>\n\n              {/* Action Button */}\n              <button \n                onClick={() => {\n                  setSelectedRequest(req);\n                  setShowDetailsModal(true);\n                }}\n                className=\"w-full px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 text-white font-semibold rounded-lg hover:shadow-lg transition mt-2\">\n                View Details\n              </button>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Details Modal */}\n      {showDetailsModal && selectedRequest && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden\">\n            {/* Modal Header with Gradient */}\n            <div className=\"bg-gradient-to-r from-red-600 to-red-700 text-white p-8\">\n              <h2 className=\"text-3xl font-bold flex items-center gap-2\">\n                <Heart className=\"w-8 h-8 fill-white\" />\n                Blood Request Details\n              </h2>\n            </div>\n\n            {/* Modal Content */}\n            <div className=\"p-8 space-y-6 max-h-[70vh] overflow-y-auto\">\n              {/* Key Details Grid */}\n              <div className=\"grid md:grid-cols-3 gap-6\">\n                <div className=\"bg-red-50 rounded-xl p-5 border-2 border-red-200\">\n                  <h3 className=\"text-gray-600 font-bold text-xs uppercase mb-2\">Blood Type</h3>\n                  <p className=\"text-4xl font-bold text-red-600\">{selectedRequest.bloodType}</p>\n                </div>\n                <div className=\"bg-orange-50 rounded-xl p-5 border-2 border-orange-200\">\n                  <h3 className=\"text-gray-600 font-bold text-xs uppercase mb-2\">Units Needed</h3>\n                  <p className=\"text-4xl font-bold text-orange-600\">{selectedRequest.unitsNeeded}</p>\n                </div>\n                <div className={`rounded-xl p-5 border-2 ${selectedRequest.status === \"Fulfilled\" ? \"bg-green-50 border-green-200\" : \"bg-yellow-50 border-yellow-200\"}`}>\n                  <h3 className=\"text-gray-600 font-bold text-xs uppercase mb-2\">Status</h3>\n                  <p className={`text-xl font-bold ${selectedRequest.status === \"Fulfilled\" ? \"text-green-600\" : \"text-yellow-600\"}`}>\n                    {selectedRequest.status}\n                  </p>\n                </div>\n              </div>\n\n              {/* Additional Info */}\n              <div className=\"border-t-2 border-gray-200 pt-6\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                  <AlertCircle className=\"w-6 h-6 text-red-600\" />\n                  Request Information\n                </h3>\n                <div className=\"grid md:grid-cols-2 gap-6\">\n                  <div>\n                    <p className=\"text-sm text-gray-600 font-bold uppercase mb-1\">Patient/Recipient Name</p>\n                    <p className=\"text-lg text-gray-800 font-semibold\">{selectedRequest.recipientName || \"N/A\"}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600 font-bold uppercase mb-1\">Hospital</p>\n                    <p className=\"text-lg text-gray-800\">{selectedRequest.hospital || \"N/A\"}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600 font-bold uppercase mb-1\">Urgency Level</p>\n                    <p className=\"text-lg text-orange-600 font-semibold\">{selectedRequest.urgency || \"MODERATE\"}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600 font-bold uppercase mb-1\">Confirmation Status</p>\n                    <p className={`text-lg font-semibold px-3 py-1 rounded inline-block ${getConfirmationColor(selectedRequest.confirmationStatus || \"Pending\")}`}>\n                      {selectedRequest.confirmationStatus || \"Pending\"}\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm text-gray-600 font-bold uppercase mb-1\">Created</p>\n                    <p className=\"text-lg text-gray-800\">{new Date(selectedRequest.createdAt || Date.now()).toLocaleDateString()}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Progress Timeline */}\n              <div className=\"border-t-2 border-gray-200 pt-6\">\n                <h3 className=\"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2\">\n                  <CheckCircle className=\"w-6 h-6 text-green-600\" />\n                  Request Progress\n                </h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className={`w-6 h-6 rounded-full ${selectedRequest.status ? \"bg-green-600\" : \"bg-gray-300\"}`}></div>\n                    <div>\n                      <p className=\"font-bold text-gray-800\">Request Created</p>\n                      <p className=\"text-sm text-gray-600\">{new Date(selectedRequest.createdAt || Date.now()).toLocaleString()}</p>\n                    </div>\n                  </div>\n                  {selectedRequest.status === \"Fulfilled\" && (\n                    <>\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"w-6 h-6 rounded-full bg-green-600\"></div>\n                        <div>\n                          <p className=\"font-bold text-gray-800\">Donor Matched</p>\n                          <p className=\"text-sm text-gray-600\">Blood type compatibility confirmed</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"w-6 h-6 rounded-full bg-green-600\"></div>\n                        <div>\n                          <p className=\"font-bold text-gray-800\">Donation Scheduled</p>\n                          <p className=\"text-sm text-gray-600\">Blood scheduled for delivery</p>\n                        </div>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Modal Footer */}\n            <div className=\"bg-gray-50 p-8 border-t-2 border-gray-200 flex justify-end gap-4\">\n              <button\n                onClick={() => setShowDetailsModal(false)}\n                className=\"px-8 py-3 bg-gray-300 text-gray-800 font-bold rounded-lg hover:bg-gray-400 transition\"\n              >\n                Close\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* RECIPIENT INFORMATION & STATS SECTION */}\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <RecipientInfoSection recipientName={recipientName} requests={requests} />\n      </div>\n\n      {/* NEARBY HOSPITALS MAP SECTION */}\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <RecipientHospitalMap recipientLocation={recipientLocation} requests={requests} />\n      </div>\n\n      {/* BLOOD TYPE INFORMATION FOR RECIPIENTS */}\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <BloodTypeForRecipients />\n      </div>\n    </main>\n  );\n}\n\n/* RECIPIENT INFORMATION & STATS */\nfunction RecipientInfoSection({ recipientName, requests }: any) {\n  const pendingRequests = requests.filter((r: any) => r.status !== \"Fulfilled\");\n  const totalRequests = requests.length;\n  \n  return (\n    <div className=\"bg-white rounded-2xl shadow-xl p-8\">\n      <h2 className=\"text-3xl font-bold text-red-700 mb-6 flex items-center gap-2\">\n        <Heart className=\"w-8 h-8 fill-red-600\" />\n        Your Blood Request Overview\n      </h2>\n      \n      <div className=\"grid md:grid-cols-3 gap-6\">\n        {/* Active Requests */}\n        <div className=\"bg-gradient-to-br from-orange-50 to-orange-100 rounded-2xl p-6 border-2 border-orange-300 shadow-lg hover:shadow-xl transition\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600 font-bold uppercase mb-2\">Active Requests</p>\n              <p className=\"text-4xl font-bold text-orange-600\">{pendingRequests.length}</p>\n            </div>\n            <div className=\"bg-orange-600 text-white p-4 rounded-full\">\n              <AlertCircle className=\"w-8 h-8\" />\n            </div>\n          </div>\n          <p className=\"text-xs text-gray-600 mt-3\">Awaiting donor match and donation</p>\n        </div>\n\n        {/* Total Requests */}\n        <div className=\"bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-6 border-2 border-red-300 shadow-lg hover:shadow-xl transition\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600 font-bold uppercase mb-2\">Total Requests</p>\n              <p className=\"text-4xl font-bold text-red-600\">{totalRequests}</p>\n            </div>\n            <div className=\"bg-red-600 text-white p-4 rounded-full\">\n              <Heart className=\"w-8 h-8 fill-white\" />\n            </div>\n          </div>\n          <p className=\"text-xs text-gray-600 mt-3\">All requests created</p>\n        </div>\n\n        {/* Fulfilled Requests */}\n        <div className=\"bg-gradient-to-br from-green-50 to-green-100 rounded-2xl p-6 border-2 border-green-300 shadow-lg hover:shadow-xl transition\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm text-gray-600 font-bold uppercase mb-2\">Fulfilled</p>\n              <p className=\"text-4xl font-bold text-green-600\">{totalRequests - pendingRequests.length}</p>\n            </div>\n            <div className=\"bg-green-600 text-white p-4 rounded-full\">\n              <CheckCircle className=\"w-8 h-8\" />\n            </div>\n          </div>\n          <p className=\"text-xs text-gray-600 mt-3\">Successfully matched & received</p>\n        </div>\n      </div>\n\n      {/* Tips for Recipients */}\n      <div className=\"mt-8 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6 border-l-4 border-blue-600\">\n        <h3 className=\"text-lg font-bold text-blue-700 mb-3 flex items-center gap-2\">\n          <AlertCircle className=\"w-5 h-5\" />\n          Tips for Your Request\n        </h3>\n        <ul className=\"space-y-2 text-sm text-gray-700\">\n          <li className=\"flex items-start gap-2\"><CheckCircle className=\"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5\" /> <span><strong>Provide Complete Information:</strong> The more details you provide, the faster donors can match.</span></li>\n          <li className=\"flex items-start gap-2\"><CheckCircle className=\"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5\" /> <span><strong>Update Your Location:</strong> Helps nearby donors find you quickly.</span></li>\n          <li className=\"flex items-start gap-2\"><CheckCircle className=\"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5\" /> <span><strong>Check Status Regularly:</strong> Visit your request details to see matching progress.</span></li>\n          <li className=\"flex items-start gap-2\"><CheckCircle className=\"w-4 h-4 text-blue-600 flex-shrink-0 mt-0.5\" /> <span><strong>Contact Hospital:</strong> If urgent, reach out to your hospital directly.</span></li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n\n/* BLOOD TYPE INFORMATION FOR RECIPIENTS */\nfunction BloodTypeForRecipients() {\n  const bloodTypeInfo = [\n    {\n      type: \"O-\",\n      icon: \"‚¨õ\",\n      receives: \"O- only\",\n      description: \"Rarest blood type. Can only receive O- blood.\",\n      color: \"from-red-100 to-red-200\",\n      border: \"border-red-400\"\n    },\n    {\n      type: \"O+\",\n      icon: \"‚ö™\",\n      receives: \"O+, O-\",\n      description: \"Can receive from O donors (most common donors)\",\n      color: \"from-red-50 to-red-100\",\n      border: \"border-red-300\"\n    },\n    {\n      type: \"A-\",\n      icon: \"‚¨õ\",\n      receives: \"A-, O-\",\n      description: \"Can receive from A- and O- donors\",\n      color: \"from-rose-100 to-rose-200\",\n      border: \"border-rose-400\"\n    },\n    {\n      type: \"A+\",\n      icon: \"‚ö™\",\n      receives: \"A+, A-, O+, O-\",\n      description: \"Can receive from A and O donors\",\n      color: \"from-red-50 to-red-100\",\n      border: \"border-red-300\"\n    },\n    {\n      type: \"B-\",\n      icon: \"‚¨õ\",\n      receives: \"B-, O-\",\n      description: \"Can receive from B- and O- donors\",\n      color: \"from-rose-100 to-rose-200\",\n      border: \"border-rose-400\"\n    },\n    {\n      type: \"B+\",\n      icon: \"‚ö™\",\n      receives: \"B+, B-, O+, O-\",\n      description: \"Can receive from B and O donors\",\n      color: \"from-red-50 to-red-100\",\n      border: \"border-red-300\"\n    },\n    {\n      type: \"AB-\",\n      icon: \"‚¨õ\",\n      receives: \"AB-, A-, B-, O-\",\n      description: \"Can receive from A, B, and O negative donors\",\n      color: \"from-pink-100 to-pink-200\",\n      border: \"border-pink-400\"\n    },\n    {\n      type: \"AB+\",\n      icon: \"‚ö™\",\n      receives: \"All types\",\n      description: \"Universal recipient! Can receive from anyone.\",\n      color: \"from-red-200 to-red-300\",\n      border: \"border-red-500\"\n    },\n  ];\n\n  return (\n    <div className=\"mt-10 p-8 bg-gradient-to-r from-white via-red-50 to-white rounded-2xl shadow-lg border-2 border-red-200\">\n      <h2 className=\"text-3xl font-bold text-red-700 mb-2 flex items-center gap-2\">\n        <Heart className=\"w-8 h-8 fill-red-600\" /> Blood Type Information for Recipients\n      </h2>\n      <p className=\"text-gray-600 mb-6 text-sm\">Know which blood types can help you</p>\n\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        {bloodTypeInfo.map((b, i) => (\n          <div\n            key={i}\n            className={`bg-gradient-to-br ${b.color} p-5 rounded-2xl shadow-lg border-2 ${b.border} hover:shadow-xl transition-all duration-300 transform hover:scale-105`}\n          >\n            <div className=\"mb-3\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <h3 className=\"font-bold text-3xl text-gray-900\">{b.type}</h3>\n                <span className=\"text-3xl\">{b.icon}</span>\n              </div>\n              <p className=\"text-xs text-gray-700 font-semibold italic\">\"{b.description}\"</p>\n            </div>\n            \n            <div className=\"bg-white bg-opacity-70 rounded-lg p-3 mt-3\">\n              <p className=\"text-xs font-bold text-gray-800 mb-2 flex items-center gap-1\"><Droplet className=\"w-3 h-3 text-red-600 fill-red-600\" /> Can receive from:</p>\n              <p className=\"text-sm font-bold text-red-700\">{b.receives}</p>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"mt-8 bg-gradient-to-r from-green-50 to-green-100 rounded-xl p-5 border-l-4 border-green-600\">\n        <p className=\"text-sm text-gray-700\">\n          <span className=\"font-bold text-green-700 flex items-center gap-2 mb-2\"><Heart className=\"w-4 h-4 fill-green-600 text-green-600\" /> Know Your Type:</span> If you have AB+ blood type, you're a universal recipient and can receive blood from any donor - a huge advantage! Check your blood type if you don't know it yet.\n        </p>\n      </div>\n    </div>\n  );\n}\n\n","\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { MapPin, Phone, Hospital, Navigation, Droplet } from \"lucide-react\";\r\n\r\nconst LeafletMap = dynamic(() => import(\"@/components/LeafletMap\"), { ssr: false });\r\n\r\nconst calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number) => {\r\n  const R = 6371; // Earth's radius in km\r\n  const dLat = ((lat2 - lat1) * Math.PI) / 180;\r\n  const dLon = ((lon2 - lon1) * Math.PI) / 180;\r\n  const a =\r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos((lat1 * Math.PI) / 180) *\r\n      Math.cos((lat2 * Math.PI) / 180) *\r\n      Math.sin(dLon / 2) *\r\n      Math.sin(dLon / 2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n  return R * c;\r\n};\r\n\r\n// Function to convert coordinates to readable address using reverse geocoding\r\nconst getAddressFromCoordinates = async (\r\n  latitude: number,\r\n  longitude: number\r\n): Promise<string> => {\r\n  try {\r\n    const response = await fetch(\r\n      `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}&zoom=18&addressdetails=1`\r\n    );\r\n    const data = await response.json();\r\n\r\n    if (data.address) {\r\n      const addr = data.address;\r\n      const parts = [];\r\n\r\n      // Add house number and street if available\r\n      if (addr.house_number) parts.push(addr.house_number);\r\n      if (addr.road) parts.push(addr.road);\r\n\r\n      // Add suburb/neighbourhood/village (sector/area)\r\n      if (addr.suburb) parts.push(addr.suburb);\r\n      else if (addr.neighbourhood) parts.push(addr.neighbourhood);\r\n      else if (addr.village) parts.push(addr.village);\r\n      else if (addr.hamlet) parts.push(addr.hamlet);\r\n\r\n      // Add city/town\r\n      if (addr.city) parts.push(addr.city);\r\n      else if (addr.town) parts.push(addr.town);\r\n\r\n      // Add postcode/pincode\r\n      if (addr.postcode) parts.push(`Pin Code ${addr.postcode}`);\r\n\r\n      // Add state\r\n      if (addr.state) parts.push(addr.state);\r\n\r\n      // Add country\r\n      if (addr.country) parts.push(addr.country);\r\n\r\n      const fullAddress = parts.filter(Boolean).join(\", \");\r\n      return fullAddress || \"Location detected\";\r\n    }\r\n\r\n    return \"Location detected\";\r\n  } catch (err) {\r\n    console.error(\"Error fetching address:\", err);\r\n    return \"Location detected\";\r\n  }\r\n};\r\n\r\nexport default function RecipientHospitalMap({ recipientLocation, requests = [] }: any) {\r\n  const [hospitals, setHospitals] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [recipientLat, setRecipientLat] = useState(recipientLocation?.latitude || 21.1466);\r\n  const [recipientLon, setRecipientLon] = useState(recipientLocation?.longitude || 79.0889);\r\n  const [recipientAddress, setRecipientAddress] = useState<string | null>(null);\r\n  const [addressLoading, setAddressLoading] = useState(false);\r\n  const [selectedHospital, setSelectedHospital] = useState<any>(null);\r\n  const [selectedRequest, setSelectedRequest] = useState<any>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Update location when prop changes and refetch hospitals\r\n  useEffect(() => {\r\n    if (recipientLocation && recipientLocation.latitude && recipientLocation.longitude) {\r\n      console.log(\"[RecipientHospitalMap] Location updated from prop:\", recipientLocation);\r\n      setRecipientLat(recipientLocation.latitude);\r\n      setRecipientLon(recipientLocation.longitude);\r\n      // Clear error when location changes so we fetch again\r\n      setError(null);\r\n      \r\n      // Fetch address from coordinates\r\n      setAddressLoading(true);\r\n      getAddressFromCoordinates(recipientLocation.latitude, recipientLocation.longitude)\r\n        .then((address) => {\r\n          setRecipientAddress(address);\r\n          setAddressLoading(false);\r\n        })\r\n        .catch((err) => {\r\n          console.error(\"Error getting address:\", err);\r\n          setAddressLoading(false);\r\n        });\r\n    }\r\n  }, [recipientLocation]);\r\n\r\n  // Get user location if not provided by prop\r\n  useEffect(() => {\r\n    if (!recipientLocation && navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        async (position) => {\r\n          console.log(\"[RecipientHospitalMap] Got geolocation:\", position.coords);\r\n          setRecipientLat(position.coords.latitude);\r\n          setRecipientLon(position.coords.longitude);\r\n          \r\n          // Fetch address from coordinates\r\n          setAddressLoading(true);\r\n          try {\r\n            const address = await getAddressFromCoordinates(\r\n              position.coords.latitude,\r\n              position.coords.longitude\r\n            );\r\n            setRecipientAddress(address);\r\n          } catch (err) {\r\n            console.error(\"Error getting address:\", err);\r\n          } finally {\r\n            setAddressLoading(false);\r\n          }\r\n        },\r\n        (error) => {\r\n          console.log(\"[RecipientHospitalMap] Geolocation error - using default location:\", error);\r\n        }\r\n      );\r\n    }\r\n  }, [recipientLocation]);\r\n\r\n  useEffect(() => {\r\n    const fetchHospitals = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setError(null);\r\n        console.log(\"[RecipientHospitalMap] Fetching hospitals for location:\", { recipientLat, recipientLon });\r\n        \r\n        const response = await fetch(\"http://localhost:5000/hospital/all\");\r\n        console.log(\"[RecipientHospitalMap] Response status:\", response.status);\r\n        \r\n        if (!response.ok) {\r\n          throw new Error(`API returned status ${response.status}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        console.log(\"[RecipientHospitalMap] Hospital API Response:\", data);\r\n\r\n        if (data.success && data.hospitals && data.hospitals.length > 0) {\r\n          // Calculate distance for each hospital\r\n          const hospitalsWithDistance = data.hospitals.map((hospital: any) => {\r\n            const hospitalLat = hospital.location?.latitude || 21.1466;\r\n            const hospitalLon = hospital.location?.longitude || 79.0889;\r\n            \r\n            const distance = calculateDistance(\r\n              recipientLat,\r\n              recipientLon,\r\n              hospitalLat,\r\n              hospitalLon\r\n            );\r\n            \r\n            console.log(`[RecipientHospitalMap] Hospital: ${hospital.hospitalName}, Distance: ${distance} km`);\r\n            \r\n            return {\r\n              ...hospital,\r\n              distance: distance.toFixed(2),\r\n            };\r\n          });\r\n\r\n          // Filter hospitals within 0-50 km radius (increased from 20 km)\r\n          const nearbyHospitals = hospitalsWithDistance.filter((h: any) => {\r\n            const dist = parseFloat(h.distance);\r\n            return dist >= 0 && dist <= 50;\r\n          });\r\n\r\n          console.log(\"[RecipientHospitalMap] Nearby hospitals found:\", nearbyHospitals.length);\r\n\r\n          // Sort by distance\r\n          nearbyHospitals.sort((a: any, b: any) => \r\n            parseFloat(a.distance) - parseFloat(b.distance)\r\n          );\r\n\r\n          if (nearbyHospitals.length === 0) {\r\n            // Don't show error, just empty state - hospitals may not have saved locations\r\n            setError(null);\r\n            setHospitals([]); \r\n          } else {\r\n            setError(null); // Clear error when hospitals are found\r\n            setHospitals(nearbyHospitals);\r\n            console.log(\"[RecipientHospitalMap] Successfully loaded\", nearbyHospitals.length, \"hospitals\");\r\n          }\r\n        } else {\r\n          setError(null);\r\n          setHospitals([]);\r\n          console.log(\"[RecipientHospitalMap] No hospitals data:\", data);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"[RecipientHospitalMap] Error fetching hospitals:\", error);\r\n        setError(`Failed to fetch hospitals: ${error instanceof Error ? error.message : \"Unknown error\"}`);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchHospitals();\r\n  }, [recipientLat, recipientLon]);\r\n\r\n  // Prepare hospital data for map - use proper structure for LeafletMap\r\n  const hospitalsForMap = hospitals.map((hospital: any) => ({\r\n    location: {\r\n      latitude: hospital.location?.latitude || 21.1466,\r\n      longitude: hospital.location?.longitude || 79.0889\r\n    },\r\n    fullName: hospital.hospitalName || \"Hospital\",\r\n    bloodType: hospital.bloodType || \"Hospital\",\r\n  }));\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"bg-white rounded-2xl shadow-xl p-8 border-2 border-blue-200\">\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <Hospital className=\"w-8 h-8 text-blue-600\" />\r\n          <h2 className=\"text-3xl font-bold text-blue-700\">Nearby Hospitals</h2>\r\n        </div>\r\n        <div className=\"flex items-center justify-center h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"inline-block w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin\"></div>\r\n            <p className=\"mt-4 text-gray-600 font-semibold\">Loading hospitals...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"bg-white rounded-2xl shadow-xl p-8 border-2 border-red-200\">\r\n        <div className=\"flex items-center gap-3 mb-6\">\r\n          <Hospital className=\"w-8 h-8 text-red-600\" />\r\n          <h2 className=\"text-3xl font-bold text-red-700\">Nearby Hospitals</h2>\r\n        </div>\r\n        <div className=\"text-center py-12 bg-red-50 rounded-xl border-2 border-red-200\">\r\n          <Hospital className=\"w-12 h-12 text-red-300 mx-auto mb-3\" />\r\n          <p className=\"text-gray-700 font-semibold\">No hospital on your location</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-2xl shadow-xl p-8 border-2 border-blue-200\">\r\n      <div className=\"flex items-center gap-3 mb-6\">\r\n        <Hospital className=\"w-8 h-8 text-blue-600\" />\r\n        <h2 className=\"text-3xl font-bold text-blue-700\">Your Blood Requests & Nearby Hospitals</h2>\r\n      </div>\r\n\r\n      {/* RECIPIENT REQUESTS SECTION */}\r\n      {requests && requests.length > 0 && (\r\n        <div className=\"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-200\">\r\n          <h3 className=\"text-lg font-bold text-purple-700 mb-4 flex items-center gap-2\">\r\n            <Droplet className=\"w-5 h-5 text-purple-600 fill-purple-600\" />\r\n            Your Active Blood Requests\r\n          </h3>\r\n          \r\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {requests.map((request: any, index: number) => (\r\n              <div\r\n                key={index}\r\n                onClick={() => setSelectedRequest(request)}\r\n                className={`p-4 rounded-lg cursor-pointer transition-all border-2 ${\r\n                  selectedRequest?._id === request._id\r\n                    ? \"bg-purple-200 border-purple-600 shadow-lg\"\r\n                    : \"bg-white border-purple-200 hover:border-purple-400 hover:shadow-md\"\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-bold text-gray-800\">RE-{request._id?.substring(0, 6).toUpperCase()}</h4>\r\n                    <p className=\"text-sm text-purple-700 font-semibold\">{request.bloodType}</p>\r\n                  </div>\r\n                  <span className=\"bg-purple-600 text-white text-xs font-bold px-2 py-1 rounded-full\">\r\n                    {request.unitsNeeded} units\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"text-xs text-gray-600 space-y-1\">\r\n                  <p><strong>Status:</strong> {request.status || \"Pending\"}</p>\r\n                  <p><strong>Urgency:</strong> {request.urgency || \"Moderate\"}</p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Selected Request Details */}\r\n          {selectedRequest && (\r\n            <div className=\"mt-4 pt-4 border-t-2 border-purple-200\">\r\n              <h4 className=\"font-bold text-purple-700 mb-2\">Request Details: RE-{selectedRequest._id?.substring(0, 6).toUpperCase()}</h4>\r\n              <div className=\"grid md:grid-cols-3 gap-4\">\r\n                <div>\r\n                  <p className=\"text-xs font-bold text-purple-600 uppercase\">Blood Type</p>\r\n                  <p className=\"text-2xl font-bold text-red-600\">{selectedRequest.bloodType}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs font-bold text-purple-600 uppercase\">Units Needed</p>\r\n                  <p className=\"text-2xl font-bold text-orange-600\">{selectedRequest.unitsNeeded}</p>\r\n                </div>\r\n                <div>\r\n                  <p className=\"text-xs font-bold text-purple-600 uppercase\">Status</p>\r\n                  <p className=\"text-xl font-bold text-blue-600\">{selectedRequest.status || \"Pending\"}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {hospitals.length === 0 ? (\r\n        <div className=\"text-center py-12 bg-blue-50 rounded-xl\">\r\n          <MapPin className=\"w-12 h-12 text-blue-300 mx-auto mb-3\" />\r\n          <p className=\"text-gray-600 font-semibold\">No hospitals found nearby</p>\r\n          <p className=\"text-sm text-gray-500 mt-2\">Hospitals may not have saved their locations yet. Check back later.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid md:grid-cols-3 gap-6\">\r\n          {/* Map Section */}\r\n          <div className=\"md:col-span-2\">\r\n            <div className=\"rounded-xl overflow-hidden shadow-lg h-96 border-2 border-blue-100\">\r\n              <LeafletMap\r\n                hospitals={hospitalsForMap}\r\n                currentLocation={{ latitude: recipientLat, longitude: recipientLon }}\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Hospital List Section */}\r\n          <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n            <div className=\"bg-blue-50 rounded-lg p-3 border-l-4 border-blue-600\">\r\n              <p className=\"text-xs font-bold text-blue-700 uppercase tracking-wide\">üìç Hospitals Near You</p>\r\n              <p className=\"text-sm text-gray-600 mt-1\">{hospitals.length} hospitals found within 0-20 km</p>\r\n              {hospitals.length > 0 && (\r\n                <p className=\"text-xs text-gray-500 mt-2\">\r\n                  Your Location: {addressLoading ? <span className=\"italic\">Loading address...</span> : (recipientAddress || \"Location detected\")}\r\n                </p>\r\n              )}\r\n            </div>\r\n\r\n            {hospitals.map((hospital: any, index: number) => (\r\n              <div\r\n                key={index}\r\n                onClick={() => setSelectedHospital(hospital)}\r\n                className={`p-4 rounded-xl cursor-pointer transition-all duration-200 border-2 ${\r\n                  selectedHospital?.id === hospital.id\r\n                    ? \"bg-blue-100 border-blue-600 shadow-lg\"\r\n                    : \"bg-gradient-to-r from-white to-blue-50 border-blue-200 hover:border-blue-400 hover:shadow-md\"\r\n                }`}\r\n              >\r\n                <div className=\"flex items-start justify-between mb-2\">\r\n                  <h3 className=\"font-bold text-gray-800 text-sm line-clamp-2\">{hospital.hospitalName}</h3>\r\n                  <span className=\"bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full flex-shrink-0 ml-1\">\r\n                    {hospital.distance} km\r\n                  </span>\r\n                </div>\r\n                \r\n                <div className=\"space-y-1 text-xs text-gray-600\">\r\n                  {hospital.phone && (\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Phone className=\"w-3 h-3 text-gray-400\" />\r\n                      <span className=\"truncate\">{hospital.phone}</span>\r\n                    </div>\r\n                  )}\r\n                  {hospital.location?.address && (\r\n                    <div className=\"flex items-start gap-2\">\r\n                      <MapPin className=\"w-3 h-3 text-gray-400 flex-shrink-0 mt-0.5\" />\r\n                      <span className=\"line-clamp-2\">{hospital.location.address}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Distance Bar */}\r\n                <div className=\"mt-3 bg-gray-200 rounded-full h-2 overflow-hidden\">\r\n                  <div\r\n                    className=\"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all\"\r\n                    style={{\r\n                      width: `${Math.max(\r\n                        10,\r\n                        100 - (parseFloat(hospital.distance) / Math.max(...hospitals.map((h: any) => parseFloat(h.distance)))) * 100\r\n                      )}%`,\r\n                    }}\r\n                  ></div>\r\n                </div>\r\n                <p className=\"text-xs text-gray-500 mt-1 flex items-center gap-1\">\r\n                  <Navigation className=\"w-3 h-3\" />\r\n                  {hospital.distance} km away\r\n                </p>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Selected Hospital Details */}\r\n      {selectedHospital && (\r\n        <div className=\"mt-6 bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-6 border-l-4 border-blue-600\">\r\n          <h3 className=\"text-lg font-bold text-blue-700 mb-4 flex items-center gap-2\">\r\n            <Hospital className=\"w-5 h-5\" />\r\n            {selectedHospital.hospitalName}\r\n          </h3>\r\n          \r\n          <div className=\"grid md:grid-cols-2 gap-4\">\r\n            <div>\r\n              <p className=\"text-xs font-bold text-blue-600 uppercase tracking-wide mb-1\">Distance from You</p>\r\n              <p className=\"text-2xl font-bold text-blue-700\">{selectedHospital.distance} <span className=\"text-lg text-gray-600\">km</span></p>\r\n            </div>\r\n            \r\n            {selectedHospital.phone && (\r\n              <div>\r\n                <p className=\"text-xs font-bold text-blue-600 uppercase tracking-wide mb-1 flex items-center gap-1\">\r\n                  <Phone className=\"w-3 h-3\" />\r\n                  Contact\r\n                </p>\r\n                <a\r\n                  href={`tel:${selectedHospital.phone}`}\r\n                  className=\"text-lg font-bold text-blue-700 hover:underline\"\r\n                >\r\n                  {selectedHospital.phone}\r\n                </a>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {selectedHospital.location?.address && (\r\n            <div className=\"mt-4\">\r\n              <p className=\"text-xs font-bold text-blue-600 uppercase tracking-wide mb-1 flex items-center gap-1\">\r\n                <MapPin className=\"w-3 h-3\" />\r\n                Address\r\n              </p>\r\n              <p className=\"text-gray-700\">{selectedHospital.location.address}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"mt-4 flex gap-2\">\r\n            <button\r\n              onClick={() => {\r\n                if (selectedHospital.phone) {\r\n                  window.location.href = `tel:${selectedHospital.phone}`;\r\n                }\r\n              }}\r\n              className=\"flex-1 px-4 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition flex items-center justify-center gap-2\"\r\n            >\r\n              <Phone className=\"w-4 h-4\" />\r\n              Call Hospital\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                if (selectedHospital.location) {\r\n                  window.open(\r\n                    `https://maps.google.com/?q=${selectedHospital.location.latitude},${selectedHospital.location.longitude}`,\r\n                    \"_blank\"\r\n                  );\r\n                }\r\n              }}\r\n              className=\"flex-1 px-4 py-2 bg-blue-100 text-blue-700 font-semibold rounded-lg hover:bg-blue-200 transition flex items-center justify-center gap-2\"\r\n            >\r\n              <Navigation className=\"w-4 h-4\" />\r\n              Get Directions\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}