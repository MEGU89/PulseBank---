(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[553],{457:function(t,e,o){Promise.resolve().then(o.bind(o,4949))},4949:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return s}});var n=o(7437),a=o(2265),l=o(4474),r=o(2887);function s(){let[t,e]=(0,a.useState)({totalDonations:0,totalUnits:0,lastDonationDate:"",nextEligibleDate:"",mostDonatedBloodType:""}),[o,s]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let t=localStorage.getItem("token");t&&s((0,l.o)(t).userId)},[]),(0,a.useEffect)(()=>{o&&fetch(r.gm.donationHistory(o)).then(t=>t.json()).then(t=>{var o,n;let a=t.donations||[];if(0===a.length){e({totalDonations:0,totalUnits:0,lastDonationDate:"N/A",nextEligibleDate:"Eligible Now",mostDonatedBloodType:"N/A"}),d(!1);return}let l=a.length,r=a.reduce((t,e)=>t+e.units,0),s=a[0],i=(null===(o=s.date)||void 0===o?void 0:o.slice(0,10))||"N/A",c=new Date(s.date);c.setDate(c.getDate()+90);let u=c.toISOString().slice(0,10),g={};a.forEach(t=>{g[t.bloodType]||(g[t.bloodType]=0),g[t.bloodType]+=1}),e({totalDonations:l,totalUnits:r,lastDonationDate:i,nextEligibleDate:u,mostDonatedBloodType:(null===(n=Object.entries(g).sort((t,e)=>e[1]-t[1])[0])||void 0===n?void 0:n[0])||"N/A"}),d(!1)}).catch(t=>console.error(t))},[o]),(0,n.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Your Donation Statistics"}),c?(0,n.jsx)("p",{className:"text-gray-600",children:"Loading stats..."}):(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,n.jsx)(i,{title:"Total Donations",value:t.totalDonations,color:"red"}),(0,n.jsx)(i,{title:"Total Units Donated",value:t.totalUnits,color:"green"}),(0,n.jsx)(i,{title:"Last Donation Date",value:t.lastDonationDate,color:"blue"}),(0,n.jsx)(i,{title:"Next Eligible Donation",value:t.nextEligibleDate,color:"purple"}),(0,n.jsx)(i,{title:"Most Donated Blood Type",value:t.mostDonatedBloodType,color:"yellow"})]})]})}function i(t){let{title:e,value:o,color:a}=t;return(0,n.jsxs)("div",{className:"p-6 rounded-xl shadow bg-white border-l-4 ".concat({red:"bg-red-100 text-red-700",green:"bg-green-100 text-green-700",blue:"bg-blue-100 text-blue-700",purple:"bg-purple-100 text-purple-700",yellow:"bg-yellow-100 text-yellow-700"}[a]),children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:e}),(0,n.jsx)("p",{className:"text-3xl font-bold mt-2",children:o})]})}},2887:function(t,e,o){"use strict";o.d(e,{Z:function(){return l},gm:function(){return a}});let n="http://localhost:5000",a={donationHistory:t=>"".concat(n,"/donor/history/").concat(t),urgentRequests:"".concat(n,"/donor/requests"),addDonation:"".concat(n,"/donor/add")},l={addRequest:"".concat(n,"/request/add"),getAllRequests:"".concat(n,"/request/all")}},4474:function(t,e,o){"use strict";o.d(e,{o:function(){return a}});class n extends Error{}function a(t,e){let o;if("string"!=typeof t)throw new n("Invalid token specified: must be a string");e||(e={});let a=!0===e.header?0:1,l=t.split(".")[a];if("string"!=typeof l)throw new n(`Invalid token specified: missing part #${a+1}`);try{o=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Error("base64 string is not of the correct length")}try{var o;return o=e,decodeURIComponent(atob(o).replace(/(.)/g,(t,e)=>{let o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch(t){return atob(e)}}(l)}catch(t){throw new n(`Invalid token specified: invalid base64 for part #${a+1} (${t.message})`)}try{return JSON.parse(o)}catch(t){throw new n(`Invalid token specified: invalid json for part #${a+1} (${t.message})`)}}n.prototype.name="InvalidTokenError"}},function(t){t.O(0,[971,117,744],function(){return t(t.s=457)}),_N_E=t.O()}]);