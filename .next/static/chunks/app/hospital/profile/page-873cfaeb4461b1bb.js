(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{7672:function(e,t,a){Promise.resolve().then(a.bind(a,5724))},5724:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var r=a(7437),l=a(2265),s=a(2660),o=a(8997),n=a(7689),i=a(6540),d=a(3229),c=a(7648);function u(){let[e,t]=(0,l.useState)(""),[a,u]=(0,l.useState)(""),[h,m]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[x,g]=(0,l.useState)(20),[b,y]=(0,l.useState)(""),[v,w]=(0,l.useState)(null),[j,N]=(0,l.useState)(!1),[k,S]=(0,l.useState)("");(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(e){let a=JSON.parse(e);t(a.hospitalId||""),u(a.fullName||""),m(a.email||""),f(a.phone||""),g(a.sleepTime||20),y(a.profileImage||"")}},[]);let Z=async()=>{N(!0),S("");try{let t=localStorage.getItem("user"),r=t?JSON.parse(t):{},l=r._id||r.id||null;try{let t=await fetch("http://localhost:5000/auth/update-profile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:l,hospitalId:e,fullName:a,email:h,phone:p,profileImage:b,sleepTime:x})}),s=await t.json();if(s.success&&s.user){localStorage.setItem("user",JSON.stringify(s.user));try{window.dispatchEvent(new CustomEvent("user-updated",{detail:s.user}))}catch(e){}S("Profile updated and saved to server ✓")}else{let t={...r,hospitalId:e,fullName:a,email:h,phone:p,profileImage:b,sleepTime:x};localStorage.setItem("user",JSON.stringify(t));try{window.dispatchEvent(new CustomEvent("user-updated",{detail:t}))}catch(e){}S("Profile updated locally (server gave no user)")}}catch(l){let t={...r,hospitalId:e,fullName:a,email:h,phone:p,profileImage:b,sleepTime:x};localStorage.setItem("user",JSON.stringify(t));try{window.dispatchEvent(new CustomEvent("user-updated",{detail:t}))}catch(e){}S("Profile saved locally (server unreachable)")}setTimeout(()=>S(""),3e3)}catch(e){S("Error updating profile ✗"),console.error(e)}finally{N(!1)}};return(0,r.jsxs)("main",{className:"min-h-screen bg-linear-to-br from-white via-red-50 to-white",children:[(0,r.jsx)("header",{className:"bg-linear-to-r from-red-600 to-red-700 text-white p-6 sticky top-0 z-30 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto flex items-center gap-4",children:[(0,r.jsx)(c.default,{href:"/hospital/dashboard",className:"hover:opacity-80 transition",children:(0,r.jsx)(s.Z,{className:"w-6 h-6"})}),(0,r.jsx)(o.Z,{className:"w-8 h-8 fill-white"}),(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Hospital Profile"})]})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto p-6",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,r.jsx)("div",{className:"w-32 h-32 rounded-full bg-linear-to-br from-red-100 to-red-200 flex items-center justify-center overflow-hidden border-4 border-red-600 shadow-lg",children:b?(0,r.jsx)("img",{src:b,alt:"Hospital",className:"w-full h-full object-cover"}):(0,r.jsx)(o.Z,{className:"w-16 h-16 text-red-600"})}),(0,r.jsxs)("label",{className:"flex items-center gap-2 px-6 py-3 bg-red-600 text-white rounded-lg cursor-pointer hover:bg-red-700 transition font-semibold shadow-md",children:[(0,r.jsx)(n.Z,{className:"w-5 h-5"}),"Upload Photo",(0,r.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;if(null===(t=e.target.files)||void 0===t?void 0:t[0]){w(e.target.files[0]);let t=new FileReader;t.onload=e=>{var t;y(null===(t=e.target)||void 0===t?void 0:t.result)},t.readAsDataURL(e.target.files[0])}}})]})]}),(0,r.jsxs)("div",{className:"space-y-5 border-t pt-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-red-700 mb-2",children:"\uD83C\uDFE5 Hospital ID"}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border-2 border-red-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Hospital ID"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-red-700 mb-2",children:"\uD83C\uDFE5 Hospital Name"}),(0,r.jsx)("input",{type:"text",value:a,onChange:e=>u(e.target.value),className:"w-full px-4 py-3 border-2 border-red-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"Hospital Name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-red-700 mb-2",children:"✉️ Email"}),(0,r.jsx)("input",{type:"email",value:h,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border-2 border-red-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"hospital@example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-red-700 mb-2",children:"\uD83D\uDCDE Phone"}),(0,r.jsx)("input",{type:"tel",value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border-2 border-red-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"+91 98765 43210"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-bold text-red-700 mb-2",children:"⏰ Location Sharing Sleep Time (minutes)"}),(0,r.jsx)("input",{type:"number",value:x,onChange:e=>g(Math.max(5,parseInt(e.target.value)||20)),className:"w-full px-4 py-3 border-2 border-red-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent",placeholder:"20",min:"5",max:"480"}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:"If you logout without stopping location share, it will remain active for this duration (minimum 5 min, default 20 min, maximum 480 min)"})]})]}),k&&(0,r.jsx)("div",{className:"p-4 rounded-lg text-center font-bold text-sm ".concat(k.includes("✓")?"bg-green-100 text-green-700 border-2 border-green-300":"bg-red-100 text-red-700 border-2 border-red-300"),children:k}),(0,r.jsx)("button",{onClick:Z,disabled:j,className:"w-full px-6 py-4 bg-linear-to-r from-red-600 to-red-700 text-white font-bold rounded-lg hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg",children:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{className:"w-5 h-5"}),"Save Profile"]})})]})})]})}},2660:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8997:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},6540:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},3229:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},7689:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])}},function(e){e.O(0,[216,971,117,744],function(){return e(e.s=7672)}),_N_E=e.O()}]);