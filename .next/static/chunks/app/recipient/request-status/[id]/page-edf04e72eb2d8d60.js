(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[728],{5582:function(e,t,s){Promise.resolve().then(s.bind(s,8332))},8332:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(7437),n=s(2265),a=s(9376),c=s(2887),l=s(4474),i=s(2660),o=s(1671),d=s(1723),u=s(9322),h=s(7648);function x(){let{id:e}=(0,a.useParams)(),t=(0,a.useRouter)(),[s,x]=(0,n.useState)(null),[f,p]=(0,n.useState)(null),[m,g]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let e=localStorage.getItem("token");e&&x((0,l.o)(e).userId)},[]),(0,n.useEffect)(()=>{s&&fetch(c.Z.getAllRequests).then(e=>e.json()).then(r=>{let n=(r.requests||[]).find(t=>t._id===e);if(!n){alert("Request not found"),t.push("/recipient/dashboard");return}if(n.requestedBy!==s){alert("Unauthorized access to request"),t.push("/recipient/dashboard");return}p(n),g(!1)}).catch(e=>console.error(e))},[s]),m||!f)?(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Loading request status..."})}):(0,r.jsxs)("div",{className:"p-6 max-w-3xl mx-auto",children:[(0,r.jsxs)(h.default,{href:"/recipient/dashboard",className:"flex items-center gap-2 text-red-600 mb-6 font-semibold",children:[(0,r.jsx)(i.Z,{className:"w-5 h-5"}),"Back to Dashboard"]}),(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Request Status"}),(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-xl p-6 border-l-4 border-red-600",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Blood Request Details"}),(0,r.jsxs)("div",{className:"space-y-3 text-gray-700",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Blood Type:"})," ",f.bloodType]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Units Needed:"})," ",f.unitsNeeded]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Urgency:"})," ",f.urgency]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Status:"}),(0,r.jsx)("span",{className:"ml-2 font-bold ".concat((e=>{switch(e){case"Fulfilled":return"text-green-600";case"Pending":return"text-orange-600";case"Cancelled":return"text-red-600";default:return"text-gray-600"}})(f.status)),children:f.status})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Requested Distance:"})," ",f.locationKm," km"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Assigned Hospital:"})," ",f.hospital?(0,r.jsx)("span",{className:"font-semibold",children:f.hospital}):(0,r.jsx)("span",{className:"text-gray-500",children:"Not assigned yet"})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-white shadow-lg rounded-xl p-6 border-l-4 border-blue-600",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Progress Timeline"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(o.Z,{className:"text-green-600 w-6 h-6"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Request Submitted"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(d.Z,{className:"text-orange-600 w-6 h-6"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Pending"===f.status?"Searching for compatible donors...":"Matching Completed"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["Fulfilled"===f.status?(0,r.jsx)(o.Z,{className:"text-green-600 w-6 h-6"}):(0,r.jsx)(u.Z,{className:"text-gray-400 w-6 h-6"}),(0,r.jsx)("p",{className:"text-gray-700",children:"Fulfilled"===f.status?"Request Fulfilled by Hospital":"Waiting for fulfillment"})]})]})]})]})}},2887:function(e,t,s){"use strict";s.d(t,{Z:function(){return a},gm:function(){return n}});let r="http://localhost:5000",n={donationHistory:e=>"".concat(r,"/donor/history/").concat(e),urgentRequests:"".concat(r,"/donor/requests"),addDonation:"".concat(r,"/donor/add")},a={addRequest:"".concat(r,"/request/add"),getAllRequests:"".concat(r,"/request/all")}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9322:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},9376:function(e,t,s){"use strict";var r=s(5475);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},4474:function(e,t,s){"use strict";s.d(t,{o:function(){return n}});class r extends Error{}function n(e,t){let s;if("string"!=typeof e)throw new r("Invalid token specified: must be a string");t||(t={});let n=!0===t.header?0:1,a=e.split(".")[n];if("string"!=typeof a)throw new r(`Invalid token specified: missing part #${n+1}`);try{s=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var s;return s=t,decodeURIComponent(atob(s).replace(/(.)/g,(e,t)=>{let s=t.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}catch(e){return atob(t)}}(a)}catch(e){throw new r(`Invalid token specified: invalid base64 for part #${n+1} (${e.message})`)}try{return JSON.parse(s)}catch(e){throw new r(`Invalid token specified: invalid json for part #${n+1} (${e.message})`)}}r.prototype.name="InvalidTokenError"}},function(e){e.O(0,[216,971,117,744],function(){return e(e.s=5582)}),_N_E=e.O()}]);