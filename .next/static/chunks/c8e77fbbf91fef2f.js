(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47293,e=>{"use strict";class t extends Error{}function o(e,o){let l;if("string"!=typeof e)throw new t("Invalid token specified: must be a string");o||(o={});let a=+(!0!==o.header),n=e.split(".")[a];if("string"!=typeof n)throw new t(`Invalid token specified: missing part #${a+1}`);try{l=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var o;return o=t,decodeURIComponent(atob(o).replace(/(.)/g,(e,t)=>{let o=t.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch(e){return atob(t)}}(n)}catch(e){throw new t(`Invalid token specified: invalid base64 for part #${a+1} (${e.message})`)}try{return JSON.parse(l)}catch(e){throw new t(`Invalid token specified: invalid json for part #${a+1} (${e.message})`)}}t.prototype.name="InvalidTokenError",e.s(["jwtDecode",()=>o])},26612,e=>{"use strict";let t="http://localhost:5000",o={donationHistory:e=>`${t}/donor/history/${e}`,urgentRequests:`${t}/donor/requests`,addDonation:`${t}/donor/add`},l={addRequest:`${t}/request/add`,getAllRequests:`${t}/request/all`};e.s(["DONOR",0,o,"REQUEST",0,l])},48362,e=>{"use strict";var t=e.i(43476),o=e.i(71645),l=e.i(47293),a=e.i(26612);function n(){let[e,n]=(0,o.useState)({totalDonations:0,totalUnits:0,lastDonationDate:"",nextEligibleDate:"",mostDonatedBloodType:""}),[r,i]=(0,o.useState)(null),[d,c]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{let e=localStorage.getItem("token");e&&i((0,l.jwtDecode)(e).userId)},[]),(0,o.useEffect)(()=>{r&&fetch(a.DONOR.donationHistory(r)).then(e=>e.json()).then(e=>{let t=e.donations||[];if(0===t.length){n({totalDonations:0,totalUnits:0,lastDonationDate:"N/A",nextEligibleDate:"Eligible Now",mostDonatedBloodType:"N/A"}),c(!1);return}let o=t.length,l=t.reduce((e,t)=>e+t.units,0),a=t[0],s=a.date?.slice(0,10)||"N/A",r=new Date(a.date);r.setDate(r.getDate()+90);let i=r.toISOString().slice(0,10),d={};t.forEach(e=>{d[e.bloodType]||(d[e.bloodType]=0),d[e.bloodType]+=1}),n({totalDonations:o,totalUnits:l,lastDonationDate:s,nextEligibleDate:i,mostDonatedBloodType:Object.entries(d).sort((e,t)=>t[1]-e[1])[0]?.[0]||"N/A"}),c(!1)}).catch(e=>console.error(e))},[r]),(0,t.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Your Donation Statistics"}),d?(0,t.jsx)("p",{className:"text-gray-600",children:"Loading stats..."}):(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsx)(s,{title:"Total Donations",value:e.totalDonations,color:"red"}),(0,t.jsx)(s,{title:"Total Units Donated",value:e.totalUnits,color:"green"}),(0,t.jsx)(s,{title:"Last Donation Date",value:e.lastDonationDate,color:"blue"}),(0,t.jsx)(s,{title:"Next Eligible Donation",value:e.nextEligibleDate,color:"purple"}),(0,t.jsx)(s,{title:"Most Donated Blood Type",value:e.mostDonatedBloodType,color:"yellow"})]})]})}function s({title:e,value:o,color:l}){return(0,t.jsxs)("div",{className:`p-6 rounded-xl shadow bg-white border-l-4 ${{red:"bg-red-100 text-red-700",green:"bg-green-100 text-green-700",blue:"bg-blue-100 text-blue-700",purple:"bg-purple-100 text-purple-700",yellow:"bg-yellow-100 text-yellow-700"}[l]}`,children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:e}),(0,t.jsx)("p",{className:"text-3xl font-bold mt-2",children:o})]})}e.s(["default",()=>n])}]);